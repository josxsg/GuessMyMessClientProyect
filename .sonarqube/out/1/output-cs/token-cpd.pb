◊
èC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\Properties\AssemblyInfo.cs
[

 
assembly

 	
:

	 

AssemblyTitle

 
(

 
$str

 ,
)

, -
]

- .
[ 
assembly 	
:	 

AssemblyDescription 
( 
$str !
)! "
]" #
[ 
assembly 	
:	 
!
AssemblyConfiguration  
(  !
$str! #
)# $
]$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str .
). /
]/ 0
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
["" 
assembly"" 	
:""	 

	ThemeInfo"" 
("" &
ResourceDictionaryLocation## 
.## 
None## #
,### $&
ResourceDictionaryLocation&& 
.&& 
SourceAssembly&& -
))) 
])) 
[33 
assembly33 	
:33	 

AssemblyVersion33 
(33 
$str33 $
)33$ %
]33% &
[44 
assembly44 	
:44	 

AssemblyFileVersion44 
(44 
$str44 (
)44( )
]44) *ˆ
®C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\WaitingRoom\WaitingRoomPublicMatchView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
WaitingRoom! ,
{ 
public 

partial 
class &
WaitingRoomPublicMatchView 3
:4 5
Window6 <
{ 
public &
WaitingRoomPublicMatchView )
() *
)* +
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new "+
WaitingRoomPublicMatchViewModel# B
(B C
LobbyClientManager "
." #
Instance# +
,+ ,
SessionManager 
. 
Instance '
) 
; 
} 	
}   
}!! Ü
¨C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\WaitingRoom\WaitingRoomPublicMatchHostView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
WaitingRoom! ,
{ 
public 

partial 
class *
WaitingRoomPublicMatchHostView 7
:8 9
Window: @
{ 
public *
WaitingRoomPublicMatchHostView -
(- .
). /
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new "/
#WaitingRoomPublicMatchHostViewModel# F
(F G
LobbyClientManager "
." #
Instance# +
,+ ,
SessionManager 
. 
Instance '
) 
; 
} 	
}   
}!! Ö
±C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\WaitingRoom\WaitingRoomPublicMatchCountDownView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
WaitingRoom! ,
{ 
public 

partial 
class /
#WaitingRoomPublicMatchCountDownView <
:= >
Window? E
{ 
public /
#WaitingRoomPublicMatchCountDownView 2
(2 3
)3 4
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new "4
(WaitingRoomPublicMatchCountDownViewModel# K
(K L
)L M
;M N
} 	
} 
} ˙
©C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\WaitingRoom\WaitingRoomPrivateMatchView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
WaitingRoom! ,
{ 
public 

partial 
class '
WaitingRoomPrivateMatchView 4
:5 6
Window7 =
{ 
public '
WaitingRoomPrivateMatchView *
(* +
)+ ,
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new ",
 WaitingRoomPrivateMatchViewModel# C
(C D
LobbyClientManager "
." #
Instance# +
,+ ,
SessionManager 
. 
Instance '
) 
; 
} 	
}   
}!! ä
≠C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\WaitingRoom\WaitingRoomPrivateMatchHostView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
WaitingRoom! ,
{ 
public 

partial 
class +
WaitingRoomPrivateMatchHostView 8
:9 :
Window; A
{ 
public +
WaitingRoomPrivateMatchHostView .
(. /
)/ 0
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new "0
$WaitingRoomPrivateMatchHostViewModel# G
(G H
LobbyClientManager "
." #
Instance# +
,+ ,
SessionManager 
. 
Instance '
) 
; 
} 	
}   
}!! ±
ôC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Match\WordSelectionView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Match! &
{ 
public 

partial 
class 
WordSelectionView *
:+ ,
Window- 3
{ 
public 
WordSelectionView  
(  !
)! "
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new ""
WordSelectionViewModel# 9
(9 :
): ;
;; <
} 	
} 
} ≠
òC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Match\GuessTheWordView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Match! &
{ 
public 

partial 
class 
GuessTheWordView )
:* +
Window, 2
{ 
public 
GuessTheWordView 
(  
)  !
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new "!
GuessTheWordViewModel# 8
(8 9
)9 :
;: ;
} 	
} 
} •
ñC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Match\EndOfMatchView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Match! &
{ 
public 

partial 
class 
EndOfMatchView '
:( )
Window* 0
{ 
public 
EndOfMatchView 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new "
EndOfMatchViewModel# 6
(6 7
)7 8
;8 9
} 	
} 
} ±
ôC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Match\DrawingScreenView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Match! &
{ 
public 

partial 
class 
DrawingScreenView *
:+ ,
Window- 3
{ 
public 
DrawingScreenView  
(  !
)! "
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new ""
DrawingScreenViewModel# 9
(9 :
): ;
;; <
} 	
} 
} ±
ôC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Match\AnswersScreenView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Match! &
{ 
public 

partial 
class 
AnswersScreenView *
:+ ,
Window- 3
{ 
public 
AnswersScreenView  
(  !
)! "
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new ""
AnswersScreenViewModel# 9
(9 :
): ;
;; <
} 	
} 
} ¡
°C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\MatchSettings\MatchSettingsView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
MatchSettings! .
{ 
public 

partial 
class 
MatchSettingsView *
:+ ,
Window- 3
{ 
public 
MatchSettingsView  
(  !
)! "
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new ""
MatchSettingsViewModel# 9
(9 :
): ;
;; <
} 	
} 
} ¯
ïC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Matches\MatchesView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Matches! (
{ 
public 

partial 
class 
MatchesView $
:% &
Window' -
{ 
public 
MatchesView 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
} 
} Ì
ÄC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\App.xaml.cs
	namespace 	
GuessMyMessClient
 
{ 
public 

partial 
class 
App 
: 
Application *
{		 
public

 
App

 
(

 
)

 
{ 	
Log 
. 
Logger 
= 
new 
LoggerConfiguration 0
(0 1
)1 2
. 
MinimumLevel 
. 
Debug #
(# $
)$ %
. 
WriteTo 
. 
File 
( 
$str 4
,4 5
rollingInterval #
:# $
RollingInterval% 4
.4 5
Day5 8
,8 9
outputTemplate "
:" #
$str$ w
)w x
. 
CreateLogger 
( 
) 
;  
Log 
. 
Information 
( 
$str A
)A B
;B C
this 
. (
DispatcherUnhandledException -
+=. 0,
 App_DispatcherUnhandledException1 Q
;Q R
} 	
	protected 
override 
void 
	OnStartup  )
() *
StartupEventArgs* :
e; <
)< =
{ 	
CultureInfo 
cultureInfo #
=$ %
new& )
CultureInfo* 5
(5 6
$str6 =
)= >
;> ?
Thread 
. 
CurrentThread  
.  !
CurrentUICulture! 1
=2 3
cultureInfo4 ?
;? @
Thread 
. 
CurrentThread  
.  !
CurrentCulture! /
=0 1
cultureInfo2 =
;= >
base 
. 
	OnStartup 
( 
e 
) 
; 
} 	
private!! 
void!! ,
 App_DispatcherUnhandledException!! 5
(!!5 6
object!!6 <
sender!!= C
,!!C D
System!!E K
.!!K L
Windows!!L S
.!!S T
	Threading!!T ]
.!!] ^2
%DispatcherUnhandledExceptionEventArgs	!!^ É
e
!!Ñ Ö
)
!!Ö Ü
{"" 	
Log## 
.## 
Fatal## 
(## 
e## 
.## 
	Exception## !
,##! "
$str### R
)##R S
;##S T
e$$ 
.$$ 
Handled$$ 
=$$ 
true$$ 
;$$ 
Log&& 
.&& 
CloseAndFlush&& 
(&& 
)&& 
;&&  
Current'' 
.'' 
Shutdown'' 
('' 
)'' 
;'' 
}(( 	
	protected** 
override** 
void** 
OnExit**  &
(**& '
ExitEventArgs**' 4
e**5 6
)**6 7
{++ 	
Log,, 
.,, 
Information,, 
(,, 
$str,, :
),,: ;
;,,; <
Log-- 
.-- 
CloseAndFlush-- 
(-- 
)-- 
;--  
base.. 
... 
OnExit.. 
(.. 
e.. 
).. 
;.. 
}// 	
}00 
}11 ˘
êC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\HomePages\Main.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
	HomePages! *
{ 
public 

partial 
class 
Main 
: 
Window  &
{ 
public 
Main 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new "
MainViewModel# 0
(0 1
)1 2
;2 3
this 
. 
Loaded 
+= 
Main_Loaded &
;& '
} 	
private 
void 
Main_Loaded  
(  !
object! '
sender( .
,. /
RoutedEventArgs0 ?
e@ A
)A B
{ 	
this   
.   
WindowState   
=   
WindowState   *
.  * +
	Maximized  + 4
;  4 5
this!! 
.!! 
WindowStyle!! 
=!! 
WindowStyle!! *
.!!* +
None!!+ /
;!!/ 0
this"" 
."" 

ResizeMode"" 
="" 

ResizeMode"" (
.""( )
NoResize"") 1
;""1 2
}## 	
	protected$$ 
override$$ 
void$$ !
OnMouseLeftButtonDown$$  5
($$5 6 
MouseButtonEventArgs$$6 J
e$$K L
)$$L M
{%% 	
base&& 
.&& !
OnMouseLeftButtonDown&& &
(&&& '
e&&' (
)&&( )
;&&) *
if'' 
('' 
e'' 
.'' 
ButtonState'' 
==''  
MouseButtonState''! 1
.''1 2
Pressed''2 9
)''9 :
{(( 
DragMove)) 
()) 
))) 
;)) 
}** 
}++ 	
},, 
}-- ≠
òC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Lobby\SelectAvatarView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Lobby! &
{ 
public 

partial 
class 
SelectAvatarView )
:* +
Window, 2
{ 
public 
SelectAvatarView 
(  
)  !
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new "!
SelectAvatarViewModel# 8
(8 9
)9 :
;: ;
} 	
} 
} ı
≠C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\WaitingRoom\WaitingRoomPublicMatchViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
WaitingRoom& 1
{ 
public 

class +
WaitingRoomPublicMatchViewModel 0
:1 2$
WaitingRoomViewModelBase3 K
{ 
public +
WaitingRoomPublicMatchViewModel .
(. /
LobbyClientManager/ A
lobbyManagerB N
,N O
SessionManagerP ^
sessionManager_ m
)m n
:		 
base		 
(		 
lobbyManager		 
,		  
sessionManager		! /
)		/ 0
{

 	
} 	
} 
} ñ
±C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\WaitingRoom\WaitingRoomPublicMatchHostViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
WaitingRoom& 1
{ 
public 

class /
#WaitingRoomPublicMatchHostViewModel 4
:5 6$
WaitingRoomViewModelBase7 O
{		 
public

 
ICommand

 
StartGameCommand

 (
{

) *
get

+ .
;

. /
private

0 7
set

8 ;
;

; <
}

= >
public /
#WaitingRoomPublicMatchHostViewModel 2
(2 3
LobbyClientManager3 E
lobbyManagerF R
,R S
SessionManagerT b
sessionManagerc q
)q r
: 
base 
( 
lobbyManager 
,  
sessionManager! /
)/ 0
{ 	
} 	
	protected 
override 
void 
InitializeCommands  2
(2 3
)3 4
{ 	
base 
. 
InitializeCommands #
(# $
)$ %
;% &
StartGameCommand 
= 
new "
RelayCommand# /
(/ 0
	StartGame0 9
,9 :
CanStartGame; G
)G H
;H I
} 	
private 
bool 
CanStartGame !
(! "
object" (
	parameter) 2
)2 3
{ 	
return 
IsHost 
; 
} 	
private 
void 
	StartGame 
( 
object %
	parameter& /
)/ 0
{ 	
_lobbyManager 
. 
RequestStartGame *
(* +
)+ ,
;, -
} 	
	protected!! 
override!! 
void!! 
OnLobbyStateUpdated!!  3
(!!3 4
LobbyStateDto!!4 A
state!!B G
)!!G H
{"" 	
bool## 
wasHostBeforeUpdate## $
=##% &
this##' +
.##+ ,
IsHost##, 2
;##2 3
base%% 
.%% 
OnLobbyStateUpdated%% $
(%%$ %
state%%% *
)%%* +
;%%+ ,
if'' 
('' 
wasHostBeforeUpdate'' #
!=''$ &
this''' +
.''+ ,
IsHost'', 2
)''2 3
{(( 
Application)) 
.)) 
Current)) #
?))# $
.))$ %

Dispatcher))% /
.))/ 0
Invoke))0 6
())6 7
())7 8
)))8 9
=>)): <
{** 
CommandManager++ "
.++" #&
InvalidateRequerySuggested++# =
(++= >
)++> ?
;++? @
},, 
),, 
;,, 
}-- 
}.. 	
}// 
}00 “
∂C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\WaitingRoom\WaitingRoomPublicMatchCountDownViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
WaitingRoom& 1
{ 
internal		 
class		 4
(WaitingRoomPublicMatchCountDownViewModel		 ;
{

 
} 
} ¯
ÆC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\WaitingRoom\WaitingRoomPrivateMatchViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
WaitingRoom& 1
{ 
public 

class ,
 WaitingRoomPrivateMatchViewModel 1
:2 3$
WaitingRoomViewModelBase4 L
{ 
public ,
 WaitingRoomPrivateMatchViewModel /
(/ 0
LobbyClientManager0 B
lobbyManagerC O
,O P
SessionManagerQ _
sessionManager` n
)n o
:		 
base		 
(		 
lobbyManager		 
,		  
sessionManager		! /
)		/ 0
{

 	
} 	
} 
} ô
≤C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\WaitingRoom\WaitingRoomPrivateMatchHostViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
WaitingRoom& 1
{ 
public 

class 0
$WaitingRoomPrivateMatchHostViewModel 5
:6 7$
WaitingRoomViewModelBase8 P
{		 
public

 
ICommand

 
StartGameCommand

 (
{

) *
get

+ .
;

. /
private

0 7
set

8 ;
;

; <
}

= >
public 0
$WaitingRoomPrivateMatchHostViewModel 3
(3 4
LobbyClientManager4 F
lobbyManagerG S
,S T
SessionManagerU c
sessionManagerd r
)r s
: 
base 
( 
lobbyManager 
,  
sessionManager! /
)/ 0
{ 	
} 	
	protected 
override 
void 
InitializeCommands  2
(2 3
)3 4
{ 	
base 
. 
InitializeCommands #
(# $
)$ %
;% &
StartGameCommand 
= 
new "
RelayCommand# /
(/ 0
	StartGame0 9
,9 :
CanStartGame; G
)G H
;H I
} 	
private 
bool 
CanStartGame !
(! "
object" (
	parameter) 2
)2 3
{ 	
return 
IsHost 
; 
} 	
private 
void 
	StartGame 
( 
object %
	parameter& /
)/ 0
{ 	
_lobbyManager 
. 
RequestStartGame *
(* +
)+ ,
;, -
} 	
	protected!! 
override!! 
void!! 
OnLobbyStateUpdated!!  3
(!!3 4
LobbyStateDto!!4 A
state!!B G
)!!G H
{"" 	
bool## 
wasHostBeforeUpdate## $
=##% &
this##' +
.##+ ,
IsHost##, 2
;##2 3
base%% 
.%% 
OnLobbyStateUpdated%% $
(%%$ %
state%%% *
)%%* +
;%%+ ,
if'' 
('' 
wasHostBeforeUpdate'' #
!=''$ &
this''' +
.''+ ,
IsHost'', 2
)''2 3
{(( 
Application)) 
.)) 
Current)) #
?))# $
.))$ %

Dispatcher))% /
.))/ 0
Invoke))0 6
())6 7
())7 8
)))8 9
=>)): <
{** 
CommandManager++ "
.++" #&
InvalidateRequerySuggested++# =
(++= >
)++> ?
;++? @
},, 
),, 
;,, 
}-- 
}.. 	
}// 
}00 ˘
ìC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Lobby\ProfileView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Lobby! &
{ 
public 

partial 
class 
ProfileView $
:% &
UserControl' 2
{ 
public 
ProfileView 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
} 
} ¯

ëC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Lobby\LobbyView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Lobby! &
{ 
public 

partial 
class 
	LobbyView "
:# $
Window% +
{ 
public 
	LobbyView 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new "
LobbyViewModel# 1
(1 2
)2 3
;3 4
} 	
	protected 
override 
void !
OnMouseLeftButtonDown  5
(5 6 
MouseButtonEventArgs6 J
eK L
)L M
{ 	
base 
. !
OnMouseLeftButtonDown &
(& '
e' (
)( )
;) *
if   
(   
e   
.   
ButtonState   
==    
MouseButtonState  ! 1
.  1 2
Pressed  2 9
)  9 :
{!! 
DragMove"" 
("" 
)"" 
;"" 
}## 
}$$ 	
}%% 
}&& ˘
ìC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Lobby\FriendsView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Lobby! &
{ 
public 

partial 
class 
FriendsView $
:% &
UserControl' 2
{ 
public 
FriendsView 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
} 
} ã
ôC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Lobby\DirectMessageView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Lobby! &
{ 
public 

partial 
class 
DirectMessageView *
:+ ,
UserControl- 8
{ 
public 
DirectMessageView  
(  !
)! "
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
} 
} ƒ
ßC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Lobby\Dialogs\VerifyChangesByCodeView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Lobby! &
.& '
Dialogs' .
{ 
public 

partial 
class #
VerifyChangesByCodeView 0
:1 2
Window3 9
{ 
public #
VerifyChangesByCodeView &
(& '
)' (
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
} 
} ñ

†C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Lobby\Dialogs\VerifyByCodeView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Lobby! &
.& '
Dialogs' .
{ 
public 

partial 
class 
VerifyByCodeView )
:* +
Window, 2
{ 
public 
VerifyByCodeView 
(  
)  !
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
	protected 
override 
void !
OnMouseLeftButtonDown  5
(5 6 
MouseButtonEventArgs6 J
eK L
)L M
{ 	
base 
. !
OnMouseLeftButtonDown &
(& '
e' (
)( )
;) *
if   
(   
e   
.   
ButtonState   
==    
MouseButtonState  ! 1
.  1 2
Pressed  2 9
)  9 :
{!! 
DragMove"" 
("" 
)"" 
;"" 
}## 
}$$ 	
}%% 
}&& ›
°C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Lobby\Dialogs\InviteByEmailView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Lobby! &
.& '
Dialogs' .
{ 
public 

partial 
class 
InviteByEmailView *
:+ ,
Window- 3
{ 
public 
InviteByEmailView  
(  !
)! "
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new ""
InviteByEmailViewModel# 9
(9 :
): ;
;; <
} 	
} 
} µ
¢C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Lobby\Dialogs\ChangePasswordView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Lobby! &
.& '
Dialogs' .
{ 
public 

partial 
class 
ChangePasswordView +
:, -
Window. 4
{ 
public 
ChangePasswordView !
(! "
)" #
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
} 
} ¨
üC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Lobby\Dialogs\ChangeEmailView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Lobby! &
.& '
Dialogs' .
{ 
public 

partial 
class 
ChangeEmailView (
:) *
Window+ 1
{ 
public 
ChangeEmailView 
( 
)  
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
} 
} ã
ôC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\Lobby\ConfigurationView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
Lobby! &
{ 
public 

partial 
class 
ConfigurationView *
:+ ,
UserControl- 8
{ 
public 
ConfigurationView  
(  !
)! "
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
} 
} ü
óC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\HomePages\WelcomeView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
	HomePages! *
{ 
public 

partial 
class 
WelcomeView $
:% &
Window' -
{ 
public 
WelcomeView 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new "
WelcomeViewModel# 3
(3 4
)4 5
;5 6
this 
. 
Loaded 
+= 
WelcomeView_Loaded -
;- .
} 	
private 
void 
WelcomeView_Loaded '
(' (
object( .
sender/ 5
,5 6
RoutedEventArgs7 F
eG H
)H I
{ 	
this   
.   
WindowState   
=   
WindowState   *
.  * +
	Maximized  + 4
;  4 5
this!! 
.!! 
WindowStyle!! 
=!! 
WindowStyle!! *
.!!* +
None!!+ /
;!!/ 0
this"" 
."" 

ResizeMode"" 
="" 

ResizeMode"" (
.""( )
NoResize"") 1
;""1 2
}## 	
	protected&& 
override&& 
void&& !
OnMouseLeftButtonDown&&  5
(&&5 6 
MouseButtonEventArgs&&6 J
e&&K L
)&&L M
{'' 	
base(( 
.(( !
OnMouseLeftButtonDown(( &
(((& '
e((' (
)((( )
;(() *
if)) 
()) 
e)) 
.)) 
ButtonState)) 
==))  
MouseButtonState))! 1
.))1 2
Pressed))2 9
)))9 :
{** 
DragMove++ 
(++ 
)++ 
;++ 
},, 
}-- 	
}.. 
}// Ñ
ñC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\HomePages\SignUpView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
	HomePages! *
{ 
public 

partial 
class 

SignUpView #
:$ %
Window& ,
{ 
public 

SignUpView 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new "
SignUpViewModel# 2
(2 3
)3 4
;4 5
} 	
	protected 
override 
void !
OnMouseLeftButtonDown  5
(5 6 
MouseButtonEventArgs6 J
eK L
)L M
{ 	
base 
. !
OnMouseLeftButtonDown &
(& '
e' (
)( )
;) *
if   
(   
e   
.   
ButtonState   
==    
MouseButtonState  ! 1
.  1 2
Pressed  2 9
)  9 :
{!! 
DragMove"" 
("" 
)"" 
;"" 
}## 
}$$ 	
}%% 
}&& Ä
ïC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\View\HomePages\LoginView.xaml.cs
	namespace 	
GuessMyMessClient
 
. 
View  
.  !
	HomePages! *
{ 
public 

partial 
class 
	LoginView "
:# $
Window% +
{ 
public 
	LoginView 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
DataContext 
= 
new "
LoginViewModel# 1
(1 2
)2 3
;3 4
} 	
	protected 
override 
void !
OnMouseLeftButtonDown  5
(5 6 
MouseButtonEventArgs6 J
eK L
)L M
{ 	
base 
. !
OnMouseLeftButtonDown &
(& '
e' (
)( )
;) *
if   
(   
e   
.   
ButtonState   
==    
MouseButtonState  ! 1
.  1 2
Pressed  2 9
)  9 :
{!! 
DragMove"" 
("" 
)"" 
;"" 
}## 
}$$ 	
}%% 
}&& Ô≥
¶C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\WaitingRoom\WaitingRoomViewModelBase.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
WaitingRoom& 1
{ 
public 

abstract 
class $
WaitingRoomViewModelBase 2
:3 4
ViewModelBase5 B
{ 
	protected 
readonly 
LobbyClientManager -
_lobbyManager. ;
;; <
	protected 
readonly 
SessionManager )
_sessionManager* 9
;9 :
	protected 
DispatcherTimer !
_countdownTimer" 1
;1 2
private 
string 

_matchName !
;! "
public 
string 
	MatchName 
{ 	
get 
=> 

_matchName 
; 
set 
=> 
SetProperty 
( 
ref "

_matchName# -
,- .
value/ 4
)4 5
;5 6
} 	
private 
string 
_hostUsername $
;$ %
public 
string 
HostUsername "
{ 	
get 
=> 
_hostUsername  
;  !
set 
=> 
SetProperty 
( 
ref "
_hostUsername# 0
,0 1
value2 7
)7 8
;8 9
}   	
private"" 
string"" 
_difficulty"" "
;""" #
public## 
string## 

Difficulty##  
{$$ 	
get%% 
=>%% 
_difficulty%% 
;%% 
set&& 
=>&& 
SetProperty&& 
(&& 
ref&& "
_difficulty&&# .
,&&. /
value&&0 5
)&&5 6
;&&6 7
}'' 	
private)) 
string)) 
_playerCountDisplay)) *
;))* +
public** 
string** 
PlayerCountDisplay** (
{++ 	
get,, 
=>,, 
_playerCountDisplay,, &
;,,& '
set-- 
=>-- 
SetProperty-- 
(-- 
ref-- "
_playerCountDisplay--# 6
,--6 7
value--8 =
)--= >
;--> ?
}.. 	
private00 
string00 

_matchCode00 !
;00! "
public11 
string11 
	MatchCode11 
{22 	
get33 
=>33 

_matchCode33 
;33 
set44 
=>44 
SetProperty44 
(44 
ref44 "

_matchCode44# -
,44- .
value44/ 4
)444 5
;445 6
}55 	
private77 

Visibility77  
_matchCodeVisibility77 /
=770 1

Visibility772 <
.77< =
	Collapsed77= F
;77F G
public88 

Visibility88 
MatchCodeVisibility88 -
{99 	
get:: 
=>::  
_matchCodeVisibility:: '
;::' (
set;; 
=>;; 
SetProperty;; 
(;; 
ref;; " 
_matchCodeVisibility;;# 7
,;;7 8
value;;9 >
);;> ?
;;;? @
}<< 	
public>>  
ObservableCollection>> #
<>># $
PlayerViewModel>>$ 3
>>>3 4
Players>>5 <
{>>= >
get>>? B
;>>B C
}>>D E
=>>F G
new>>H K 
ObservableCollection>>L `
<>>` a
PlayerViewModel>>a p
>>>p q
(>>q r
)>>r s
;>>s t
public??  
ObservableCollection?? #
<??# $
ChatMessageDisplay??$ 6
>??6 7
ChatMessages??8 D
{??E F
get??G J
;??J K
}??L M
=??N O
new??P S 
ObservableCollection??T h
<??h i
ChatMessageDisplay??i {
>??{ |
(??| }
)??} ~
;??~ 
privateAA 
intAA 
_countdownValueAA #
;AA# $
publicBB 
intBB 
CountdownValueBB !
{CC 	
getDD 
=>DD 
_countdownValueDD "
;DD" #
setEE 
=>EE 
SetPropertyEE 
(EE 
refEE "
_countdownValueEE# 2
,EE2 3
valueEE4 9
)EE9 :
;EE: ;
}FF 	
privateHH 

VisibilityHH  
_countdownVisibilityHH /
=HH0 1

VisibilityHH2 <
.HH< =
	CollapsedHH= F
;HHF G
publicII 

VisibilityII 
CountdownVisibilityII -
{JJ 	
getKK 
=>KK  
_countdownVisibilityKK '
;KK' (
setLL 
=>LL 
SetPropertyLL 
(LL 
refLL " 
_countdownVisibilityLL# 7
,LL7 8
valueLL9 >
)LL> ?
;LL? @
}MM 	
publicOO 
boolOO 
IsHostOO 
=>OO 
_sessionManagerOO -
.OO- .
CurrentUsernameOO. =
!=OO> @
nullOOA E
&&OOF H
_sessionManagerOOI X
.OOX Y
CurrentUsernameOOY h
.OOh i
EqualsOOi o
(OOo p
HostUsernameOOp |
,OO| }
StringComparison	OO~ é
.
OOé è
OrdinalIgnoreCase
OOè †
)
OO† °
;
OO° ¢
publicQQ 
ICommandQQ 
LeaveCommandQQ $
{QQ% &
getQQ' *
;QQ* +
	protectedQQ, 5
setQQ6 9
;QQ9 :
}QQ; <
publicRR 
ICommandRR 
SendMessageCommandRR *
{RR+ ,
getRR- 0
;RR0 1
	protectedRR2 ;
setRR< ?
;RR? @
}RRA B
publicSS 
ICommandSS 
KickPlayerCommandSS )
{SS* +
getSS, /
;SS/ 0
	protectedSS1 :
setSS; >
;SS> ?
}SS@ A
	protectedUU $
WaitingRoomViewModelBaseUU *
(UU* +
LobbyClientManagerUU+ =
lobbyManagerUU> J
,UUJ K
SessionManagerUUL Z
sessionManagerUU[ i
)UUi j
{VV 	
_lobbyManagerWW 
=WW 
lobbyManagerWW (
;WW( )
_sessionManagerXX 
=XX 
sessionManagerXX ,
;XX, -
InitializeCommandsYY 
(YY 
)YY  
;YY  !"
SubscribeToLobbyEventsZZ "
(ZZ" #
)ZZ# $
;ZZ$ %
}[[ 	
	protected]] 
virtual]] 
void]] 
InitializeCommands]] 1
(]]1 2
)]]2 3
{^^ 	
LeaveCommand__ 
=__ 
new__ 
RelayCommand__ +
(__+ ,

LeaveLobby__, 6
)__6 7
;__7 8
}`` 	
	protectedbb 
virtualbb 
voidbb "
SubscribeToLobbyEventsbb 5
(bb5 6
)bb6 7
{cc 	
_lobbyManagerdd 
.dd 
LobbyStateUpdateddd +
+=dd, .
OnLobbyStateUpdateddd/ B
;ddB C
_lobbyManageree 
.ee  
LobbyMessageReceivedee .
+=ee/ 1"
OnLobbyMessageReceivedee2 H
;eeH I
_lobbyManagerff 
.ff 
Kickedff  
+=ff! #
OnKickedff$ ,
;ff, -
_lobbyManagergg 
.gg 
CountdownTickgg '
+=gg( *
OnCountdownTickgg+ :
;gg: ;
_lobbyManagerhh 
.hh 
GameStartedhh %
+=hh& (
OnGameStartedhh) 6
;hh6 7
_lobbyManagerii 
.ii 
ConnectionLostii (
+=ii) +
OnConnectionLostii, <
;ii< =
}jj 	
	protectedll 
virtualll 
voidll &
UnsubscribeFromLobbyEventsll 9
(ll9 :
)ll: ;
{mm 	
_lobbyManagernn 
.nn 
LobbyStateUpdatednn +
-=nn, .
OnLobbyStateUpdatednn/ B
;nnB C
_lobbyManageroo 
.oo  
LobbyMessageReceivedoo .
-=oo/ 1"
OnLobbyMessageReceivedoo2 H
;ooH I
_lobbyManagerpp 
.pp 
Kickedpp  
-=pp! #
OnKickedpp$ ,
;pp, -
_lobbyManagerqq 
.qq 
CountdownTickqq '
-=qq( *
OnCountdownTickqq+ :
;qq: ;
_lobbyManagerrr 
.rr 
GameStartedrr %
-=rr& (
OnGameStartedrr) 6
;rr6 7
_lobbyManagerss 
.ss 
ConnectionLostss (
-=ss) +
OnConnectionLostss, <
;ss< =
}tt 	
	protectedvv 
virtualvv 
voidvv 
OnLobbyStateUpdatedvv 2
(vv2 3
LobbyStateDtovv3 @
statevvA F
)vvF G
{ww 	
	MatchNamexx 
=xx 
statexx 
.xx 
	MatchNamexx '
;xx' (
HostUsernameyy 
=yy 
stateyy  
.yy  !
HostUsernameyy! -
;yy- .

Difficultyzz 
=zz 
statezz 
.zz 

Difficultyzz )
;zz) *
PlayerCountDisplay{{ 
={{  
$"{{! #
{{{# $
state{{$ )
.{{) *
CurrentPlayers{{* 8
}{{8 9
$str{{9 :
{{{: ;
state{{; @
.{{@ A

MaxPlayers{{A K
}{{K L
"{{L M
;{{M N
	MatchCode|| 
=|| 
state|| 
.|| 
	MatchCode|| '
;||' (
MatchCodeVisibility}} 
=}}  !
string}}" (
.}}( )
IsNullOrEmpty}}) 6
(}}6 7
state}}7 <
.}}< =
	MatchCode}}= F
)}}F G
?}}H I

Visibility}}J T
.}}T U
	Collapsed}}U ^
:}}_ `

Visibility}}a k
.}}k l
Visible}}l s
;}}s t
Players 
. 
Clear 
( 
) 
; 
bool
ÄÄ 
amIHost
ÄÄ 
=
ÄÄ 
_sessionManager
ÄÄ *
.
ÄÄ* +
CurrentUsername
ÄÄ+ :
?
ÄÄ: ;
.
ÄÄ; <
Equals
ÄÄ< B
(
ÄÄB C
HostUsername
ÄÄC O
,
ÄÄO P
StringComparison
ÄÄQ a
.
ÄÄa b
OrdinalIgnoreCase
ÄÄb s
)
ÄÄs t
??
ÄÄu w
false
ÄÄx }
;
ÄÄ} ~
foreach
ÅÅ 
(
ÅÅ 
var
ÅÅ 
username
ÅÅ !
in
ÅÅ" $
state
ÅÅ% *
.
ÅÅ* +
PlayerUsernames
ÅÅ+ :
.
ÅÅ: ;
OrderBy
ÅÅ; B
(
ÅÅB C
u
ÅÅC D
=>
ÅÅE G
u
ÅÅH I
)
ÅÅI J
)
ÅÅJ K
{
ÇÇ 
var
ÉÉ 
playerVM
ÉÉ 
=
ÉÉ 
new
ÉÉ "
PlayerViewModel
ÉÉ# 2
{
ÉÉ3 4
Username
ÉÉ5 =
=
ÉÉ> ?
username
ÉÉ@ H
}
ÉÉI J
;
ÉÉJ K
if
ÑÑ 
(
ÑÑ 
amIHost
ÑÑ 
&&
ÑÑ 
!
ÑÑ  
username
ÑÑ  (
.
ÑÑ( )
Equals
ÑÑ) /
(
ÑÑ/ 0
_sessionManager
ÑÑ0 ?
.
ÑÑ? @
CurrentUsername
ÑÑ@ O
,
ÑÑO P
StringComparison
ÑÑQ a
.
ÑÑa b
OrdinalIgnoreCase
ÑÑb s
)
ÑÑs t
)
ÑÑt u
{
ÖÖ 
playerVM
ÜÜ 
.
ÜÜ "
KickButtonVisibility
ÜÜ 1
=
ÜÜ2 3

Visibility
ÜÜ4 >
.
ÜÜ> ?
Visible
ÜÜ? F
;
ÜÜF G
playerVM
áá 
.
áá 
KickCommand
áá (
=
áá) *
KickPlayerCommand
áá+ <
;
áá< =
}
àà 
Players
ââ 
.
ââ 
Add
ââ 
(
ââ 
playerVM
ââ $
)
ââ$ %
;
ââ% &
}
ää 
OnPropertyChanged
ãã 
(
ãã 
nameof
ãã $
(
ãã$ %
IsHost
ãã% +
)
ãã+ ,
)
ãã, -
;
ãã- .
}
åå 	
	protected
éé 
virtual
éé 
void
éé $
OnLobbyMessageReceived
éé 5
(
éé5 6
ChatMessageDto
éé6 D
message
ééE L
)
ééL M
{
èè 	
string
êê 
translatedMessage
êê $
=
êê% &!
TranslateMessageKey
êê' :
(
êê: ;
message
êê; B
.
êêB C
MessageContent
êêC Q
)
êêQ R
;
êêR S
string
ëë 
	formatted
ëë 
=
ëë 
$"
ëë !
$str
ëë! "
{
ëë" #
message
ëë# *
.
ëë* +
SenderUsername
ëë+ 9
}
ëë9 :
$str
ëë: =
{
ëë= >
translatedMessage
ëë> O
}
ëëO P
"
ëëP Q
;
ëëQ R
ChatMessages
íí 
.
íí 
Add
íí 
(
íí 
new
íí   
ChatMessageDisplay
íí! 3
{
íí4 5
FormattedMessage
íí6 F
=
ííG H
	formatted
ííI R
}
ííS T
)
ííT U
;
ííU V
const
ìì 
int
ìì 
maxMessages
ìì !
=
ìì" #
$num
ìì$ '
;
ìì' (
if
îî 
(
îî 
ChatMessages
îî 
.
îî 
Count
îî "
>
îî# $
maxMessages
îî% 0
)
îî0 1
{
ïï 
ChatMessages
ññ 
.
ññ 
RemoveAt
ññ %
(
ññ% &
$num
ññ& '
)
ññ' (
;
ññ( )
}
óó 
}
òò 	
	protected
öö 
virtual
öö 
void
öö 
OnKicked
öö '
(
öö' (
string
öö( .
reason
öö/ 5
)
öö5 6
{
õõ 	

MessageBox
úú 
.
úú 
Show
úú 
(
úú 
$"
úú 
{
úú 
Lang
úú #
.
úú# $"
waitingRoomMsgKicked
úú$ 8
}
úú8 9
$str
úú9 ;
{
úú; <
reason
úú< B
}
úúB C
"
úúC D
,
úúD E
Lang
úúF J
.
úúJ K
alertInfoTitle
úúK Y
,
úúY Z
MessageBoxButton
úú[ k
.
úúk l
OK
úúl n
,
úún o
MessageBoxImage
úúp 
.úú Ä
WarningúúÄ á
)úúá à
;úúà â%
NavigateBackToLobbyView
ùù #
(
ùù# $
)
ùù$ %
;
ùù% &
CleanUp
ûû 
(
ûû 
)
ûû 
;
ûû 
}
üü 	
	protected
°° 
virtual
°° 
void
°° 
OnCountdownTick
°° .
(
°°. /
int
°°/ 2
secondsRemaining
°°3 C
)
°°C D
{
¢¢ 	
CountdownValue
££ 
=
££ 
secondsRemaining
££ -
;
££- .!
CountdownVisibility
§§ 
=
§§  !

Visibility
§§" ,
.
§§, -
Visible
§§- 4
;
§§4 5
}
•• 	
	protected
ßß 
virtual
ßß 
void
ßß 
OnGameStarted
ßß ,
(
ßß, -
)
ßß- .
{
®® 	!
CountdownVisibility
©© 
=
©©  !

Visibility
©©" ,
.
©©, -
	Collapsed
©©- 6
;
©©6 7

MessageBox
™™ 
.
™™ 
Show
™™ 
(
™™ 
Lang
™™  
.
™™  !(
waitingRoomMsgGameStarting
™™! ;
,
™™; <
Lang
™™= A
.
™™A B
alertInfoTitle
™™B P
)
™™P Q
;
™™Q R
CleanUp
´´ 
(
´´ 
)
´´ 
;
´´ 
}
¨¨ 	
	protected
ÆÆ 
virtual
ÆÆ 
void
ÆÆ 
OnConnectionLost
ÆÆ /
(
ÆÆ/ 0
)
ÆÆ0 1
{
ØØ 	%
NavigateBackToLobbyView
∞∞ #
(
∞∞# $
)
∞∞$ %
;
∞∞% &
CleanUp
±± 
(
±± 
)
±± 
;
±± 
}
≤≤ 	
	protected
¥¥ 
virtual
¥¥ 
void
¥¥ 

LeaveLobby
¥¥ )
(
¥¥) *
object
¥¥* 0
	parameter
¥¥1 :
=
¥¥; <
null
¥¥= A
)
¥¥A B
{
µµ 	
_lobbyManager
∂∂ 
.
∂∂ 

Disconnect
∂∂ $
(
∂∂$ %
)
∂∂% &
;
∂∂& '%
NavigateBackToLobbyView
∑∑ #
(
∑∑# $
)
∑∑$ %
;
∑∑% &
CleanUp
∏∏ 
(
∏∏ 
)
∏∏ 
;
∏∏ 
}
ππ 	
	protected
ªª 
virtual
ªª 
void
ªª 
SendChatMessage
ªª .
(
ªª. /
string
ªª/ 5

messageKey
ªª6 @
)
ªª@ A
{
ºº 	
if
ΩΩ 
(
ΩΩ 
!
ΩΩ 
string
ΩΩ 
.
ΩΩ 
IsNullOrEmpty
ΩΩ %
(
ΩΩ% &

messageKey
ΩΩ& 0
)
ΩΩ0 1
)
ΩΩ1 2
{
ææ 
_lobbyManager
øø 
.
øø 
SendChatMessage
øø -
(
øø- .

messageKey
øø. 8
)
øø8 9
;
øø9 :
}
¿¿ 
}
¡¡ 	
	protected
√√ 
virtual
√√ 
void
√√ 

KickPlayer
√√ )
(
√√) *
string
√√* 0
usernameToKick
√√1 ?
)
√√? @
{
ƒƒ 	
if
≈≈ 
(
≈≈ 
!
≈≈ 
string
≈≈ 
.
≈≈ 
IsNullOrEmpty
≈≈ %
(
≈≈% &
usernameToKick
≈≈& 4
)
≈≈4 5
&&
≈≈6 8
IsHost
≈≈9 ?
)
≈≈? @
{
∆∆ 
var
«« 
result
«« 
=
«« 

MessageBox
«« '
.
««' (
Show
««( ,
(
««, -
string
««- 3
.
««3 4
Format
««4 :
(
««: ;
Lang
««; ?
.
««? @'
waitingRoomMsgConfirmKick
««@ Y
,
««Y Z
usernameToKick
««[ i
)
««i j
,
««j k
Lang
»»- 1
.
»»1 2$
alertConfirmationTitle
»»2 H
,
»»H I
MessageBoxButton
»»J Z
.
»»Z [
YesNo
»»[ `
,
»»` a
MessageBoxImage
»»b q
.
»»q r
Question
»»r z
)
»»z {
;
»»{ |
if
…… 
(
…… 
result
…… 
==
…… 
MessageBoxResult
…… .
.
……. /
Yes
……/ 2
)
……2 3
{
   
_lobbyManager
ÀÀ !
.
ÀÀ! "
RequestKickPlayer
ÀÀ" 3
(
ÀÀ3 4
usernameToKick
ÀÀ4 B
)
ÀÀB C
;
ÀÀC D
}
ÃÃ 
}
ÕÕ 
}
ŒŒ 	
	protected
–– 
static
–– 
string
–– !
TranslateMessageKey
––  3
(
––3 4
string
––4 :
key
––; >
)
––> ?
{
—— 	
var
““ 
resource
““ 
=
““ 
Lang
““ 
.
““  
ResourceManager
““  /
.
““/ 0
	GetString
““0 9
(
““9 :
key
““: =
)
““= >
;
““> ?
return
”” 
string
”” 
.
”” 
IsNullOrEmpty
”” '
(
””' (
resource
””( 0
)
””0 1
?
””2 3
key
””4 7
:
””8 9
resource
””: B
;
””B C
}
‘‘ 	
	protected
÷÷ 
virtual
÷÷ 
void
÷÷ %
NavigateBackToLobbyView
÷÷ 6
(
÷÷6 7
)
÷÷7 8
{
◊◊ 	
Application
ÿÿ 
.
ÿÿ 
Current
ÿÿ 
.
ÿÿ  

Dispatcher
ÿÿ  *
.
ÿÿ* +
Invoke
ÿÿ+ 1
(
ÿÿ1 2
(
ÿÿ2 3
)
ÿÿ3 4
=>
ÿÿ5 7
{
ŸŸ 
Window
⁄⁄ 
currentWindow
⁄⁄ $
=
⁄⁄% &
Application
⁄⁄' 2
.
⁄⁄2 3
Current
⁄⁄3 :
.
⁄⁄: ;
Windows
⁄⁄; B
.
⁄⁄B C
OfType
⁄⁄C I
<
⁄⁄I J
Window
⁄⁄J P
>
⁄⁄P Q
(
⁄⁄Q R
)
⁄⁄R S
.
⁄⁄S T
SingleOrDefault
⁄⁄T c
(
⁄⁄c d
w
⁄⁄d e
=>
⁄⁄f h
w
⁄⁄i j
.
⁄⁄j k
DataContext
⁄⁄k v
==
⁄⁄w y
this
⁄⁄z ~
)
⁄⁄~ 
;⁄⁄ Ä
currentWindow
€€ 
?
€€ 
.
€€ 
Close
€€ $
(
€€$ %
)
€€% &
;
€€& '
Console
‹‹ 
.
‹‹ 
	WriteLine
‹‹ !
(
‹‹! "
$str
‹‹" Z
)
‹‹Z [
;
‹‹[ \
}
›› 
)
›› 
;
›› 
}
ﬁﬁ 	
public
‡‡ 
virtual
‡‡ 
void
‡‡ 
CleanUp
‡‡ #
(
‡‡# $
)
‡‡$ %
{
·· 	(
UnsubscribeFromLobbyEvents
‚‚ &
(
‚‚& '
)
‚‚' (
;
‚‚( )
_countdownTimer
„„ 
?
„„ 
.
„„ 
Stop
„„ !
(
„„! "
)
„„" #
;
„„# $
_countdownTimer
‰‰ 
=
‰‰ 
null
‰‰ "
;
‰‰" #
Console
ÂÂ 
.
ÂÂ 
	WriteLine
ÂÂ 
(
ÂÂ 
$str
ÂÂ A
)
ÂÂA B
;
ÂÂB C
}
ÊÊ 	
}
ÁÁ 
public
ËË 

class
ËË 
PlayerViewModel
ËË  
:
ËË! "
ViewModelBase
ËË# 0
{
ÈÈ 
private
ÍÍ 
string
ÍÍ 
	_username
ÍÍ  
;
ÍÍ  !
public
ÎÎ 
string
ÎÎ 
Username
ÎÎ 
{
ÏÏ 	
get
ÌÌ 
=>
ÌÌ 
	_username
ÌÌ 
;
ÌÌ 
set
ÓÓ 
=>
ÓÓ 
SetProperty
ÓÓ 
(
ÓÓ 
ref
ÓÓ "
	_username
ÓÓ# ,
,
ÓÓ, -
value
ÓÓ. 3
)
ÓÓ3 4
;
ÓÓ4 5
}
ÔÔ 	
private
ÒÒ 

Visibility
ÒÒ #
_kickButtonVisibility
ÒÒ 0
=
ÒÒ1 2

Visibility
ÒÒ3 =
.
ÒÒ= >
	Collapsed
ÒÒ> G
;
ÒÒG H
public
ÚÚ 

Visibility
ÚÚ "
KickButtonVisibility
ÚÚ .
{
ÛÛ 	
get
ÙÙ 
=>
ÙÙ #
_kickButtonVisibility
ÙÙ (
;
ÙÙ( )
set
ıı 
=>
ıı 
SetProperty
ıı 
(
ıı 
ref
ıı "#
_kickButtonVisibility
ıı# 8
,
ıı8 9
value
ıı: ?
)
ıı? @
;
ıı@ A
}
ˆˆ 	
public
¯¯ 
ICommand
¯¯ 
KickCommand
¯¯ #
{
¯¯$ %
get
¯¯& )
;
¯¯) *
set
¯¯+ .
;
¯¯. /
}
¯¯0 1
}
˘˘ 
}˙˙ µ
èC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\ViewModelBase.cs
	namespace		 	
GuessMyMessClient		
 
.		 
	ViewModel		 %
{

 
public 

abstract 
class 
ViewModelBase '
:( )"
INotifyPropertyChanged* @
{ 
public 
event '
PropertyChangedEventHandler 0
PropertyChanged1 @
;@ A
	protected 
void 
OnPropertyChanged (
(( )
[) *
CallerMemberName* :
]: ;
string< B
propertyNameC O
=P Q
nullR V
)V W
{ 	
PropertyChanged 
? 
. 
Invoke #
(# $
this$ (
,( )
new* -$
PropertyChangedEventArgs. F
(F G
propertyNameG S
)S T
)T U
;U V
} 	
	protected 
bool 
SetProperty "
<" #
T# $
>$ %
(% &
ref& )
T* +
field, 1
,1 2
T3 4
value5 :
,: ;
[< =
CallerMemberName= M
]M N
stringO U
propertyNameV b
=c d
nulle i
)i j
{ 	
if 
( 
EqualityComparer  
<  !
T! "
>" #
.# $
Default$ +
.+ ,
Equals, 2
(2 3
field3 8
,8 9
value: ?
)? @
)@ A
{ 
return 
false 
; 
} 
field 
= 
value 
; 
OnPropertyChanged 
( 
propertyName *
)* +
;+ ,
return 
true 
; 
} 	
} 
}   ≤
¨C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Support\Converters\BoolToGreenRedConverter.cs
	namespace

 	
GuessMyMessClient


 
.

 
	ViewModel

 %
.

% &
Support

& -
.

- .

Converters

. 8
{ 
public 

class #
BoolToGreenRedConverter (
:) *
IValueConverter+ :
{ 
public 
object 
Convert 
( 
object $
value% *
,* +
Type, 0

targetType1 ;
,; <
object= C
	parameterD M
,M N
CultureInfoO Z
culture[ b
)b c
{ 	
if 
( 
value 
is 
bool 
isOnline &
)& '
{ 
return 
isOnline 
?  !
new" %
SolidColorBrush& 5
(5 6
Colors6 <
.< =
Green= B
)B C
:D E
newF I
SolidColorBrushJ Y
(Y Z
ColorsZ `
.` a
Reda d
)d e
;e f
} 
return 
new 
SolidColorBrush &
(& '
Colors' -
.- .
Gray. 2
)2 3
;3 4
} 	
public 
object 
ConvertBack !
(! "
object" (
value) .
,. /
Type0 4

targetType5 ?
,? @
objectA G
	parameterH Q
,Q R
CultureInfoS ^
culture_ f
)f g
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
} 
} ∞<
õC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Support\PasswordBoxHelper.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Support& -
{ 
public 

static 
class 
PasswordBoxHelper )
{ 
public		 
static		 
readonly		 
DependencyProperty		 1
PasswordProperty		2 B
=		C D
DependencyProperty

 
.

 
RegisterAttached

 /
(

/ 0
$str

0 :
,

: ;
typeof

< B
(

B C
string

C I
)

I J
,

J K
typeof

L R
(

R S
PasswordBoxHelper

S d
)

d e
,

e f
new %
FrameworkPropertyMetadata -
(- .
string. 4
.4 5
Empty5 :
,: ;%
OnPasswordPropertyChanged< U
)U V
)V W
;W X
public 
static 
readonly 
DependencyProperty 1
AttachProperty2 @
=A B
DependencyProperty 
. 
RegisterAttached /
(/ 0
$str0 8
,8 9
typeof: @
(@ A
boolA E
)E F
,F G
typeofH N
(N O
PasswordBoxHelperO `
)` a
,a b
new 
PropertyMetadata $
($ %
false% *
,* +
Attach, 2
)2 3
)3 4
;4 5
private 
static 
readonly 
DependencyProperty  2
IsUpdatingProperty3 E
=F G
DependencyProperty 
. 
RegisterAttached /
(/ 0
$str0 <
,< =
typeof> D
(D E
boolE I
)I J
,J K
typeofL R
(R S
PasswordBoxHelperS d
)d e
)e f
;f g
public 
static 
void 
	SetAttach $
($ %
DependencyObject% 5
dp6 8
,8 9
bool: >
value? D
)D E
{ 	
dp 
. 
SetValue 
( 
AttachProperty &
,& '
value( -
)- .
;. /
} 	
public 
static 
bool 
	GetAttach $
($ %
DependencyObject% 5
dp6 8
)8 9
{ 	
return 
( 
bool 
) 
dp 
. 
GetValue $
($ %
AttachProperty% 3
)3 4
;4 5
} 	
public 
static 
string 
GetPassword (
(( )
DependencyObject) 9
dp: <
)< =
{ 	
return   
(   
string   
)   
dp   
.   
GetValue   &
(  & '
PasswordProperty  ' 7
)  7 8
;  8 9
}!! 	
public## 
static## 
void## 
SetPassword## &
(##& '
DependencyObject##' 7
dp##8 :
,##: ;
string##< B
value##C H
)##H I
{$$ 	
dp%% 
.%% 
SetValue%% 
(%% 
PasswordProperty%% (
,%%( )
value%%* /
)%%/ 0
;%%0 1
}&& 	
private(( 
static(( 
bool(( 
GetIsUpdating(( )
((() *
DependencyObject((* :
dp((; =
)((= >
{)) 	
return** 
(** 
bool** 
)** 
dp** 
.** 
GetValue** $
(**$ %
IsUpdatingProperty**% 7
)**7 8
;**8 9
}++ 	
private-- 
static-- 
void-- 
SetIsUpdating-- )
(--) *
DependencyObject--* :
dp--; =
,--= >
bool--? C
value--D I
)--I J
{.. 	
dp// 
.// 
SetValue// 
(// 
IsUpdatingProperty// *
,//* +
value//, 1
)//1 2
;//2 3
}00 	
private22 
static22 
void22 %
OnPasswordPropertyChanged22 5
(225 6
DependencyObject226 F
sender22G M
,22M N.
"DependencyPropertyChangedEventArgs22O q
e22r s
)22s t
{33 	
if44 
(44 
!44 
(44 
sender44 
is44 
PasswordBox44 '
passwordBox44( 3
)443 4
)444 5
{55 
return66 
;66 
}77 
passwordBox99 
.99 
PasswordChanged99 '
-=99( *
PasswordChanged99+ :
;99: ;
if;; 
(;; 
!;; 
GetIsUpdating;; 
(;; 
passwordBox;; *
);;* +
);;+ ,
{<< 
passwordBox== 
.== 
Password== $
===% &
(==' (
string==( .
)==. /
e==/ 0
.==0 1
NewValue==1 9
;==9 :
}>> 
passwordBox?? 
.?? 
PasswordChanged?? '
+=??( *
PasswordChanged??+ :
;??: ;
}@@ 	
privateBB 
staticBB 
voidBB 
AttachBB "
(BB" #
DependencyObjectBB# 3
senderBB4 :
,BB: ;.
"DependencyPropertyChangedEventArgsBB< ^
eBB_ `
)BB` a
{CC 	
ifDD 
(DD 
!DD 
(DD 
senderDD 
isDD 
PasswordBoxDD '
passwordBoxDD( 3
)DD3 4
)DD4 5
{EE 
returnFF 
;FF 
}GG 
ifII 
(II 
(II 
boolII 
)II 
eII 
.II 
OldValueII  
)II  !
{JJ 
passwordBoxKK 
.KK 
PasswordChangedKK +
-=KK, .
PasswordChangedKK/ >
;KK> ?
}LL 
ifNN 
(NN 
(NN 
boolNN 
)NN 
eNN 
.NN 
NewValueNN  
)NN  !
{OO 
passwordBoxPP 
.PP 
PasswordChangedPP +
+=PP, .
PasswordChangedPP/ >
;PP> ?
}QQ 
}RR 	
privateTT 
staticTT 
voidTT 
PasswordChangedTT +
(TT+ ,
objectTT, 2
senderTT3 9
,TT9 :
RoutedEventArgsTT; J
eTTK L
)TTL M
{UU 	
ifVV 
(VV 
!VV 
(VV 
senderVV 
isVV 
PasswordBoxVV '
passwordBoxVV( 3
)VV3 4
)VV4 5
{WW 
returnXX 
;XX 
}YY 
SetIsUpdating[[ 
([[ 
passwordBox[[ %
,[[% &
true[[' +
)[[+ ,
;[[, -
SetPassword\\ 
(\\ 
passwordBox\\ #
,\\# $
passwordBox\\% 0
.\\0 1
Password\\1 9
)\\9 :
;\\: ;
SetIsUpdating]] 
(]] 
passwordBox]] %
,]]% &
false]]' ,
)]], -
;]]- .
}^^ 	
}__ 
}`` á
ØC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Support\Converters\CountToVisibilityConverter.cs
	namespace

 	
GuessMyMessClient


 
.

 
	ViewModel

 %
.

% &
Support

& -
.

- .

Converters

. 8
{ 
public 

class &
CountToVisibilityConverter +
:, -
IValueConverter. =
{ 
public 
object 
Convert 
( 
object $
value% *
,* +
Type, 0

targetType1 ;
,; <
object= C
	parameterD M
,M N
CultureInfoO Z
culture[ b
)b c
{ 	
if 
( 
value 
is 
int 
count "
)" #
{ 
return 
count 
> 
$num  
?! "

Visibility# -
.- .
Visible. 5
:6 7

Visibility8 B
.B C
	CollapsedC L
;L M
} 
return 

Visibility 
. 
	Collapsed '
;' (
} 	
public 
object 
ConvertBack !
(! "
object" (
value) .
,. /
Type0 4

targetType5 ?
,? @
objectA G
	parameterH Q
,Q R
CultureInfoS ^
culture_ f
)f g
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
} 
} ì
±C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Support\Converters\BooleanToVisibilityConverter.cs
	namespace

 	
GuessMyMessClient


 
.

 
	ViewModel

 %
.

% &
Support

& -
.

- .

Converters

. 8
{ 
public 

class (
BooleanToVisibilityConverter -
:. /
IValueConverter0 ?
{ 
public 
object 
Convert 
( 
object $
value% *
,* +
Type, 0

targetType1 ;
,; <
object= C
	parameterD M
,M N
CultureInfoO Z
culture[ b
)b c
{ 	
bool 
	isVisible 
= 
( 
value #
is$ &
bool' +
b, -
)- .
&&/ 1
b2 3
;3 4
string 
param 
= 
	parameter $
as% '
string( .
;. /
if 
( 
! 
string 
. 
IsNullOrEmpty %
(% &
param& +
)+ ,
&&- /
(0 1
param1 6
.6 7
ToLower7 >
(> ?
)? @
==A C
$strD L
||M O
paramP U
.U V
ToLowerV ]
(] ^
)^ _
==` b
$strc m
)m n
)n o
{ 
	isVisible 
= 
! 
	isVisible &
;& '
} 
return 
	isVisible 
? 

Visibility )
.) *
Visible* 1
:2 3

Visibility4 >
.> ?
	Collapsed? H
;H I
} 	
public 
object 
ConvertBack !
(! "
object" (
value) .
,. /
Type0 4

targetType5 ?
,? @
objectA G
	parameterH Q
,Q R
CultureInfoS ^
culture_ f
)f g
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
} 
}   ‹m
ùC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Session\SocialClientManager.cs
	namespace

 	
GuessMyMessClient


 
.

 
	ViewModel

 %
.

% &
Session

& -
{ 
public 

class 
SocialClientManager $
:% &"
ISocialServiceCallback' =
{ 
private 
const 
string (
SOCIAL_SERVICE_ENDPOINT_NAME 9
=: ;
$str< Z
;Z [
private 
SocialServiceClient #
_client$ +
;+ ,
private 
static 
readonly 
Lazy  $
<$ %
SocialClientManager% 8
>8 9
	_instance: C
=D E
new 
Lazy 
< 
SocialClientManager (
>( )
() *
(* +
)+ ,
=>- /
new0 3
SocialClientManager4 G
(G H
)H I
)I J
;J K
public 
static 
SocialClientManager )
Instance* 2
=>3 5
	_instance6 ?
.? @
Value@ E
;E F
public 
SocialServiceClient "
Client# )
=>* ,
_client- 4
;4 5
public 
event 
Action 
< 
string "
>" #
OnFriendRequest$ 3
;3 4
public 
event 
Action 
< 
string "
," #
bool$ (
>( )
OnFriendResponse* :
;: ;
public 
event 
Action 
< 
string "
," #
string$ *
>* +!
OnFriendStatusChanged, A
;A B
public 
event 
Action 
< 
DirectMessageDto ,
>, -
OnMessageReceived. ?
;? @
private 
SocialClientManager #
(# $
)$ %
{& '
}( )
public 
void 

Initialize 
( 
)  
{ 	
if   
(   
_client   
!=   
null   
&&    "
_client  # *
.  * +
State  + 0
==  1 3
CommunicationState  4 F
.  F G
Opened  G M
)  M N
{!! 
Console"" 
."" 
	WriteLine"" !
(""! "
$str""" H
)""H I
;""I J
return## 
;## 
}$$ 
try&& 
{'' 
_client(( 
=(( 
new(( 
SocialServiceClient(( 1
(((1 2
new((2 5
InstanceContext((6 E
(((E F
this((F J
)((J K
,((K L(
SOCIAL_SERVICE_ENDPOINT_NAME((M i
)((i j
;((j k
_client)) 
.)) 
Open)) 
()) 
))) 
;)) 
if++ 
(++ 
_client++ 
.++ 
State++ !
==++" $
CommunicationState++% 7
.++7 8
Opened++8 >
)++> ?
{,, 
_client-- 
.-- 
Connect-- #
(--# $
SessionManager--$ 2
.--2 3
Instance--3 ;
.--; <
CurrentUsername--< K
)--K L
;--L M
Console.. 
... 
	WriteLine.. %
(..% &
$"..& (
$str..( Z
{..Z [
SessionManager..[ i
...i j
Instance..j r
...r s
CurrentUsername	..s Ç
}
..Ç É
$str
..É Ñ
"
..Ñ Ö
)
..Ö Ü
;
..Ü á
}// 
else00 
{11 
Console22 
.22 
	WriteLine22 %
(22% &
$"22& (
$str22( ]
{22] ^
_client22^ e
.22e f
State22f k
}22k l
"22l m
)22m n
;22n o
throw33 
new33 %
InvalidOperationException33 7
(337 8
$"338 :
$str33: a
{33a b
_client33b i
.33i j
State33j o
}33o p
"33p q
)33q r
;33r s
}44 
}66 
catch77 
(77 %
InvalidOperationException77 ,
ioEx77- 1
)771 2
{88 

MessageBox99 
.99 
Show99 
(99  
$"99  "
$str99" Y
{99Y Z(
SOCIAL_SERVICE_ENDPOINT_NAME99Z v
}99v w
$str	99w π
{
99π ∫
ioEx
99∫ æ
.
99æ ø
Message
99ø ∆
}
99∆ «
"
99« »
,
99» …
$str
99  Ê
,
99Ê Á
MessageBoxButton
99Ë ¯
.
99¯ ˘
OK
99˘ ˚
,
99˚ ¸
MessageBoxImage
99˝ å
.
99å ç
Error
99ç í
)
99í ì
;
99ì î
CloseClientSafely:: !
(::! "
)::" #
;::# $
};; 
catch<< 
(<< 
	Exception<< 
ex<< 
)<<  
{== 

MessageBox>> 
.>> 
Show>> 
(>>  
$">>  "
$str>>" L
{>>L M
ex>>M O
.>>O P
Message>>P W
}>>W X
">>X Y
,>>Y Z
$str>>[ n
,>>n o
MessageBoxButton	>>p Ä
.
>>Ä Å
OK
>>Å É
,
>>É Ñ
MessageBoxImage
>>Ö î
.
>>î ï
Error
>>ï ö
)
>>ö õ
;
>>õ ú
CloseClientSafely?? !
(??! "
)??" #
;??# $
}@@ 
}AA 	
publicCC 
voidCC 
CleanupCC 
(CC 
)CC 
{DD 	
ConsoleEE 
.EE 
	WriteLineEE 
(EE 
$strEE K
)EEK L
;EEL M
ifFF 
(FF 
_clientFF 
!=FF 
nullFF 
&&FF  "
_clientFF# *
.FF* +
StateFF+ 0
==FF1 3
CommunicationStateFF4 F
.FFF G
OpenedFFG M
)FFM N
{GG 
tryHH 
{II 
ConsoleJJ 
.JJ 
	WriteLineJJ %
(JJ% &
$"JJ& (
$strJJ( A
{JJA B
SessionManagerJJB P
.JJP Q
InstanceJJQ Y
.JJY Z
CurrentUsernameJJZ i
}JJi j
$strJJj m
"JJm n
)JJn o
;JJo p
ifKK 
(KK 
!KK 
stringKK 
.KK  
IsNullOrEmptyKK  -
(KK- .
SessionManagerKK. <
.KK< =
InstanceKK= E
.KKE F
CurrentUsernameKKF U
)KKU V
)KKV W
{LL 
_clientMM 
.MM  

DisconnectMM  *
(MM* +
SessionManagerMM+ 9
.MM9 :
InstanceMM: B
.MMB C
CurrentUsernameMMC R
)MMR S
;MMS T
ConsoleNN 
.NN  
	WriteLineNN  )
(NN) *
$strNN* \
)NN\ ]
;NN] ^
}OO 
elsePP 
{PP 
ConsolePP "
.PP" #
	WriteLinePP# ,
(PP, -
$strPP- _
)PP_ `
;PP` a
}PPb c
}QQ 
catchRR 
(RR "
CommunicationExceptionRR -
commExRR. 4
)RR4 5
{SS 
ConsoleTT 
.TT 
	WriteLineTT %
(TT% &
$"TT& (
$strTT( z
{TTz {
commEx	TT{ Å
.
TTÅ Ç
Message
TTÇ â
}
TTâ ä
"
TTä ã
)
TTã å
;
TTå ç
}UU 
catchVV 
(VV 
	ExceptionVV  
exVV! #
)VV# $
{WW 
ConsoleXX 
.XX 
	WriteLineXX %
(XX% &
$"XX& (
$strXX( M
{XXM N
exXXN P
.XXP Q
MessageXXQ X
}XXX Y
"XXY Z
)XXZ [
;XX[ \
}YY 
}ZZ 
else[[ 
{\\ 
Console]] 
.]] 
	WriteLine]] !
(]]! "
$"]]" $
$str]]$ ?
{]]? @
_client]]@ G
?]]G H
.]]H I
State]]I N
}]]N O
$str]]O f
"]]f g
)]]g h
;]]h i
}^^ 
CloseClientSafely`` 
(`` 
)`` 
;``  
Consoleaa 
.aa 
	WriteLineaa 
(aa 
$straa J
)aaJ K
;aaK L
}bb 	
privatedd 
voiddd 
CloseClientSafelydd &
(dd& '
)dd' (
{ee 	
ifff 
(ff 
_clientff 
==ff 
nullff 
)ff  
returnff! '
;ff' (
Consolegg 
.gg 
	WriteLinegg 
(gg 
$"gg  
$strgg  E
{ggE F
_clientggF M
.ggM N
StateggN S
}ggS T
"ggT U
)ggU V
;ggV W
tryhh 
{ii 
ifjj 
(jj 
_clientjj 
.jj 
Statejj !
!=jj" $
CommunicationStatejj% 7
.jj7 8
Faultedjj8 ?
&&jj@ B
_clientjjC J
.jjJ K
StatejjK P
!=jjQ S
CommunicationStatejjT f
.jjf g
Closedjjg m
)jjm n
{kk 
_clientll 
.ll 
Closell !
(ll! "
)ll" #
;ll# $
Consolemm 
.mm 
	WriteLinemm %
(mm% &
$strmm& J
)mmJ K
;mmK L
}nn 
elseoo 
{pp 
_clientqq 
.qq 
Abortqq !
(qq! "
)qq" #
;qq# $
Consolerr 
.rr 
	WriteLinerr %
(rr% &
$strrr& W
)rrW X
;rrX Y
}ss 
}tt 
catchuu 
(uu 
	Exceptionuu 
exuu 
)uu  
{vv 
Consoleww 
.ww 
	WriteLineww !
(ww! "
$"ww" $
$strww$ M
{wwM N
exwwN P
.wwP Q
MessagewwQ X
}wwX Y
$strwwY g
"wwg h
)wwh i
;wwi j
_clientxx 
.xx 
Abortxx 
(xx 
)xx 
;xx  
}yy 
finallyzz 
{{{ 
_client|| 
=|| 
null|| 
;|| 
}}} 
}~~ 	
public
ÅÅ 
void
ÅÅ !
NotifyFriendRequest
ÅÅ '
(
ÅÅ' (
string
ÅÅ( .
fromUsername
ÅÅ/ ;
)
ÅÅ; <
{
ÇÇ 	
Console
ÉÉ 
.
ÉÉ 
	WriteLine
ÉÉ 
(
ÉÉ 
$"
ÉÉ  
$str
ÉÉ  J
{
ÉÉJ K
fromUsername
ÉÉK W
}
ÉÉW X
"
ÉÉX Y
)
ÉÉY Z
;
ÉÉZ [
OnFriendRequest
ÑÑ 
?
ÑÑ 
.
ÑÑ 
Invoke
ÑÑ #
(
ÑÑ# $
fromUsername
ÑÑ$ 0
)
ÑÑ0 1
;
ÑÑ1 2
}
ÖÖ 	
public
áá 
void
áá "
NotifyFriendResponse
áá (
(
áá( )
string
áá) /
fromUsername
áá0 <
,
áá< =
bool
áá> B
accepted
ááC K
)
ááK L
{
àà 	
Console
ââ 
.
ââ 
	WriteLine
ââ 
(
ââ 
$"
ââ  
$str
ââ  K
{
ââK L
fromUsername
ââL X
}
ââX Y
$str
ââY e
{
ââe f
accepted
ââf n
}
âân o
"
ââo p
)
ââp q
;
ââq r
OnFriendResponse
ää 
?
ää 
.
ää 
Invoke
ää $
(
ää$ %
fromUsername
ää% 1
,
ää1 2
accepted
ää3 ;
)
ää; <
;
ää< =
}
ãã 	
public
çç 
void
çç '
NotifyFriendStatusChanged
çç -
(
çç- .
string
çç. 4
friendUsername
çç5 C
,
ççC D
string
ççE K
status
ççL R
)
ççR S
{
éé 	
Console
èè 
.
èè 
	WriteLine
èè 
(
èè 
$"
èè  
$str
èè  R
{
èèR S
friendUsername
èèS a
}
èèa b
$str
èèb l
{
èèl m
status
èèm s
}
èès t
"
èèt u
)
èèu v
;
èèv w#
OnFriendStatusChanged
êê !
?
êê! "
.
êê" #
Invoke
êê# )
(
êê) *
friendUsername
êê* 8
,
êê8 9
status
êê: @
)
êê@ A
;
êêA B
}
ëë 	
public
ìì 
void
ìì #
NotifyMessageReceived
ìì )
(
ìì) *
DirectMessageDto
ìì* :
message
ìì; B
)
ììB C
{
îî 	
Console
ïï 
.
ïï 
	WriteLine
ïï 
(
ïï 
$"
ïï  
$str
ïï  L
{
ïïL M
message
ïïM T
?
ïïT U
.
ïïU V
SenderUsername
ïïV d
}
ïïd e
"
ïïe f
)
ïïf g
;
ïïg h
if
ññ 
(
ññ 
message
ññ 
!=
ññ 
null
ññ 
)
ññ  
{
óó 
OnMessageReceived
òò !
?
òò! "
.
òò" #
Invoke
òò# )
(
òò) *
message
òò* 1
)
òò1 2
;
òò2 3
}
ôô 
else
öö 
{
õõ 
Console
úú 
.
úú 
	WriteLine
úú !
(
úú! "
$str
úú" Y
)
úúY Z
;
úúZ [
}
ùù 
}
ûû 	
}
üü 
}†† ª
òC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Session\SessionManager.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Session& -
{ 
public		 

class		 
SessionManager		 
:		  !
ViewModelBase		" /
{

 
private 
static 
SessionManager %
	_instance& /
;/ 0
public 
static 
SessionManager $
Instance% -
=>. 0
	_instance1 :
??; =
(> ?
	_instance? H
=I J
newK N
SessionManagerO ]
(] ^
)^ _
)_ `
;` a
private 
string 
_currentUsername '
;' (
public 
string 
CurrentUsername %
{ 	
get 
=> 
_currentUsername #
;# $
set 
{ 
_currentUsername "
=# $
value% *
;* +
OnPropertyChanged, =
(= >
)> ?
;? @
}A B
} 	
public 
bool 

IsLoggedIn 
=> !
!" #
string# )
.) *
IsNullOrEmpty* 7
(7 8
CurrentUsername8 G
)G H
;H I
private 
SessionManager 
( 
)  
{! "
}# $
public 
void 
StartSession  
(  !
string! '
username( 0
)0 1
{ 	
CurrentUsername 
= 
username &
;& '
} 	
public 
void 
CloseSession  
(  !
)! "
{ 	
CurrentUsername   
=   
null   "
;  " #
}!! 	
}"" 
}## t
¢C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Session\MatchmakingClientManager.cs
	namespace		 	
GuessMyMessClient		
 
.		 
	ViewModel		 %
.		% &
Session		& -
{

 
public 

class $
MatchmakingClientManager )
:* +'
IMatchmakingServiceCallback, G
{ 
public 
static $
MatchmakingClientManager .
Instance/ 7
{8 9
get: =
;= >
private? F
setG J
;J K
}L M
private $
MatchmakingServiceClient (
_client) 0
;0 1
private 
string 
_connectedUsername )
;) *
public 
event 
Action 
< 
string "
," #
string$ *
>* +!
OnMatchInviteReceived, A
;A B
public 
event 
Action 
< 
MatchInfoDto (
>( )
OnMatchUpdated* 8
;8 9
public 
event 
Action 
< 
string "
," #
OperationResultDto$ 6
>6 7%
OnMatchJoinedSuccessfully8 Q
;Q R
public 
event 
Action 
< 
string "
>" #
OnMatchmakingFailed$ 7
;7 8
public 
event 
Action 
< 
List  
<  !
MatchInfoDto! -
>- .
>. /&
OnPublicMatchesListUpdated0 J
;J K
private $
MatchmakingClientManager (
(( )
)) *
{ 	
} 	
public 
static 
void 

Initialize %
(% &
)& '
{ 	
if 
( 
Instance 
== 
null  
)  !
{ 
Instance   
=   
new   $
MatchmakingClientManager   7
(  7 8
)  8 9
;  9 :
}!! 
}"" 	
public$$ 
bool$$ 
Connect$$ 
($$ 
string$$ "
username$$# +
)$$+ ,
{%% 	
try&& 
{'' 

Disconnect(( 
((( 
)(( 
;(( 
InstanceContext** 
context**  '
=**( )
new*** -
InstanceContext**. =
(**= >
this**> B
)**B C
;**C D
_client++ 
=++ 
new++ $
MatchmakingServiceClient++ 6
(++6 7
context++7 >
)++> ?
;++? @
_client,, 
.,, 
Open,, 
(,, 
),, 
;,, 
_client-- 
.-- 
Connect-- 
(--  
username--  (
)--( )
;--) *
_connectedUsername.. "
=..# $
username..% -
;..- .
return// 
true// 
;// 
}00 
catch11 
(11 
	Exception11 
ex11 
)11  
{22 

MessageBox33 
.33 
Show33 
(33  
$"33  "
$str33" L
{33L M
ex33M O
.33O P
Message33P W
}33W X
"33X Y
)33Y Z
;33Z [
_client44 
?44 
.44 
Abort44 
(44 
)44  
;44  !
_client55 
=55 
null55 
;55 
return66 
false66 
;66 
}77 
}88 	
public:: 
void:: 

Disconnect:: 
(:: 
)::  
{;; 	
if<< 
(<< 
_client<< 
!=<< 
null<< 
)<<  
{== 
if>> 
(>> 
_client>> 
.>> 
State>> !
==>>" $
CommunicationState>>% 7
.>>7 8
Opened>>8 >
&&>>? A
!>>B C
string>>C I
.>>I J
IsNullOrEmpty>>J W
(>>W X
_connectedUsername>>X j
)>>j k
)>>k l
{?? 
try@@ 
{AA 
_clientBB 
.BB  

DisconnectBB  *
(BB* +
_connectedUsernameBB+ =
)BB= >
;BB> ?
}CC 
catchDD 
(DD 
	ExceptionDD $
exDD% '
)DD' (
{EE 
ConsoleFF 
.FF  
	WriteLineFF  )
(FF) *
$"FF* ,
$strFF, M
{FFM N
exFFN P
.FFP Q
MessageFFQ X
}FFX Y
"FFY Z
)FFZ [
;FF[ \
}GG 
}HH 
ifJJ 
(JJ 
_clientJJ 
.JJ 
StateJJ !
!=JJ" $
CommunicationStateJJ% 7
.JJ7 8
ClosedJJ8 >
)JJ> ?
{KK 
tryLL 
{MM 
_clientNN 
.NN  
CloseNN  %
(NN% &
)NN& '
;NN' (
}OO 
catchPP 
(PP 
	ExceptionPP $
exPP% '
)PP' (
{QQ 
ConsoleRR 
.RR  
	WriteLineRR  )
(RR) *
$"RR* ,
$strRR, L
{RRL M
exRRM O
.RRO P
MessageRRP W
}RRW X
"RRX Y
)RRY Z
;RRZ [
_clientSS 
.SS  
AbortSS  %
(SS% &
)SS& '
;SS' (
}TT 
}UU 
}VV 
_clientXX 
=XX 
nullXX 
;XX 
_connectedUsernameYY 
=YY  
nullYY! %
;YY% &
}ZZ 	
public\\ 
async\\ 
Task\\ 
<\\ 
OperationResultDto\\ ,
>\\, -
CreateMatchAsync\\. >
(\\> ?
LobbySettingsDto\\? O
settings\\P X
)\\X Y
{]] 	
if^^ 
(^^ 
_client^^ 
==^^ 
null^^ 
||^^  "
_client^^# *
.^^* +
State^^+ 0
!=^^1 3
CommunicationState^^4 F
.^^F G
Opened^^G M
)^^M N
return__ 
new__ 
OperationResultDto__ -
{__. /
Success__0 7
=__8 9
false__: ?
,__? @
Message__A H
=__I J
$str__K f
}__g h
;__h i
tryaa 
{bb 
returncc 
awaitcc 
_clientcc $
.cc$ %
CreateMatchAsynccc% 5
(cc5 6
_connectedUsernamecc6 H
,ccH I
settingsccJ R
)ccR S
;ccS T
}dd 
catchee 
(ee 
	Exceptionee 
exee 
)ee  
{ff 
returngg 
newgg 
OperationResultDtogg -
{gg. /
Successgg0 7
=gg8 9
falsegg: ?
,gg? @
MessageggA H
=ggI J
$"ggK M
$strggM c
{ggc d
exggd f
.ggf g
Messageggg n
}ggn o
"ggo p
}ggq r
;ggr s
}hh 
}ii 	
publickk 
asynckk 
Taskkk 
<kk 
Listkk 
<kk 
MatchInfoDtokk +
>kk+ ,
>kk, -!
GetPublicMatchesAsynckk. C
(kkC D
)kkD E
{ll 	
ifmm 
(mm 
_clientmm 
==mm 
nullmm 
||mm  "
_clientmm# *
.mm* +
Statemm+ 0
!=mm1 3
CommunicationStatemm4 F
.mmF G
OpenedmmG M
)mmM N
returnnn 
newnn 
Listnn 
<nn  
MatchInfoDtonn  ,
>nn, -
(nn- .
)nn. /
;nn/ 0
trypp 
{qq 
varrr 
matchesArrayrr  
=rr! "
awaitrr# (
_clientrr) 0
.rr0 1!
GetPublicMatchesAsyncrr1 F
(rrF G
)rrG H
;rrH I
returnss 
matchesArrayss #
?ss# $
.ss$ %
ToListss% +
(ss+ ,
)ss, -
??ss. 0
newss1 4
Listss5 9
<ss9 :
MatchInfoDtoss: F
>ssF G
(ssG H
)ssH I
;ssI J
}tt 
catchuu 
(uu 
	Exceptionuu 
exuu 
)uu  
{vv 

MessageBoxww 
.ww 
Showww 
(ww  
$"ww  "
$strww" @
{ww@ A
exwwA C
.wwC D
MessagewwD K
}wwK L
"wwL M
)wwM N
;wwN O
returnxx 
newxx 
Listxx 
<xx  
MatchInfoDtoxx  ,
>xx, -
(xx- .
)xx. /
;xx/ 0
}yy 
}zz 	
public|| 
async|| 
Task|| 
JoinPublicMatch|| )
(||) *
string||* 0
matchId||1 8
)||8 9
{}} 	
if~~ 
(~~ 
_client~~ 
==~~ 
null~~ 
||~~  "
_client~~# *
.~~* +
State~~+ 0
!=~~1 3
CommunicationState~~4 F
.~~F G
Opened~~G M
)~~M N
{ !
OnMatchmakingFailed
ÄÄ #
?
ÄÄ# $
.
ÄÄ$ %
Invoke
ÄÄ% +
(
ÄÄ+ ,
$str
ÄÄ, G
)
ÄÄG H
;
ÄÄH I
return
ÅÅ 
;
ÅÅ 
}
ÇÇ 
try
ÑÑ 
{
ÖÖ 
await
ÜÜ 
_client
ÜÜ 
.
ÜÜ "
JoinPublicMatchAsync
ÜÜ 2
(
ÜÜ2 3 
_connectedUsername
ÜÜ3 E
,
ÜÜE F
matchId
ÜÜG N
)
ÜÜN O
;
ÜÜO P
}
áá 
catch
àà 
(
àà 
	Exception
àà 
ex
àà 
)
àà  
{
ââ !
OnMatchmakingFailed
ää #
?
ää# $
.
ää$ %
Invoke
ää% +
(
ää+ ,
$"
ää, .
$str
ää. J
{
ääJ K
ex
ääK M
.
ääM N
Message
ääN U
}
ääU V
"
ääV W
)
ääW X
;
ääX Y
}
ãã 
}
åå 	
public
éé 
async
éé 
Task
éé 
<
éé  
OperationResultDto
éé ,
>
éé, -#
JoinPrivateMatchAsync
éé. C
(
ééC D
string
ééD J
	matchCode
ééK T
)
ééT U
{
èè 	
if
êê 
(
êê 
_client
êê 
==
êê 
null
êê 
||
êê  "
_client
êê# *
.
êê* +
State
êê+ 0
!=
êê1 3 
CommunicationState
êê4 F
.
êêF G
Opened
êêG M
)
êêM N
return
ëë 
new
ëë  
OperationResultDto
ëë -
{
ëë. /
Success
ëë0 7
=
ëë8 9
false
ëë: ?
,
ëë? @
Message
ëëA H
=
ëëI J
$str
ëëK f
}
ëëg h
;
ëëh i
try
ìì 
{
îî 
return
ïï 
await
ïï 
_client
ïï $
.
ïï$ %#
JoinPrivateMatchAsync
ïï% :
(
ïï: ; 
_connectedUsername
ïï; M
,
ïïM N
	matchCode
ïïO X
)
ïïX Y
;
ïïY Z
}
ññ 
catch
óó 
(
óó 
	Exception
óó 
ex
óó 
)
óó  
{
òò 
return
ôô 
new
ôô  
OperationResultDto
ôô -
{
öö 
Success
öö 
=
öö 
false
öö  %
,
öö% &
Message
öö' .
=
öö/ 0
$"
öö1 3
$str
öö3 P
{
ööP Q
ex
ööQ S
.
ööS T
Message
ööT [
}
öö[ \
"
öö\ ]
}
öö^ _
;
öö_ `
}
õõ 
}
úú 	
public
ûû 
void
ûû  
ReceiveMatchInvite
ûû &
(
ûû& '
string
ûû' -
fromUsername
ûû. :
,
ûû: ;
string
ûû< B
matchId
ûûC J
)
ûûJ K
{
üü 	#
OnMatchInviteReceived
†† !
?
††! "
.
††" #
Invoke
††# )
(
††) *
fromUsername
††* 6
,
††6 7
matchId
††8 ?
)
††? @
;
††@ A
}
°° 	
public
££ 
void
££ 
MatchUpdate
££ 
(
££  
MatchInfoDto
££  ,
	matchInfo
££- 6
)
££6 7
{
§§ 	
OnMatchUpdated
•• 
?
•• 
.
•• 
Invoke
•• "
(
••" #
	matchInfo
••# ,
)
••, -
;
••- .
}
¶¶ 	
public
®® 
void
®® 
MatchJoined
®® 
(
®®  
string
®®  &
matchId
®®' .
,
®®. / 
OperationResultDto
®®0 B
result
®®C I
)
®®I J
{
©© 	'
OnMatchJoinedSuccessfully
™™ %
?
™™% &
.
™™& '
Invoke
™™' -
(
™™- .
matchId
™™. 5
,
™™5 6
result
™™7 =
)
™™= >
;
™™> ?
}
´´ 	
public
≠≠ 
void
≠≠ 
MatchmakingFailed
≠≠ %
(
≠≠% &
string
≠≠& ,
reason
≠≠- 3
)
≠≠3 4
{
ÆÆ 	!
OnMatchmakingFailed
ØØ 
?
ØØ  
.
ØØ  !
Invoke
ØØ! '
(
ØØ' (
reason
ØØ( .
)
ØØ. /
;
ØØ/ 0
}
∞∞ 	
public
≤≤ 
void
≤≤ &
PublicMatchesListUpdated
≤≤ ,
(
≤≤, -
MatchInfoDto
≤≤- 9
[
≤≤9 :
]
≤≤: ;
publicMatches
≤≤< I
)
≤≤I J
{
≥≥ 	
var
¥¥ 
matchesList
¥¥ 
=
¥¥ 
publicMatches
¥¥ +
?
¥¥+ ,
.
¥¥, -
ToList
¥¥- 3
(
¥¥3 4
)
¥¥4 5
??
¥¥6 8
new
¥¥9 <
List
¥¥= A
<
¥¥A B
MatchInfoDto
¥¥B N
>
¥¥N O
(
¥¥O P
)
¥¥P Q
;
¥¥Q R
Application
∂∂ 
.
∂∂ 
Current
∂∂ 
?
∂∂  
.
∂∂  !

Dispatcher
∂∂! +
?
∂∂+ ,
.
∂∂, -
Invoke
∂∂- 3
(
∂∂3 4
(
∂∂4 5
)
∂∂5 6
=>
∂∂7 9
{
∂∂: ;(
OnPublicMatchesListUpdated
∂∂< V
?
∂∂V W
.
∂∂W X
Invoke
∂∂X ^
(
∂∂^ _
matchesList
∂∂_ j
)
∂∂j k
;
∂∂k l
}
∂∂m n
)
∂∂n o
;
∂∂o p
}
∑∑ 	
}
∏∏ 
}ππ âÆ
úC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Session\LobbyClientManager.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Session& -
{ 
public 

class 
LobbyClientManager #
:$ %!
ILobbyServiceCallback& ;
{		 
private

 
static

 
readonly

 
Lazy

  $
<

$ %
LobbyClientManager

% 7
>

7 8
_lazyInstance

9 F
=

G H
new 
Lazy 
< 
LobbyClientManager '
>' (
(( )
() *
)* +
=>, .
new/ 2
LobbyClientManager3 E
(E F
)F G
)G H
;H I
public 
static 
LobbyClientManager (
Instance) 1
=>2 4
_lazyInstance5 B
.B C
ValueC H
;H I
private 
LobbyClientManager "
(" #
)# $
{% &
}' (
private 
LobbyServiceClient "
_client# *
;* +
private 
string 
_currentMatchId &
;& '
private 
string 
_currentUsername '
;' (
public 
event 
Action 
< 
LobbyStateDto )
>) *
LobbyStateUpdated+ <
;< =
public 
event 
Action 
< 
ChatMessageDto *
>* + 
LobbyMessageReceived, @
;@ A
public 
event 
Action 
< 
string "
>" #
Kicked$ *
;* +
public 
event 
Action 
< 
int 
>  
CountdownTick! .
;. /
public 
event 
Action 
GameStarted '
;' (
public 
event 
Action 
ConnectionLost *
;* +
public 
bool 
IsConnected 
=>  "
_client# *
!=+ -
null. 2
&&3 5
_client6 =
.= >
State> C
==D F
CommunicationStateG Y
.Y Z
OpenedZ `
;` a
public 
void 
Connect 
( 
string "
username# +
,+ ,
string- 3
matchId4 ;
); <
{ 	
try   
{!! 
if"" 
("" 
IsConnected"" 
)""  

Disconnect""! +
(""+ ,
)"", -
;""- .
_currentUsername##  
=##! "
username### +
;##+ ,
_currentMatchId$$ 
=$$  !
matchId$$" )
;$$) *
var%% 
instanceContext%% #
=%%$ %
new%%& )
InstanceContext%%* 9
(%%9 :
this%%: >
)%%> ?
;%%? @
_client&& 
=&& 
new&& 
LobbyServiceClient&& 0
(&&0 1
instanceContext&&1 @
)&&@ A
;&&A B
_client'' 
.'' 
Open'' 
('' 
)'' 
;'' 
_client(( 
.(( 
InnerChannel(( $
.(($ %
Faulted((% ,
+=((- /
Channel_Faulted((0 ?
;((? @
_client)) 
.)) 
InnerChannel)) $
.))$ %
Closed))% +
+=)), .
Channel_Closed))/ =
;))= >
_client** 
.** 
ConnectToLobby** &
(**& '
username**' /
,**/ 0
matchId**1 8
)**8 9
;**9 :
Console++ 
.++ 
	WriteLine++ !
(++! "
$"++" $
$str++$ C
{++C D
matchId++D K
}++K L
$str++L P
{++P Q
username++Q Y
}++Y Z
"++Z [
)++[ \
;++\ ]
},, 
catch-- 
(-- 
	Exception-- 
ex-- 
)--  
{.. 
Console// 
.// 
	WriteLine// !
(//! "
$"//" $
$str//$ G
{//G H
ex//H J
.//J K
Message//K R
}//R S
"//S T
)//T U
;//U V

MessageBox00 
.00 
Show00 
(00  
$"00  "
$str00" =
{00= >
ex00> @
.00@ A
Message00A H
}00H I
"00I J
,00J K
$str00L ^
,00^ _
MessageBoxButton00` p
.00p q
OK00q s
,00s t
MessageBoxImage	00u Ñ
.
00Ñ Ö
Error
00Ö ä
)
00ä ã
;
00ã å
CleanupConnection11 !
(11! "
)11" #
;11# $
ConnectionLost22 
?22 
.22  
Invoke22  &
(22& '
)22' (
;22( )
}33 
}44 	
public66 
void66 

Disconnect66 
(66 
)66  
{77 	
if88 
(88 
!88 
IsConnected88 
)88 
return88 $
;88$ %
try99 
{:: 
_client;; 
.;; 

LeaveLobby;; "
(;;" #
_currentUsername;;# 3
,;;3 4
_currentMatchId;;5 D
);;D E
;;;E F
Console<< 
.<< 
	WriteLine<< !
(<<! "
$"<<" $
$str<<$ @
{<<@ A
_currentUsername<<A Q
}<<Q R
$str<<R X
{<<X Y
_currentMatchId<<Y h
}<<h i
"<<i j
)<<j k
;<<k l
}== 
catch>> 
(>> 
	Exception>> 
ex>> 
)>>  
when>>! %
(>>& '
ex>>' )
is>>* ,"
CommunicationException>>- C
||>>D F
ex>>G I
is>>J L
TimeoutException>>M ]
)>>] ^
{?? 
Console@@ 
.@@ 
	WriteLine@@ !
(@@! "
$"@@" $
$str@@$ J
{@@J K
ex@@K M
.@@M N
Message@@N U
}@@U V
$str@@V k
"@@k l
)@@l m
;@@m n
}AA 
catchBB 
(BB 
	ExceptionBB 
exBB 
)BB  
{CC 
ConsoleDD 
.DD 
	WriteLineDD !
(DD! "
$"DD" $
$strDD$ H
{DDH I
exDDI K
.DDK L
MessageDDL S
}DDS T
"DDT U
)DDU V
;DDV W
}EE 
finallyFF 
{GG 
CleanupConnectionHH !
(HH! "
)HH" #
;HH# $
}II 
}JJ 	
privateLL 
voidLL 
CleanupConnectionLL &
(LL& '
)LL' (
{MM 	
ifNN 
(NN 
_clientNN 
!=NN 
nullNN 
)NN  
{OO 
tryPP 
{QQ 
_clientRR 
.RR 
InnerChannelRR (
.RR( )
FaultedRR) 0
-=RR1 3
Channel_FaultedRR4 C
;RRC D
_clientSS 
.SS 
InnerChannelSS (
.SS( )
ClosedSS) /
-=SS0 2
Channel_ClosedSS3 A
;SSA B
}TT 
catchUU 
(UU 
	ExceptionUU  
exUU! #
)UU# $
{VV 
ConsoleWW 
.WW 
	WriteLineWW %
(WW% &
$"WW& (
$strWW( Q
{WWQ R
exWWR T
.WWT U
MessageWWU \
}WW\ ]
"WW] ^
)WW^ _
;WW_ `
}XX 
tryYY 
{ZZ 
if[[ 
([[ 
_client[[ 
.[[  
State[[  %
!=[[& (
CommunicationState[[) ;
.[[; <
Faulted[[< C
)[[C D
{\\ 
_client]] 
.]]  
Close]]  %
(]]% &
)]]& '
;]]' (
}^^ 
else__ 
{`` 
_clientaa 
.aa  
Abortaa  %
(aa% &
)aa& '
;aa' (
}bb 
}cc 
catchdd 
(dd 
	Exceptiondd  
exdd! #
)dd# $
{ee 
Consoleff 
.ff 
	WriteLineff %
(ff% &
$"ff& (
$strff( L
{ffL M
exffM O
.ffO P
MessageffP W
}ffW X
"ffX Y
)ffY Z
;ffZ [
_clientgg 
.gg 
Abortgg !
(gg! "
)gg" #
;gg# $
}hh 
finallyii 
{jj 
_clientkk 
=kk 
nullkk "
;kk" #
_currentMatchIdll #
=ll$ %
nullll& *
;ll* +
_currentUsernamemm $
=mm% &
nullmm' +
;mm+ ,
}nn 
}oo 
Consolepp 
.pp 
	WriteLinepp 
(pp 
$strpp :
)pp: ;
;pp; <
}qq 	
publicss 
voidss 
SendChatMessagess #
(ss# $
stringss$ *

messageKeyss+ 5
)ss5 6
{tt 	
ifuu 
(uu 
!uu 
IsConnecteduu 
||uu 
stringuu  &
.uu& '
IsNullOrEmptyuu' 4
(uu4 5
_currentUsernameuu5 E
)uuE F
||uuG I
stringuuJ P
.uuP Q
IsNullOrEmptyuuQ ^
(uu^ _
_currentMatchIduu_ n
)uun o
)uuo p
returnuuq w
;uuw x
tryvv 
{ww 
_clientxx 
.xx 
SendLobbyMessagexx (
(xx( )
_currentUsernamexx) 9
,xx9 :
_currentMatchIdxx; J
,xxJ K

messageKeyxxL V
)xxV W
;xxW X
}yy 
catchzz 
(zz 
	Exceptionzz 
exzz 
)zz  
{{{ 
Console|| 
.|| 
	WriteLine|| !
(||! "
$"||" $
$str||$ @
{||@ A
ex||A C
.||C D
Message||D K
}||K L
"||L M
)||M N
;||N O$
HandleCommunicationError}} (
(}}( )
)}}) *
;}}* +
}~~ 
} 	
public
ÅÅ 
void
ÅÅ 
RequestStartGame
ÅÅ $
(
ÅÅ$ %
)
ÅÅ% &
{
ÇÇ 	
if
ÉÉ 
(
ÉÉ 
!
ÉÉ 
IsConnected
ÉÉ 
||
ÉÉ 
string
ÉÉ  &
.
ÉÉ& '
IsNullOrEmpty
ÉÉ' 4
(
ÉÉ4 5
_currentUsername
ÉÉ5 E
)
ÉÉE F
||
ÉÉG I
string
ÉÉJ P
.
ÉÉP Q
IsNullOrEmpty
ÉÉQ ^
(
ÉÉ^ _
_currentMatchId
ÉÉ_ n
)
ÉÉn o
)
ÉÉo p
return
ÉÉq w
;
ÉÉw x
try
ÑÑ 
{
ÖÖ 
_client
ÜÜ 
.
ÜÜ 
	StartGame
ÜÜ !
(
ÜÜ! "
_currentUsername
ÜÜ" 2
,
ÜÜ2 3
_currentMatchId
ÜÜ4 C
)
ÜÜC D
;
ÜÜD E
}
áá 
catch
àà 
(
àà 
	Exception
àà 
ex
àà 
)
àà  
{
ââ 
Console
ää 
.
ää 
	WriteLine
ää !
(
ää! "
$"
ää" $
$str
ää$ A
{
ääA B
ex
ääB D
.
ääD E
Message
ääE L
}
ääL M
"
ääM N
)
ääN O
;
ääO P&
HandleCommunicationError
ãã (
(
ãã( )
)
ãã) *
;
ãã* +
}
åå 
}
çç 	
public
èè 
void
èè 
RequestKickPlayer
èè %
(
èè% &
string
èè& ,
playerToKick
èè- 9
)
èè9 :
{
êê 	
if
ëë 
(
ëë 
!
ëë 
IsConnected
ëë 
||
ëë 
string
ëë  &
.
ëë& '
IsNullOrEmpty
ëë' 4
(
ëë4 5
_currentUsername
ëë5 E
)
ëëE F
||
ëëG I
string
ëëJ P
.
ëëP Q
IsNullOrEmpty
ëëQ ^
(
ëë^ _
_currentMatchId
ëë_ n
)
ëën o
||
ëëp r
string
ëës y
.
ëëy z
IsNullOrEmptyëëz á
(ëëá à
playerToKickëëà î
)ëëî ï
)ëëï ñ
returnëëó ù
;ëëù û
try
íí 
{
ìì 
_client
îî 
.
îî 

KickPlayer
îî "
(
îî" #
_currentUsername
îî# 3
,
îî3 4
playerToKick
îî5 A
,
îîA B
_currentMatchId
îîC R
)
îîR S
;
îîS T
}
ïï 
catch
ññ 
(
ññ 
	Exception
ññ 
ex
ññ 
)
ññ  
{
óó 
Console
òò 
.
òò 
	WriteLine
òò !
(
òò! "
$"
òò" $
$str
òò$ 9
{
òò9 :
playerToKick
òò: F
}
òòF G
$str
òòG I
{
òòI J
ex
òòJ L
.
òòL M
Message
òòM T
}
òòT U
"
òòU V
)
òòV W
;
òòW X&
HandleCommunicationError
ôô (
(
ôô( )
)
ôô) *
;
ôô* +
}
öö 
}
õõ 	
public
ùù 
void
ùù 
UpdateLobbyState
ùù $
(
ùù$ %
LobbyStateDto
ùù% 2
lobbyStateDto
ùù3 @
)
ùù@ A
{
ûû 	
Application
üü 
.
üü 
Current
üü 
?
üü  
.
üü  !

Dispatcher
üü! +
.
üü+ ,
Invoke
üü, 2
(
üü2 3
(
üü3 4
)
üü4 5
=>
üü6 8
{
†† 
Console
°° 
.
°° 
	WriteLine
°° !
(
°°! "
$"
°°" $
$str
°°$ A
{
°°A B
lobbyStateDto
°°B O
.
°°O P
CurrentPlayers
°°P ^
}
°°^ _
$str
°°_ `
{
°°` a
lobbyStateDto
°°a n
.
°°n o

MaxPlayers
°°o y
}
°°y z
$str°°z É
"°°É Ñ
)°°Ñ Ö
;°°Ö Ü
LobbyStateUpdated
¢¢ !
?
¢¢! "
.
¢¢" #
Invoke
¢¢# )
(
¢¢) *
lobbyStateDto
¢¢* 7
)
¢¢7 8
;
¢¢8 9
}
££ 
)
££ 
;
££ 
}
§§ 	
public
¶¶ 
void
¶¶ !
ReceiveLobbyMessage
¶¶ '
(
¶¶' (
ChatMessageDto
¶¶( 6

messageDto
¶¶7 A
)
¶¶A B
{
ßß 	
Application
®® 
.
®® 
Current
®® 
?
®®  
.
®®  !

Dispatcher
®®! +
.
®®+ ,
Invoke
®®, 2
(
®®2 3
(
®®3 4
)
®®4 5
=>
®®6 8
{
©© 
Console
™™ 
.
™™ 
	WriteLine
™™ !
(
™™! "
$"
™™" $
$str
™™$ 4
{
™™4 5

messageDto
™™5 ?
.
™™? @
SenderUsername
™™@ N
}
™™N O
$str
™™O R
{
™™R S

messageDto
™™S ]
.
™™] ^
MessageContent
™™^ l
}
™™l m
"
™™m n
)
™™n o
;
™™o p"
LobbyMessageReceived
´´ $
?
´´$ %
.
´´% &
Invoke
´´& ,
(
´´, -

messageDto
´´- 7
)
´´7 8
;
´´8 9
}
¨¨ 
)
¨¨ 
;
¨¨ 
}
≠≠ 	
public
ØØ 
void
ØØ 
KickedFromLobby
ØØ #
(
ØØ# $
string
ØØ$ *
reason
ØØ+ 1
)
ØØ1 2
{
∞∞ 	
Application
±± 
.
±± 
Current
±± 
?
±±  
.
±±  !

Dispatcher
±±! +
.
±±+ ,
Invoke
±±, 2
(
±±2 3
(
±±3 4
)
±±4 5
=>
±±6 8
{
≤≤ 
Console
≥≥ 
.
≥≥ 
	WriteLine
≥≥ !
(
≥≥! "
$"
≥≥" $
$str
≥≥$ 7
{
≥≥7 8
reason
≥≥8 >
}
≥≥> ?
"
≥≥? @
)
≥≥@ A
;
≥≥A B
Kicked
¥¥ 
?
¥¥ 
.
¥¥ 
Invoke
¥¥ 
(
¥¥ 
reason
¥¥ %
)
¥¥% &
;
¥¥& '
CleanupConnection
µµ !
(
µµ! "
)
µµ" #
;
µµ# $
}
∂∂ 
)
∂∂ 
;
∂∂ 
}
∑∑ 	
public
ππ 
void
ππ 
OnGameStarting
ππ "
(
ππ" #
int
ππ# &
countdownSeconds
ππ' 7
)
ππ7 8
{
∫∫ 	
Application
ªª 
.
ªª 
Current
ªª 
?
ªª  
.
ªª  !

Dispatcher
ªª! +
.
ªª+ ,
Invoke
ªª, 2
(
ªª2 3
(
ªª3 4
)
ªª4 5
=>
ªª6 8
{
ºº 
Console
ΩΩ 
.
ΩΩ 
	WriteLine
ΩΩ !
(
ΩΩ! "
$"
ΩΩ" $
$str
ΩΩ$ 5
{
ΩΩ5 6
countdownSeconds
ΩΩ6 F
}
ΩΩF G
$str
ΩΩG J
"
ΩΩJ K
)
ΩΩK L
;
ΩΩL M
CountdownTick
ææ 
?
ææ 
.
ææ 
Invoke
ææ %
(
ææ% &
countdownSeconds
ææ& 6
)
ææ6 7
;
ææ7 8
}
øø 
)
øø 
;
øø 
}
¿¿ 	
public
¬¬ 
void
¬¬ 
OnGameStarted
¬¬ !
(
¬¬! "
)
¬¬" #
{
√√ 	
Application
ƒƒ 
.
ƒƒ 
Current
ƒƒ 
?
ƒƒ  
.
ƒƒ  !

Dispatcher
ƒƒ! +
.
ƒƒ+ ,
Invoke
ƒƒ, 2
(
ƒƒ2 3
(
ƒƒ3 4
)
ƒƒ4 5
=>
ƒƒ6 8
{
≈≈ 
Console
∆∆ 
.
∆∆ 
	WriteLine
∆∆ !
(
∆∆! "
$str
∆∆" 1
)
∆∆1 2
;
∆∆2 3
GameStarted
«« 
?
«« 
.
«« 
Invoke
«« #
(
««# $
)
««$ %
;
««% &
}
»» 
)
»» 
;
»» 
}
…… 	
public
ÀÀ 
void
ÀÀ 
UpdateKickVote
ÀÀ "
(
ÀÀ" #
string
ÀÀ# )
targetUsername
ÀÀ* 8
,
ÀÀ8 9
int
ÀÀ: =
currentVotes
ÀÀ> J
,
ÀÀJ K
int
ÀÀL O
votesNeeded
ÀÀP [
)
ÀÀ[ \
{
ÃÃ 	
Application
ÕÕ 
.
ÕÕ 
Current
ÕÕ 
?
ÕÕ  
.
ÕÕ  !

Dispatcher
ÕÕ! +
.
ÕÕ+ ,
Invoke
ÕÕ, 2
(
ÕÕ2 3
(
ÕÕ3 4
)
ÕÕ4 5
=>
ÕÕ6 8
{
ŒŒ 
Console
œœ 
.
œœ 
	WriteLine
œœ !
(
œœ! "
$"
œœ" $
$str
œœ$ 9
{
œœ9 :
targetUsername
œœ: H
}
œœH I
$str
œœI K
{
œœK L
currentVotes
œœL X
}
œœX Y
$str
œœY Z
{
œœZ [
votesNeeded
œœ[ f
}
œœf g
"
œœg h
)
œœh i
;
œœi j
}
–– 
)
–– 
;
–– 
}
—— 	
private
”” 
void
”” 
Channel_Faulted
”” $
(
””$ %
object
””% +
sender
””, 2
,
””2 3
	EventArgs
””4 =
e
””> ?
)
””? @
{
‘‘ 	
Console
’’ 
.
’’ 
	WriteLine
’’ 
(
’’ 
$str
’’ 8
)
’’8 9
;
’’9 :&
HandleCommunicationError
÷÷ $
(
÷÷$ %
true
÷÷% )
)
÷÷) *
;
÷÷* +
}
◊◊ 	
private
ŸŸ 
void
ŸŸ 
Channel_Closed
ŸŸ #
(
ŸŸ# $
object
ŸŸ$ *
sender
ŸŸ+ 1
,
ŸŸ1 2
	EventArgs
ŸŸ3 <
e
ŸŸ= >
)
ŸŸ> ?
{
⁄⁄ 	
Console
€€ 
.
€€ 
	WriteLine
€€ 
(
€€ 
$str
€€ 7
)
€€7 8
;
€€8 9
if
‹‹ 
(
‹‹ 
_client
‹‹ 
!=
‹‹ 
null
‹‹ 
)
‹‹  
{
›› &
HandleCommunicationError
ﬁﬁ (
(
ﬁﬁ( )
true
ﬁﬁ) -
)
ﬁﬁ- .
;
ﬁﬁ. /
}
ﬂﬂ 
}
‡‡ 	
private
‚‚ 
void
‚‚ &
HandleCommunicationError
‚‚ -
(
‚‚- .
bool
‚‚. 2

unexpected
‚‚3 =
=
‚‚> ?
false
‚‚@ E
)
‚‚E F
{
„„ 	
Application
‰‰ 
.
‰‰ 
Current
‰‰ 
?
‰‰  
.
‰‰  !

Dispatcher
‰‰! +
.
‰‰+ ,
Invoke
‰‰, 2
(
‰‰2 3
(
‰‰3 4
)
‰‰4 5
=>
‰‰6 8
{
ÂÂ 
Console
ÊÊ 
.
ÊÊ 
	WriteLine
ÊÊ !
(
ÊÊ! "
$str
ÊÊ" A
)
ÊÊA B
;
ÊÊB C
CleanupConnection
ÁÁ !
(
ÁÁ! "
)
ÁÁ" #
;
ÁÁ# $
ConnectionLost
ËË 
?
ËË 
.
ËË  
Invoke
ËË  &
(
ËË& '
)
ËË' (
;
ËË( )
if
ÈÈ 
(
ÈÈ 

unexpected
ÈÈ 
)
ÈÈ 
{
ÍÍ 

MessageBox
ÎÎ 
.
ÎÎ 
Show
ÎÎ #
(
ÎÎ# $
$str
ÎÎ$ K
,
ÎÎK L
$str
ÎÎM _
,
ÎÎ_ `
MessageBoxButton
ÎÎa q
.
ÎÎq r
OK
ÎÎr t
,
ÎÎt u
MessageBoxImageÎÎv Ö
.ÎÎÖ Ü
WarningÎÎÜ ç
)ÎÎç é
;ÎÎé è
}
ÏÏ 
}
ÌÌ 
)
ÌÌ 
;
ÌÌ 
}
ÓÓ 	
}
ÔÔ 
public
 

class
  
ChatMessageDisplay
 #
{
ÒÒ 
public
ÚÚ 
string
ÚÚ 
FormattedMessage
ÚÚ &
{
ÚÚ' (
get
ÚÚ) ,
;
ÚÚ, -
set
ÚÚ. 1
;
ÚÚ1 2
}
ÚÚ3 4
}
ÛÛ 
}ÙÙ ó
éC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\RelayCommand.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
{ 
public 

class 
RelayCommand 
: 
ICommand  (
{ 
private 
readonly 
Action 
<  
object  &
>& '
_execute( 0
;0 1
private		 
readonly		 
	Predicate		 "
<		" #
object		# )
>		) *
_canExecute		+ 6
;		6 7
public 
RelayCommand 
( 
Action "
<" #
object# )
>) *
execute+ 2
,2 3
	Predicate4 =
<= >
object> D
>D E

canExecuteF P
=Q R
nullS W
)W X
{ 	
_execute 
= 
execute 
?? !
throw" '
new( +!
ArgumentNullException, A
(A B
nameofB H
(H I
executeI P
)P Q
)Q R
;R S
_canExecute 
= 

canExecute $
;$ %
} 	
public 
event 
EventHandler !
CanExecuteChanged" 3
{ 	
add 
{ 
CommandManager 
. 
RequerySuggested /
+=0 2
value3 8
;8 9
} 
remove 
{ 
CommandManager 
. 
RequerySuggested /
-=0 2
value3 8
;8 9
} 
} 	
public 
bool 

CanExecute 
( 
object %
	parameter& /
)/ 0
{ 	
return 
_canExecute 
== !
null" &
||' )
_canExecute* 5
(5 6
	parameter6 ?
)? @
;@ A
}   	
public"" 
void"" 
Execute"" 
("" 
object"" "
	parameter""# ,
)"", -
{## 	
_execute$$ 
($$ 
	parameter$$ 
)$$ 
;$$  
}%% 	
}&& 
}'' ¢
ûC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Match\WordSelectionViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Match& +
{ 
internal		 
class		 "
WordSelectionViewModel		 )
{

 
} 
} †
ùC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Match\GuessTheWordViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Match& +
{ 
internal		 
class		 !
GuessTheWordViewModel		 (
{

 
} 
} ú
õC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Match\EndOfMatchViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Match& +
{ 
internal		 
class		 
EndOfMatchViewModel		 &
{

 
} 
} ¢
ûC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Match\DrawingScreenViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Match& +
{ 
internal		 
class		 "
DrawingScreenViewModel		 )
{

 
} 
} ¢
ûC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Match\AnswersScreenViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Match& +
{ 
internal		 
class		 "
AnswersScreenViewModel		 )
{

 
} 
} öq
¶C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\MatchSettings\MatchSettingsViewModel.cs
	namespace

 	
GuessMyMessClient


 
.

 
	ViewModel

 %
.

% &
MatchSettings

& 3
{ 
public 

class "
MatchSettingsViewModel '
:( )
ViewModelBase* 7
{ 
private 
string 

_matchName !
=" #
$str$ 1
+2 3
SessionManager4 B
.B C
InstanceC K
.K L
CurrentUsernameL [
;[ \
private 
bool 
_isPrivateMatch $
=% &
false' ,
;, -
private 
int 
_maxPlayers 
;  
private 
int 
_rounds 
; 
private 
DifficultyModel 
_selectedDifficulty  3
;3 4
public 
List 
< 
int 
> !
AvailablePlayerCounts .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
List 
< 
int 
>  
AvailableRoundCounts -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
List 
< 
DifficultyModel #
># $!
AvailableDifficulties% :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
string 
	MatchName 
{ 	
get 
=> 

_matchName 
; 
set 
=> 
SetProperty 
( 
ref "

_matchName# -
,- .
value/ 4
)4 5
;5 6
} 	
public 
bool 
IsPublicMatch !
{ 	
get   
=>   
!   
_isPrivateMatch   #
;  # $
set!! 
{"" 
if## 
(## 
SetProperty## 
(##  
ref##  #
_isPrivateMatch##$ 3
,##3 4
!##5 6
value##6 ;
)##; <
)##< =
{$$ 
OnPropertyChanged%% %
(%%% &
nameof%%& ,
(%%, -
IsPublicMatch%%- :
)%%: ;
)%%; <
;%%< =
}&& 
}'' 
}(( 	
public** 
int** 

MaxPlayers** 
{++ 	
get,, 
=>,, 
_maxPlayers,, 
;,, 
set-- 
=>-- 
SetProperty-- 
(-- 
ref-- "
_maxPlayers--# .
,--. /
value--0 5
)--5 6
;--6 7
}.. 	
public00 
int00 
Rounds00 
{11 	
get22 
=>22 
_rounds22 
;22 
set33 
=>33 
SetProperty33 
(33 
ref33 "
_rounds33# *
,33* +
value33, 1
)331 2
;332 3
}44 	
public66 
DifficultyModel66 
SelectedDifficulty66 1
{77 	
get88 
=>88 
_selectedDifficulty88 &
;88& '
set99 
=>99 
SetProperty99 
(99 
ref99 "
_selectedDifficulty99# 6
,996 7
value998 =
)99= >
;99> ?
}:: 	
public<< 
RelayCommand<< 
SetMatchTypeCommand<< /
{<<0 1
get<<2 5
;<<5 6
private<<7 >
set<<? B
;<<B C
}<<D E
public== 
RelayCommand== 
CreateMatchCommand== .
{==/ 0
get==1 4
;==4 5
private==6 =
set==> A
;==A B
}==C D
public>> 
RelayCommand>> 
ReturnCommand>> )
{>>* +
get>>, /
;>>/ 0
private>>1 8
set>>9 <
;>>< =
}>>> ?
public@@ "
MatchSettingsViewModel@@ %
(@@% &
)@@& '
{AA 	!
AvailablePlayerCountsBB !
=BB" #

EnumerableBB$ .
.BB. /
RangeBB/ 4
(BB4 5
$numBB5 6
,BB6 7
$numBB8 9
)BB9 :
.BB: ;
ToListBB; A
(BBA B
)BBB C
;BBC D 
AvailableRoundCountsCC  
=CC! "

EnumerableCC# -
.CC- .
RangeCC. 3
(CC3 4
$numCC4 5
,CC5 6
$numCC7 8
)CC8 9
.CC9 :
ToListCC: @
(CC@ A
)CCA B
;CCB C!
AvailableDifficultiesDD !
=DD" #
newDD$ '
ListDD( ,
<DD, -
DifficultyModelDD- <
>DD< =
{EE 
newFF 
DifficultyModelFF #
{FF$ %
IdFF& (
=FF) *
$numFF+ ,
,FF, -
NameFF. 2
=FF3 4

PropertiesFF5 ?
.FF? @
LangsFF@ E
.FFE F
LangFFF J
.FFJ K
createGameCbEasyFFK [
}FF\ ]
,FF] ^
newGG 
DifficultyModelGG #
{GG$ %
IdGG& (
=GG) *
$numGG+ ,
,GG, -
NameGG. 2
=GG3 4

PropertiesGG5 ?
.GG? @
LangsGG@ E
.GGE F
LangGGF J
.GGJ K$
createGameCbIntermediateGGK c
}GGd e
,GGe f
newHH 
DifficultyModelHH #
{HH$ %
IdHH& (
=HH) *
$numHH+ ,
,HH, -
NameHH. 2
=HH3 4

PropertiesHH5 ?
.HH? @
LangsHH@ E
.HHE F
LangHHF J
.HHJ K
createGameCbHardHHK [
}HH\ ]
}II 
;II 

MaxPlayersKK 
=KK !
AvailablePlayerCountsKK .
[KK. /
$numKK/ 0
]KK0 1
;KK1 2
RoundsLL 
=LL  
AvailableRoundCountsLL )
[LL) *
$numLL* +
]LL+ ,
;LL, -
SelectedDifficultyMM 
=MM  !
AvailableDifficultiesMM! 6
[MM6 7
$numMM7 8
]MM8 9
;MM9 :
SetMatchTypeCommandOO 
=OO  !
newOO" %
RelayCommandOO& 2
(OO2 3
ExecuteSetMatchTypeOO3 F
)OOF G
;OOG H
CreateMatchCommandPP 
=PP  
newPP! $
RelayCommandPP% 1
(PP1 2
asyncPP2 7
(PP8 9
paramPP9 >
)PP> ?
=>PP@ B
awaitPPC H#
ExecuteCreateMatchAsyncPPI `
(PP` a
paramPPa f
)PPf g
)PPg h
;PPh i
ReturnCommandQQ 
=QQ 
newQQ 
RelayCommandQQ  ,
(QQ, -
ExecuteReturnQQ- :
)QQ: ;
;QQ; <
}RR 	
privateTT 
voidTT 
ExecuteSetMatchTypeTT (
(TT( )
objectTT) /
	parameterTT0 9
)TT9 :
{UU 	
IsPublicMatchVV 
=VV 
(VV 
	parameterVV &
.VV& '
ToStringVV' /
(VV/ 0
)VV0 1
==VV2 4
$strVV5 =
)VV= >
;VV> ?
}WW 	
privateYY 
asyncYY 
TaskYY #
ExecuteCreateMatchAsyncYY 2
(YY2 3
objectYY3 9
	parameterYY: C
)YYC D
{ZZ 	
if[[ 
([[ 
string[[ 
.[[ 
IsNullOrWhiteSpace[[ )
([[) *
	MatchName[[* 3
)[[3 4
)[[4 5
{\\ 

MessageBox]] 
.]] 
Show]] 
(]]  

Properties]]  *
.]]* +
Langs]]+ 0
.]]0 1
Lang]]1 5
.]]5 6$
alertCreateGameErrorName]]6 N
)]]N O
;]]O P
return^^ 
;^^ 
}__ 
varaa 
settingsaa 
=aa 
newaa 
LobbySettingsDtoaa /
{bb 
	MatchNamecc 
=cc 
thiscc  
.cc  !
	MatchNamecc! *
,cc* +
	IsPrivatedd 
=dd 
thisdd  
.dd  !
_isPrivateMatchdd! 0
,dd0 1

MaxPlayersee 
=ee 
thisee !
.ee! "

MaxPlayersee" ,
,ee, -
TotalRoundsff 
=ff 
thisff "
.ff" #
Roundsff# )
,ff) *
DifficultyIdgg 
=gg 
thisgg #
.gg# $
SelectedDifficultygg$ 6
.gg6 7
Idgg7 9
}hh 
;hh 
varjj 
resultjj 
=jj 
awaitjj $
MatchmakingClientManagerjj 7
.jj7 8
Instancejj8 @
.jj@ A
CreateMatchAsyncjjA Q
(jjQ R
settingsjjR Z
)jjZ [
;jj[ \
ifll 
(ll 
resultll 
.ll 
Successll 
&&ll !
resultll" (
.ll( )
Datall) -
!=ll. 0
nullll1 5
&&ll6 8
resultll9 ?
.ll? @
Datall@ D
.llD E
ContainsKeyllE P
(llP Q
$strllQ Z
)llZ [
)ll[ \
{mm 
stringnn 
matchIdnn 
=nn  
resultnn! '
.nn' (
Datann( ,
[nn, -
$strnn- 6
]nn6 7
;nn7 8
varpp 
lobbyManagerpp  
=pp! "
LobbyClientManagerpp# 5
.pp5 6
Instancepp6 >
;pp> ?
varqq 
sessionManagerqq "
=qq# $
SessionManagerqq% 3
.qq3 4
Instanceqq4 <
;qq< =
stringrr 
currentUsernamerr &
=rr' (
sessionManagerrr) 7
.rr7 8
CurrentUsernamerr8 G
;rrG H
lobbyManagertt 
.tt 
Connecttt $
(tt$ %
currentUsernamett% 4
,tt4 5
matchIdtt6 =
)tt= >
;tt> ?
Windowvv 
waitingRoomViewvv &
=vv' (
nullvv) -
;vv- .
ViewModelBaseww  
waitingRoomViewModelww 2
=ww3 4
nullww5 9
;ww9 :
ifyy 
(yy 
_isPrivateMatchyy #
)yy# $
{zz  
waitingRoomViewModel{{ (
={{) *
new{{+ .0
$WaitingRoomPrivateMatchHostViewModel{{/ S
({{S T
lobbyManager{{T `
,{{` a
sessionManager{{b p
){{p q
;{{q r
waitingRoomView|| #
=||$ %
new||& )+
WaitingRoomPrivateMatchHostView||* I
{}} 
DataContext~~ #
=~~$ % 
waitingRoomViewModel~~& :
} 
; 
}
ÄÄ 
else
ÅÅ 
{
ÇÇ "
waitingRoomViewModel
ÉÉ (
=
ÉÉ) *
new
ÉÉ+ .1
#WaitingRoomPublicMatchHostViewModel
ÉÉ/ R
(
ÉÉR S
lobbyManager
ÉÉS _
,
ÉÉ_ `
sessionManager
ÉÉa o
)
ÉÉo p
;
ÉÉp q
waitingRoomView
ÑÑ #
=
ÑÑ$ %
new
ÑÑ& ),
WaitingRoomPublicMatchHostView
ÑÑ* H
{
ÖÖ 
DataContext
ÜÜ #
=
ÜÜ$ %"
waitingRoomViewModel
ÜÜ& :
}
áá 
;
áá 
}
àà 
if
ää 
(
ää 
	parameter
ää 
is
ää  
Window
ää! '
currentWindow
ää( 5
&&
ää6 8
waitingRoomView
ää9 H
!=
ääI K
null
ääL P
)
ääP Q
{
ãã 
waitingRoomView
åå #
.
åå# $
Show
åå$ (
(
åå( )
)
åå) *
;
åå* +
currentWindow
çç !
.
çç! "
Close
çç" '
(
çç' (
)
çç( )
;
çç) *
}
éé 
else
èè 
{
êê 

MessageBox
ëë 
.
ëë 
Show
ëë #
(
ëë# $
$"
ëë$ &
$str
ëë& :
{
ëë: ;
matchId
ëë; B
}
ëëB C
$str
ëëC i
"
ëëi j
,
ëëj k
$str
ëël r
)
ëër s
;
ëës t
lobbyManager
íí  
.
íí  !

Disconnect
íí! +
(
íí+ ,
)
íí, -
;
íí- .
}
ìì 
}
îî 
else
ïï 
{
ññ 

MessageBox
óó 
.
óó 
Show
óó 
(
óó  
result
óó  &
.
óó& '
Message
óó' .
??
óó/ 1
$str
óó2 Z
,
óóZ [
$str
óó\ c
)
óóc d
;
óód e
}
òò 
}
ôô 	
private
õõ 
static
õõ 
void
õõ 
ExecuteReturn
õõ )
(
õõ) *
object
õõ* 0
	parameter
õõ1 :
)
õõ: ;
{
úú 	
if
ùù 
(
ùù 
	parameter
ùù 
is
ùù 
Window
ùù #
window
ùù$ *
)
ùù* +
{
ûû 
var
üü 
	lobbyView
üü 
=
üü 
new
üü  #
View
üü$ (
.
üü( )
Lobby
üü) .
.
üü. /
	LobbyView
üü/ 8
(
üü8 9
)
üü9 :
;
üü: ;
	lobbyView
†† 
.
†† 
Show
†† 
(
†† 
)
††  
;
††  !
window
°° 
.
°° 
Close
°° 
(
°° 
)
°° 
;
°° 
}
¢¢ 
}
££ 	
}
§§ 
public
¶¶ 

class
¶¶ 
DifficultyModel
¶¶  
{
ßß 
public
®® 
int
®® 
Id
®® 
{
®® 
get
®® 
;
®® 
set
®®  
;
®®  !
}
®®" #
public
©© 
string
©© 
Name
©© 
{
©© 
get
©©  
;
©©  !
set
©©" %
;
©©% &
}
©©' (
public
´´ 
override
´´ 
string
´´ 
ToString
´´ '
(
´´' (
)
´´( )
{
¨¨ 	
return
≠≠ 
Name
≠≠ 
;
≠≠ 
}
ÆÆ 	
}
ØØ 
}∞∞ Ÿ¨
öC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Matches\MatchesViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Matches& -
{ 
public 

class 
MatchesViewModel !
:" #
ViewModelBase$ 1
{ 
private 
bool !
_isPublicViewSelected *
=+ ,
true- 1
;1 2
private 
string 

_matchCode !
;! "
private  
ObservableCollection $
<$ %
MatchInfoModel% 3
>3 4
_publicMatches5 C
;C D
private 
string 
_joiningMatchId &
=' (
null) -
;- .
private 
bool  
_joiningPrivateMatch )
=* +
false, 1
;1 2
private 
Window 
_currentWindow %
=& '
null( ,
;, -
public 
bool  
IsPublicViewSelected (
{ 	
get 
=> !
_isPublicViewSelected (
;( )
set 
=> 
SetProperty 
( 
ref "!
_isPublicViewSelected# 8
,8 9
value: ?
)? @
;@ A
} 	
public 
string 
	MatchCode 
{ 	
get 
=> 

_matchCode 
; 
set   
=>   
SetProperty   
(   
ref   "

_matchCode  # -
,  - .
value  / 4
)  4 5
;  5 6
}!! 	
public##  
ObservableCollection## #
<### $
MatchInfoModel##$ 2
>##2 3
PublicMatches##4 A
{$$ 	
get%% 
=>%% 
_publicMatches%% !
;%%! "
set&& 
=>&& 
SetProperty&& 
(&& 
ref&& "
_publicMatches&&# 1
,&&1 2
value&&3 8
)&&8 9
;&&9 :
}'' 	
public)) 
RelayCommand)) $
ShowPublicMatchesCommand)) 4
{))5 6
get))7 :
;)): ;
private))< C
set))D G
;))G H
}))I J
public** 
RelayCommand** %
ShowPrivateMatchesCommand** 5
{**6 7
get**8 ;
;**; <
private**= D
set**E H
;**H I
}**J K
public++ 
RelayCommand++ "
JoinPublicMatchCommand++ 2
{++3 4
get++5 8
;++8 9
private++: A
set++B E
;++E F
}++G H
public,, 
RelayCommand,, #
JoinPrivateMatchCommand,, 3
{,,4 5
get,,6 9
;,,9 :
private,,; B
set,,C F
;,,F G
},,H I
public-- 
RelayCommand-- 
RefreshCommand-- *
{--+ ,
get--- 0
;--0 1
set--3 6
;--6 7
}--8 9
public.. 
RelayCommand.. 
ReturnCommand.. )
{..* +
get.., /
;../ 0
private..1 8
set..9 <
;..< =
}..> ?
public00 
MatchesViewModel00 
(00  
)00  !
{11 	
PublicMatches22 
=22 
new22  
ObservableCollection22  4
<224 5
MatchInfoModel225 C
>22C D
(22D E
)22E F
;22F G$
ShowPublicMatchesCommand44 $
=44% &
new44' *
RelayCommand44+ 7
(447 8
(448 9
p449 :
)44: ;
=>44< > 
IsPublicViewSelected44? S
=44T U
true44V Z
)44Z [
;44[ \%
ShowPrivateMatchesCommand55 %
=55& '
new55( +
RelayCommand55, 8
(558 9
(559 :
p55: ;
)55; <
=>55= ? 
IsPublicViewSelected55@ T
=55U V
false55W \
)55\ ]
;55] ^"
JoinPublicMatchCommand66 "
=66# $
new66% (
RelayCommand66) 5
(665 6"
ExecuteJoinPublicMatch666 L
)66L M
;66M N#
JoinPrivateMatchCommand77 #
=77$ %
new77& )
RelayCommand77* 6
(776 7
async777 <
(77= >
p77> ?
)77? @
=>77A C
await77D I(
ExecuteJoinPrivateMatchAsync77J f
(77f g
p77g h
)77h i
)77i j
;77j k
ReturnCommand88 
=88 
new88 
RelayCommand88  ,
(88, -
ExecuteReturn88- :
)88: ;
;88; <$
MatchmakingClientManager:: $
.::$ %
Instance::% -
.::- .&
OnPublicMatchesListUpdated::. H
+=::I K&
OnPublicMatchesListUpdated::L f
;::f g$
MatchmakingClientManager;; $
.;;$ %
Instance;;% -
.;;- .%
OnMatchJoinedSuccessfully;;. G
+=;;H J
OnMatchJoined;;K X
;;;X Y$
MatchmakingClientManager<< $
.<<$ %
Instance<<% -
.<<- .
OnMatchmakingFailed<<. A
+=<<B D
OnMatchmakingFailed<<E X
;<<X Y
LoadPublicMatches>> 
(>> 
)>> 
;>>  
}?? 	
privateAA 
asyncAA 
TaskAA 
LoadPublicMatchesAA ,
(AA, -
)AA- .
{BB 	
varCC 

matchesDtoCC 
=CC 
awaitCC "$
MatchmakingClientManagerCC# ;
.CC; <
InstanceCC< D
.CCD E!
GetPublicMatchesAsyncCCE Z
(CCZ [
)CC[ \
;CC\ ]&
OnPublicMatchesListUpdatedDD &
(DD& '

matchesDtoDD' 1
)DD1 2
;DD2 3
}EE 	
privateGG 
voidGG "
ExecuteJoinPublicMatchGG +
(GG+ ,
objectGG, 2
	parameterGG3 <
)GG< =
{HH 	
ifII 
(II 
	parameterII 
isII 
MatchInfoModelII +
	matchInfoII, 5
&&II6 8
	matchInfoII9 B
.IIB C
CanJoinIIC J
)IIJ K
{JJ 
_joiningMatchIdKK 
=KK  !
	matchInfoKK" +
.KK+ ,
MatchIdKK, 3
;KK3 4 
_joiningPrivateMatchLL $
=LL% &
falseLL' ,
;LL, -
_currentWindowMM 
=MM  
FindParentWindowMM! 1
(MM1 2
)MM2 3
;MM3 4$
MatchmakingClientManagerOO (
.OO( )
InstanceOO) 1
.OO1 2
JoinPublicMatchOO2 A
(OOA B
	matchInfoOOB K
.OOK L
MatchIdOOL S
)OOS T
;OOT U
}PP 
elseQQ 
ifQQ 
(QQ 
	parameterQQ 
isQQ !
stringQQ" (
matchIdQQ) 0
)QQ0 1
{RR 
_joiningMatchIdSS 
=SS  !
matchIdSS" )
;SS) * 
_joiningPrivateMatchTT $
=TT% &
falseTT' ,
;TT, -
_currentWindowUU 
=UU  
FindParentWindowUU! 1
(UU1 2
)UU2 3
;UU3 4$
MatchmakingClientManagerVV (
.VV( )
InstanceVV) 1
.VV1 2
JoinPublicMatchVV2 A
(VVA B
matchIdVVB I
)VVI J
;VVJ K
}WW 
elseXX 
{YY 

MessageBoxZZ 
.ZZ 
ShowZZ 
(ZZ  
$strZZ  M
,ZZM N
$strZZO V
)ZZV W
;ZZW X
}[[ 
}\\ 	
private^^ 
async^^ 
Task^^ (
ExecuteJoinPrivateMatchAsync^^ 7
(^^7 8
object^^8 >
	parameter^^? H
)^^H I
{__ 	
if`` 
(`` 
string`` 
.`` 
IsNullOrWhiteSpace`` )
(``) *
	MatchCode``* 3
)``3 4
)``4 5
{aa 

MessageBoxbb 
.bb 
Showbb 
(bb  

Propertiesbb  *
.bb* +
Langsbb+ 0
.bb0 1
Langbb1 5
.bb5 6*
alertPrivateMatchesErrorNoCodebb6 T
)bbT U
;bbU V
returncc 
;cc 
}dd 
stringff 

codeToJoinff 
=ff 
	MatchCodeff  )
.ff) *
ToUpperff* 1
(ff1 2
)ff2 3
;ff3 4
vargg 
resultgg 
=gg 
awaitgg $
MatchmakingClientManagergg 7
.gg7 8
Instancegg8 @
.gg@ A!
JoinPrivateMatchAsyncggA V
(ggV W

codeToJoinggW a
)gga b
;ggb c
ifjj 
(jj 
resultjj 
.jj 
Successjj 
&&jj !
resultjj" (
.jj( )
Datajj) -
!=jj. 0
nulljj1 5
&&jj6 8
resultjj9 ?
.jj? @
Datajj@ D
.jjD E
ContainsKeyjjE P
(jjP Q
$strjjQ Z
)jjZ [
)jj[ \
{kk 
_joiningMatchIdll 
=ll  !
resultll" (
.ll( )
Datall) -
[ll- .
$strll. 7
]ll7 8
;ll8 9 
_joiningPrivateMatchmm $
=mm% &
truemm' +
;mm+ ,
_currentWindownn 
=nn  
FindParentWindownn! 1
(nn1 2
	parameternn2 ;
)nn; <
;nn< =

MessageBoxoo 
.oo 
Showoo 
(oo  
$"oo  "
$stroo" B
{ooB C

codeToJoinooC M
}ooM N
$strooN Y
"ooY Z
)ooZ [
;oo[ \
}pp 
elseqq 
{rr 

MessageBoxss 
.ss 
Showss 
(ss  
resultss  &
.ss& '
Messagess' .
??ss/ 1
$strss2 b
,ssb c
$strssd k
)ssk l
;ssl m
}tt 
}uu 	
privateww 
voidww 
ExecuteReturnww "
(ww" #
objectww# )
	parameterww* 3
)ww3 4
{xx 	
CleanupEventsyy 
(yy 
)yy 
;yy 
ifzz 
(zz 
	parameterzz 
iszz 
Windowzz #
windowzz$ *
)zz* +
{{{ 
var|| 
	lobbyView|| 
=|| 
new||  #
View||$ (
.||( )
Lobby||) .
.||. /
	LobbyView||/ 8
(||8 9
)||9 :
;||: ;
	lobbyView}} 
.}} 
Show}} 
(}} 
)}}  
;}}  !
window~~ 
.~~ 
Close~~ 
(~~ 
)~~ 
;~~ 
} 
}
ÄÄ 	
private
ÇÇ 
void
ÇÇ (
OnPublicMatchesListUpdated
ÇÇ /
(
ÇÇ/ 0
List
ÇÇ0 4
<
ÇÇ4 5
MatchInfoDto
ÇÇ5 A
>
ÇÇA B
publicMatches
ÇÇC P
)
ÇÇP Q
{
ÉÉ 	
Application
ÑÑ 
.
ÑÑ 
Current
ÑÑ 
?
ÑÑ  
.
ÑÑ  !

Dispatcher
ÑÑ! +
?
ÑÑ+ ,
.
ÑÑ, -
Invoke
ÑÑ- 3
(
ÑÑ3 4
(
ÑÑ4 5
)
ÑÑ5 6
=>
ÑÑ7 9
{
ÖÖ 
PublicMatches
ÜÜ 
.
ÜÜ 
Clear
ÜÜ #
(
ÜÜ# $
)
ÜÜ$ %
;
ÜÜ% &
if
áá 
(
áá 
publicMatches
áá !
!=
áá" $
null
áá% )
)
áá) *
{
àà 
foreach
ââ 
(
ââ 
var
ââ  
matchDto
ââ! )
in
ââ* ,
publicMatches
ââ- :
)
ââ: ;
{
ää 
PublicMatches
ãã %
.
ãã% &
Add
ãã& )
(
ãã) *
new
ãã* -
MatchInfoModel
ãã. <
(
ãã< =
matchDto
ãã= E
)
ããE F
)
ããF G
;
ããG H
}
åå 
}
çç 
}
éé 
)
éé 
;
éé 
}
èè 	
private
ëë 
void
ëë 
OnMatchJoined
ëë "
(
ëë" #
string
ëë# )
matchId
ëë* 1
,
ëë1 2 
OperationResultDto
ëë3 E
result
ëëF L
)
ëëL M
{
íí 	
if
ìì 
(
ìì 
matchId
ìì 
!=
ìì 
_joiningMatchId
ìì *
)
ìì* +
return
ìì, 2
;
ìì2 3
Application
ïï 
.
ïï 
Current
ïï 
?
ïï  
.
ïï  !

Dispatcher
ïï! +
?
ïï+ ,
.
ïï, -
Invoke
ïï- 3
(
ïï3 4
(
ïï4 5
)
ïï5 6
=>
ïï7 9
{
ññ 
if
óó 
(
óó 
result
óó 
.
óó 
Success
óó "
)
óó" #
{
òò 
var
ôô 
lobbyManager
ôô $
=
ôô% & 
LobbyClientManager
ôô' 9
.
ôô9 :
Instance
ôô: B
;
ôôB C
var
öö 
sessionManager
öö &
=
öö' (
SessionManager
öö) 7
.
öö7 8
Instance
öö8 @
;
öö@ A
string
õõ 
currentUsername
õõ *
=
õõ+ ,
sessionManager
õõ- ;
.
õõ; <
CurrentUsername
õõ< K
;
õõK L
lobbyManager
ùù  
.
ùù  !
Connect
ùù! (
(
ùù( )
currentUsername
ùù) 8
,
ùù8 9
matchId
ùù: A
)
ùùA B
;
ùùB C
Window
üü 
waitingRoomView
üü *
=
üü+ ,
null
üü- 1
;
üü1 2
ViewModelBase
†† !"
waitingRoomViewModel
††" 6
=
††7 8
null
††9 =
;
††= >
if
¢¢ 
(
¢¢ "
_joiningPrivateMatch
¢¢ ,
)
¢¢, -
{
££ "
waitingRoomViewModel
§§ ,
=
§§- .
new
§§/ 2.
 WaitingRoomPrivateMatchViewModel
§§3 S
(
§§S T
lobbyManager
§§T `
,
§§` a
sessionManager
§§b p
)
§§p q
;
§§q r
waitingRoomView
•• '
=
••( )
new
••* -)
WaitingRoomPrivateMatchView
••. I
{
¶¶ 
DataContext
ßß '
=
ßß( )"
waitingRoomViewModel
ßß* >
}
®® 
;
®® 
}
©© 
else
™™ 
{
´´ "
waitingRoomViewModel
¨¨ ,
=
¨¨- .
new
¨¨/ 2-
WaitingRoomPublicMatchViewModel
¨¨3 R
(
¨¨R S
lobbyManager
¨¨S _
,
¨¨_ `
sessionManager
¨¨a o
)
¨¨o p
;
¨¨p q
waitingRoomView
≠≠ '
=
≠≠( )
new
≠≠* -(
WaitingRoomPublicMatchView
≠≠. H
{
ÆÆ 
DataContext
ØØ '
=
ØØ( )"
waitingRoomViewModel
ØØ* >
}
∞∞ 
;
∞∞ 
}
±± 
if
≥≥ 
(
≥≥ 
_currentWindow
≥≥ &
!=
≥≥' )
null
≥≥* .
&&
≥≥/ 1
waitingRoomView
≥≥2 A
!=
≥≥B D
null
≥≥E I
)
≥≥I J
{
¥¥ 
CleanupEvents
µµ %
(
µµ% &
)
µµ& '
;
µµ' (
waitingRoomView
∂∂ '
.
∂∂' (
Show
∂∂( ,
(
∂∂, -
)
∂∂- .
;
∂∂. /
_currentWindow
∑∑ &
.
∑∑& '
Close
∑∑' ,
(
∑∑, -
)
∑∑- .
;
∑∑. /
}
∏∏ 
else
ππ 
{
∫∫ 

MessageBox
ªª "
.
ªª" #
Show
ªª# '
(
ªª' (
$"
ªª( *
$str
ªª* >
{
ªª> ?
matchId
ªª? F
}
ªªF G
$str
ªªG f
"
ªªf g
,
ªªg h
$str
ªªi o
)
ªªo p
;
ªªp q
lobbyManager
ºº $
.
ºº$ %

Disconnect
ºº% /
(
ºº/ 0
)
ºº0 1
;
ºº1 2
}
ΩΩ 
_joiningMatchId
øø #
=
øø$ %
null
øø& *
;
øø* +"
_joiningPrivateMatch
¿¿ (
=
¿¿) *
false
¿¿+ 0
;
¿¿0 1
_currentWindow
¡¡ "
=
¡¡# $
null
¡¡% )
;
¡¡) *
}
¬¬ 
else
√√ 
{
ƒƒ 

MessageBox
≈≈ 
.
≈≈ 
Show
≈≈ #
(
≈≈# $
$"
≈≈$ &
$str
≈≈& C
{
≈≈C D
matchId
≈≈D K
}
≈≈K L
$str
≈≈L N
{
≈≈N O
result
≈≈O U
.
≈≈U V
Message
≈≈V ]
}
≈≈] ^
"
≈≈^ _
,
≈≈_ `
$str
≈≈a h
)
≈≈h i
;
≈≈i j
_joiningMatchId
∆∆ #
=
∆∆$ %
null
∆∆& *
;
∆∆* +"
_joiningPrivateMatch
«« (
=
««) *
false
««+ 0
;
««0 1
_currentWindow
»» "
=
»»# $
null
»»% )
;
»») *
}
…… 
}
   
)
   
;
   
}
ÀÀ 	
private
ÕÕ 
void
ÕÕ 
CleanupEvents
ÕÕ "
(
ÕÕ" #
)
ÕÕ# $
{
ŒŒ 	&
MatchmakingClientManager
œœ $
.
œœ$ %
Instance
œœ% -
.
œœ- .(
OnPublicMatchesListUpdated
œœ. H
-=
œœI K(
OnPublicMatchesListUpdated
œœL f
;
œœf g&
MatchmakingClientManager
–– $
.
––$ %
Instance
––% -
.
––- .'
OnMatchJoinedSuccessfully
––. G
-=
––H J
OnMatchJoined
––K X
;
––X Y&
MatchmakingClientManager
—— $
.
——$ %
Instance
——% -
.
——- .!
OnMatchmakingFailed
——. A
-=
——B D!
OnMatchmakingFailed
——E X
;
——X Y
}
““ 	
private
‘‘ 
Window
‘‘ 
FindParentWindow
‘‘ '
(
‘‘' (
object
‘‘( .
commandParameter
‘‘/ ?
=
‘‘@ A
null
‘‘B F
)
‘‘F G
{
’’ 	
if
÷÷ 
(
÷÷ 
commandParameter
÷÷  
is
÷÷! #
Window
÷÷$ *
win
÷÷+ .
)
÷÷. /
return
÷÷0 6
win
÷÷7 :
;
÷÷: ;
return
◊◊ 
Application
◊◊ 
.
◊◊ 
Current
◊◊ &
?
◊◊& '
.
◊◊' (
Windows
◊◊( /
.
◊◊/ 0
OfType
◊◊0 6
<
◊◊6 7
Window
◊◊7 =
>
◊◊= >
(
◊◊> ?
)
◊◊? @
.
◊◊@ A
SingleOrDefault
◊◊A P
(
◊◊P Q
w
◊◊Q R
=>
◊◊S U
w
◊◊V W
.
◊◊W X
DataContext
◊◊X c
==
◊◊d f
this
◊◊g k
||
◊◊l n
w
◊◊o p
.
◊◊p q
IsActive
◊◊q y
)
◊◊y z
;
◊◊z {
}
ÿÿ 	
private
⁄⁄ 
static
⁄⁄ 
void
⁄⁄ !
OnMatchmakingFailed
⁄⁄ /
(
⁄⁄/ 0
string
⁄⁄0 6
reason
⁄⁄7 =
)
⁄⁄= >
{
€€ 	
Application
‹‹ 
.
‹‹ 
Current
‹‹ 
?
‹‹  
.
‹‹  !

Dispatcher
‹‹! +
?
‹‹+ ,
.
‹‹, -
Invoke
‹‹- 3
(
‹‹3 4
(
‹‹4 5
)
‹‹5 6
=>
‹‹7 9
{
›› 

MessageBox
ﬁﬁ 
.
ﬁﬁ 
Show
ﬁﬁ 
(
ﬁﬁ  
$"
ﬁﬁ  "
$str
ﬁﬁ" 8
{
ﬁﬁ8 9
reason
ﬁﬁ9 ?
}
ﬁﬁ? @
"
ﬁﬁ@ A
)
ﬁﬁA B
;
ﬁﬁB C
}
ﬂﬂ 
)
ﬂﬂ 
;
ﬂﬂ 
}
‡‡ 	
}
·· 
public
„„ 

class
„„ 
MatchInfoModel
„„ 
:
„„  !
ViewModelBase
„„" /
{
‰‰ 
public
ÂÂ 
string
ÂÂ 
MatchId
ÂÂ 
{
ÂÂ 
get
ÂÂ  #
;
ÂÂ# $
set
ÂÂ% (
;
ÂÂ( )
}
ÂÂ* +
public
ÊÊ 
string
ÊÊ 
	MatchName
ÊÊ 
{
ÊÊ  !
get
ÊÊ" %
;
ÊÊ% &
set
ÊÊ' *
;
ÊÊ* +
}
ÊÊ, -
public
ÁÁ 
string
ÁÁ 
HostUsername
ÁÁ "
{
ÁÁ# $
get
ÁÁ% (
;
ÁÁ( )
set
ÁÁ* -
;
ÁÁ- .
}
ÁÁ/ 0
public
ËË 
int
ËË 
CurrentPlayers
ËË !
{
ËË" #
get
ËË$ '
;
ËË' (
set
ËË) ,
;
ËË, -
}
ËË. /
public
ÈÈ 
int
ÈÈ 

MaxPlayers
ÈÈ 
{
ÈÈ 
get
ÈÈ  #
;
ÈÈ# $
set
ÈÈ% (
;
ÈÈ( )
}
ÈÈ* +
public
ÍÍ 
string
ÍÍ 
DifficultyName
ÍÍ $
{
ÍÍ% &
get
ÍÍ' *
;
ÍÍ* +
set
ÍÍ, /
;
ÍÍ/ 0
}
ÍÍ1 2
public
ÎÎ 
bool
ÎÎ 
CanJoin
ÎÎ 
=>
ÎÎ 
CurrentPlayers
ÎÎ -
<
ÎÎ. /

MaxPlayers
ÎÎ0 :
;
ÎÎ: ;
public
ÌÌ 
MatchInfoModel
ÌÌ 
(
ÌÌ 
MatchInfoDto
ÌÌ *
dto
ÌÌ+ .
)
ÌÌ. /
{
ÓÓ 	
MatchId
ÔÔ 
=
ÔÔ 
dto
ÔÔ 
.
ÔÔ 
MatchId
ÔÔ !
;
ÔÔ! "
	MatchName
 
=
 
dto
 
.
 
	MatchName
 %
;
% &
HostUsername
ÒÒ 
=
ÒÒ 
dto
ÒÒ 
.
ÒÒ 
HostUsername
ÒÒ +
;
ÒÒ+ ,
CurrentPlayers
ÚÚ 
=
ÚÚ 
dto
ÚÚ  
.
ÚÚ  !
CurrentPlayers
ÚÚ! /
;
ÚÚ/ 0

MaxPlayers
ÛÛ 
=
ÛÛ 
dto
ÛÛ 
.
ÛÛ 

MaxPlayers
ÛÛ '
;
ÛÛ' (
DifficultyName
ÙÙ 
=
ÙÙ 
dto
ÙÙ  
.
ÙÙ  !
DifficultyName
ÙÙ! /
;
ÙÙ/ 0
}
ıı 	
}
ˆˆ 
}˜˜ Û|
òC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Lobby\ProfileViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Lobby& +
{ 
public 

class 
ProfileViewModel !
:" #
ViewModelBase$ 1
{ 
private 
readonly 
UserProfileDto '
_profileData( 4
;4 5
public 
string 
	FirstName 
{ 	
get 
{ 
return 
_profileData #
.# $
	FirstName$ -
;- .
} 
set 
{ 
if 
( 
_profileData  
.  !
	FirstName! *
!=+ -
value. 3
)3 4
{ 
_profileData  
.  !
	FirstName! *
=+ ,
value- 2
;2 3
OnPropertyChanged %
(% &
)& '
;' (
}   
}!! 
}"" 	
public## 
string## 
LastName## 
{$$ 	
get%% 
{&& 
return'' 
_profileData'' #
.''# $
LastName''$ ,
;'', -
}(( 
set)) 
{** 
if++ 
(++ 
_profileData++  
.++  !
LastName++! )
!=++* ,
value++- 2
)++2 3
{,, 
_profileData--  
.--  !
LastName--! )
=--* +
value--, 1
;--1 2
OnPropertyChanged.. %
(..% &
)..& '
;..' (
}// 
}00 
}11 	
public33 
string33 
Username33 
=>33 !
_profileData33" .
?33. /
.33/ 0
Username330 8
;338 9
public55 
string55 
Email55 
{66 	
get77 
{88 
return99 
_profileData99 #
?99# $
.99$ %
Email99% *
;99* +
}:: 
set;; 
{<< 
if== 
(== 
_profileData==  
!===! #
null==$ (
&&==) +
_profileData==, 8
.==8 9
Email==9 >
!===? A
value==B G
)==G H
{>> 
_profileData??  
.??  !
Email??! &
=??' (
value??) .
;??. /
OnPropertyChanged@@ %
(@@% &
)@@& '
;@@' (
}AA 
}BB 
}CC 	
publicEE 
boolEE 
IsMaleEE 
=>EE 
_profileDataEE *
?EE* +
.EE+ ,
GenderIdEE, 4
==EE5 7
$numEE8 9
;EE9 :
publicFF 
boolFF 
IsFemaleFF 
=>FF 
_profileDataFF  ,
?FF, -
.FF- .
GenderIdFF. 6
==FF7 9
$numFF: ;
;FF; <
publicGG 
boolGG 
IsNonBinaryGG 
=>GG  "
_profileDataGG# /
?GG/ 0
.GG0 1
GenderIdGG1 9
==GG: <
$numGG= >
;GG> ?
publicII 
ICommandII 
ChangeEmailCommandII *
{II+ ,
getII- 0
;II0 1
}II2 3
publicJJ 
ICommandJJ !
ChangePasswordCommandJJ -
{JJ. /
getJJ0 3
;JJ3 4
}JJ5 6
publicKK 
ICommandKK 
SaveProfileCommandKK *
{KK+ ,
getKK- 0
;KK0 1
}KK2 3
publicMM 
ProfileViewModelMM 
(MM  
UserProfileDtoMM  .
initialProfileDataMM/ A
)MMA B
{NN 	
_profileDataOO 
=OO 
initialProfileDataOO -
??OO. 0
throwOO1 6
newOO7 :!
ArgumentNullExceptionOO; P
(OOP Q
nameofOOQ W
(OOW X
initialProfileDataOOX j
)OOj k
,OOk l
$str	OOm ì
)
OOì î
;
OOî ï
ChangeEmailCommandQQ 
=QQ  
newQQ! $
RelayCommandQQ% 1
(QQ1 2
ExecuteChangeEmailQQ2 D
)QQD E
;QQE F!
ChangePasswordCommandRR !
=RR" #
newRR$ '
RelayCommandRR( 4
(RR4 5!
ExecuteChangePasswordRR5 J
)RRJ K
;RRK L
SaveProfileCommandSS 
=SS  
newSS! $
RelayCommandSS% 1
(SS1 2
ExecuteSaveProfileSS2 D
)SSD E
;SSE F
}TT 	
privateVV 
asyncVV 
voidVV 
ExecuteSaveProfileVV -
(VV- .
objectVV. 4
	parameterVV5 >
)VV> ?
{WW 	
ifXX 
(XX 
stringXX 
.XX 
IsNullOrWhiteSpaceXX )
(XX) *
	FirstNameXX* 3
)XX3 4
||XX5 7
stringXX8 >
.XX> ?
IsNullOrWhiteSpaceXX? Q
(XXQ R
LastNameXXR Z
)XXZ [
)XX[ \
{YY 

MessageBoxZZ 
.ZZ 
ShowZZ 
(ZZ  
Lang[[ 
.[[ '
alertProfileMandatoryFields[[ 4
,[[4 5
Lang\\ 
.\\  
alertInputErrorTitle\\ -
,\\- .
MessageBoxButton]] $
.]]$ %
OK]]% '
,]]' (
MessageBoxImage]]) 8
.]]8 9
Warning]]9 @
)]]@ A
;]]A B
return^^ 
;^^ 
}__ 
usingaa 
(aa 
varaa 
clientaa 
=aa 
newaa  #$
UserProfileServiceClientaa$ <
(aa< =
)aa= >
)aa> ?
{bb 
trycc 
{dd 
OperationResultDtoee &
resultee' -
=ee. /
awaitee0 5
clientee6 <
.ee< =
UpdateProfileAsyncee= O
(eeO P
_profileDataeeP \
.ee\ ]
Usernameee] e
,eee f
_profileDataeeg s
)ees t
;eet u
ifgg 
(gg 
resultgg 
.gg 
Successgg &
)gg& '
{hh 

MessageBoxii "
.ii" #
Showii# '
(ii' (
Langjj  
.jj  !%
alertProfileUpdateSuccessjj! :
,jj: ;
Langkk  
.kk  !
alertSuccessTitlekk! 2
,kk2 3
MessageBoxButtonll ,
.ll, -
OKll- /
,ll/ 0
MessageBoxImagemm +
.mm+ ,
Informationmm, 7
)mm7 8
;mm8 9
}nn 
elseoo 
{pp 

MessageBoxqq "
.qq" #
Showqq# '
(qq' (
resultrr "
.rr" #
Messagerr# *
,rr* +
Langss  
.ss  !(
alertProfileUpdateErrorTitless! =
,ss= >
MessageBoxButtontt ,
.tt, -
OKtt- /
,tt/ 0
MessageBoxImageuu +
.uu+ ,
Warninguu, 3
)uu3 4
;uu4 5
}vv 
}ww 
catchxx 
(xx 
FaultExceptionxx %

fexGeneralxx& 0
)xx0 1
{yy 

MessageBoxzz 
.zz 
Showzz #
(zz# $
Lang{{ 
.{{ #
alertServerErrorMessage{{ 4
,{{4 5
Lang|| 
.|| (
alertProfileUpdateErrorTitle|| 9
,||9 :
MessageBoxButton}} (
.}}( )
OK}}) +
,}}+ ,
MessageBoxImage~~ '
.~~' (
Error~~( -
)~~- .
;~~. /
Console 
. 
	WriteLine %
(% &
$"& (
$str( B
{B C

fexGeneralC M
.M N
MessageN U
}U V
"V W
)W X
;X Y
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ '
EndpointNotFoundException
ÅÅ 0
ex
ÅÅ1 3
)
ÅÅ3 4
{
ÇÇ 

MessageBox
ÉÉ 
.
ÉÉ 
Show
ÉÉ #
(
ÉÉ# $
Lang
ÑÑ 
.
ÑÑ )
alertConnectionErrorMessage
ÑÑ 8
,
ÑÑ8 9
Lang
ÖÖ 
.
ÖÖ *
alertProfileUpdateErrorTitle
ÖÖ 9
,
ÖÖ9 :
MessageBoxButton
ÜÜ (
.
ÜÜ( )
OK
ÜÜ) +
,
ÜÜ+ ,
MessageBoxImage
áá '
.
áá' (
Error
áá( -
)
áá- .
;
áá. /
Console
àà 
.
àà 
	WriteLine
àà %
(
àà% &
$"
àà& (
$str
àà( I
{
ààI J
ex
ààJ L
.
ààL M
Message
ààM T
}
ààT U
"
ààU V
)
ààV W
;
ààW X
}
ââ 
catch
ää 
(
ää 
	Exception
ää  
ex
ää! #
)
ää# $
{
ãã 

MessageBox
åå 
.
åå 
Show
åå #
(
åå# $
Lang
çç 
.
çç ,
alertProfileUpdateUnknownError
çç ;
,
çç; <
Lang
éé 
.
éé *
alertProfileUpdateErrorTitle
éé 9
,
éé9 :
MessageBoxButton
èè (
.
èè( )
OK
èè) +
,
èè+ ,
MessageBoxImage
êê '
.
êê' (
Error
êê( -
)
êê- .
;
êê. /
Console
ëë 
.
ëë 
	WriteLine
ëë %
(
ëë% &
$"
ëë& (
$str
ëë( Q
{
ëëQ R
ex
ëëR T
.
ëëT U
Message
ëëU \
}
ëë\ ]
"
ëë] ^
)
ëë^ _
;
ëë_ `
}
íí 
}
ìì 
}
îî 	
private
ññ 
void
ññ  
ExecuteChangeEmail
ññ '
(
ññ' (
object
ññ( .
	parameter
ññ/ 8
)
ññ8 9
{
óó 	
var
òò 
changeEmailVM
òò 
=
òò 
new
òò  #"
ChangeEmailViewModel
òò$ 8
(
òò8 9
_profileData
òò9 E
.
òòE F
Username
òòF N
,
òòN O
(
òòP Q
newEmail
òòQ Y
)
òòY Z
=>
òò[ ]
{
ôô 
Email
öö 
=
öö 
newEmail
öö  
;
öö  !
}
õõ 
)
õõ 
;
õõ 
var
ùù 
changeEmailView
ùù 
=
ùù  !
new
ùù" %
ChangeEmailView
ùù& 5
{
ûû 
DataContext
üü 
=
üü 
changeEmailVM
üü +
}
†† 
;
†† 
changeEmailView
°° 
.
°° 

ShowDialog
°° &
(
°°& '
)
°°' (
;
°°( )
}
¢¢ 	
private
§§ 
async
§§ 
void
§§ #
ExecuteChangePassword
§§ 0
(
§§0 1
object
§§1 7
	parameter
§§8 A
)
§§A B
{
•• 	

MessageBox
¶¶ 
.
¶¶ 
Show
¶¶ 
(
¶¶ 
Lang
ßß 
.
ßß )
alertPasswordChangeCodeInfo
ßß 0
,
ßß0 1
Lang
®® 
.
®® &
alertPasswordChangeTitle
®® -
,
®®- .
MessageBoxButton
©©  
.
©©  !
OK
©©! #
,
©©# $
MessageBoxImage
™™ 
.
™™  
Information
™™  +
)
™™+ ,
;
™™, -
try
¨¨ 
{
≠≠ 
using
ÆÆ 
(
ÆÆ 
var
ÆÆ 
client
ÆÆ !
=
ÆÆ" #
new
ÆÆ$ '&
UserProfileServiceClient
ÆÆ( @
(
ÆÆ@ A
)
ÆÆA B
)
ÆÆB C
{
ØØ 
var
∞∞ 
result
∞∞ 
=
∞∞  
await
∞∞! &
client
∞∞' -
.
∞∞- .(
RequestChangePasswordAsync
∞∞. H
(
∞∞H I
_profileData
∞∞I U
.
∞∞U V
Username
∞∞V ^
)
∞∞^ _
;
∞∞_ `
if
≤≤ 
(
≤≤ 
result
≤≤ 
.
≤≤ 
Success
≤≤ &
)
≤≤& '
{
≥≥ 
var
¥¥ 
changePasswordVM
¥¥ ,
=
¥¥- .
new
¥¥/ 2%
ChangePasswordViewModel
¥¥3 J
(
¥¥J K
_profileData
¥¥K W
.
¥¥W X
Username
¥¥X `
)
¥¥` a
;
¥¥a b
var
µµ  
changePasswordView
µµ .
=
µµ/ 0
new
µµ1 4 
ChangePasswordView
µµ5 G
{
∂∂ 
DataContext
∑∑ '
=
∑∑( )
changePasswordVM
∑∑* :
}
∏∏ 
;
∏∏  
changePasswordView
ππ *
.
ππ* +

ShowDialog
ππ+ 5
(
ππ5 6
)
ππ6 7
;
ππ7 8
}
∫∫ 
else
ªª 
{
ºº 

MessageBox
ΩΩ "
.
ΩΩ" #
Show
ΩΩ# '
(
ΩΩ' (
result
ææ "
.
ææ" #
Message
ææ# *
,
ææ* +
Lang
øø  
.
øø  !,
alertPasswordRequestErrorTitle
øø! ?
,
øø? @
MessageBoxButton
¿¿ ,
.
¿¿, -
OK
¿¿- /
,
¿¿/ 0
MessageBoxImage
¡¡ +
.
¡¡+ ,
Warning
¡¡, 3
)
¡¡3 4
;
¡¡4 5
}
¬¬ 
}
√√ 
}
ƒƒ 
catch
≈≈ 
(
≈≈ 
FaultException
≈≈ !

fexGeneral
≈≈" ,
)
≈≈, -
{
∆∆ 

MessageBox
«« 
.
«« 
Show
«« 
(
««  
Lang
»» 
.
»» %
alertServerErrorMessage
»» 0
,
»»0 1
Lang
…… 
.
…… ,
alertPasswordRequestErrorTitle
…… 7
,
……7 8
MessageBoxButton
   $
.
  $ %
OK
  % '
,
  ' (
MessageBoxImage
ÀÀ #
.
ÀÀ# $
Error
ÀÀ$ )
)
ÀÀ) *
;
ÀÀ* +
Console
ÃÃ 
.
ÃÃ 
	WriteLine
ÃÃ !
(
ÃÃ! "
$"
ÃÃ" $
$str
ÃÃ$ J
{
ÃÃJ K

fexGeneral
ÃÃK U
.
ÃÃU V
Message
ÃÃV ]
}
ÃÃ] ^
"
ÃÃ^ _
)
ÃÃ_ `
;
ÃÃ` a
}
ÕÕ 
catch
ŒŒ 
(
ŒŒ '
EndpointNotFoundException
ŒŒ ,
ex
ŒŒ- /
)
ŒŒ/ 0
{
œœ 

MessageBox
–– 
.
–– 
Show
–– 
(
––  
Lang
—— 
.
—— )
alertConnectionErrorMessage
—— 4
,
——4 5
Lang
““ 
.
““ ,
alertPasswordRequestErrorTitle
““ 7
,
““7 8
MessageBoxButton
”” $
.
””$ %
OK
””% '
,
””' (
MessageBoxImage
‘‘ #
.
‘‘# $
Error
‘‘$ )
)
‘‘) *
;
‘‘* +
Console
’’ 
.
’’ 
	WriteLine
’’ !
(
’’! "
$"
’’" $
$str
’’$ Q
{
’’Q R
ex
’’R T
.
’’T U
Message
’’U \
}
’’\ ]
"
’’] ^
)
’’^ _
;
’’_ `
}
÷÷ 
catch
◊◊ 
(
◊◊ 
	Exception
◊◊ 
ex
◊◊ 
)
◊◊  
{
ÿÿ 

MessageBox
ŸŸ 
.
ŸŸ 
Show
ŸŸ 
(
ŸŸ  
Lang
⁄⁄ 
.
⁄⁄ .
 alertPasswordRequestUnknownError
⁄⁄ 9
,
⁄⁄9 :
Lang
€€ 
.
€€ ,
alertPasswordRequestErrorTitle
€€ 7
,
€€7 8
MessageBoxButton
‹‹ $
.
‹‹$ %
OK
‹‹% '
,
‹‹' (
MessageBoxImage
›› #
.
››# $
Error
››$ )
)
››) *
;
››* +
Console
ﬁﬁ 
.
ﬁﬁ 
	WriteLine
ﬁﬁ !
(
ﬁﬁ! "
$"
ﬁﬁ" $
$str
ﬁﬁ$ Z
{
ﬁﬁZ [
ex
ﬁﬁ[ ]
.
ﬁﬁ] ^
Message
ﬁﬁ^ e
}
ﬁﬁe f
"
ﬁﬁf g
)
ﬁﬁg h
;
ﬁﬁh i
}
ﬂﬂ 
}
‡‡ 	
}
·· 
}‚‚ £$
ôC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\HomePages\MainViewModel.cs
	namespace

 	
GuessMyMessClient


 
.

 
	ViewModel

 %
.

% &
	HomePages

& /
{ 
public 

class 
MainViewModel 
:  
ViewModelBase! .
{ 
public 
ICommand 
StartGameCommand (
{) *
get+ .
;. /
}0 1
public 
ICommand 
CloseWindowCommand *
{+ ,
get- 0
;0 1
}2 3
public 
ICommand !
MaximizeWindowCommand -
{. /
get0 3
;3 4
}5 6
public 
ICommand !
MinimizeWindowCommand -
{. /
get0 3
;3 4
}5 6
public 
MainViewModel 
( 
) 
{ 	
StartGameCommand 
= 
new "
RelayCommand# /
(/ 0
	StartGame0 9
)9 :
;: ;
CloseWindowCommand 
=  
new! $
RelayCommand% 1
(1 2
ExecuteCloseWindow2 D
)D E
;E F!
MaximizeWindowCommand !
=" #
new$ '
RelayCommand( 4
(4 5!
ExecuteMaximizeWindow5 J
)J K
;K L!
MinimizeWindowCommand !
=" #
new$ '
RelayCommand( 4
(4 5!
ExecuteMinimizeWindow5 J
)J K
;K L
} 	
private 
static 
void 
	StartGame %
(% &
object& ,
	parameter- 6
)6 7
{ 	
var 
welcomeView 
= 
new !
WelcomeView" -
(- .
). /
;/ 0
welcomeView 
. 
WindowState #
=$ %
WindowState& 1
.1 2
	Maximized2 ;
;; <
welcomeView 
. 
WindowStyle #
=$ %
WindowStyle& 1
.1 2
None2 6
;6 7
welcomeView   
.   

ResizeMode   "
=  # $

ResizeMode  % /
.  / 0
NoResize  0 8
;  8 9
welcomeView!! 
.!! 
Show!! 
(!! 
)!! 
;!! 
if## 
(## 
	parameter## 
is## 
Window## #

mainWindow##$ .
)##. /
{$$ 

mainWindow%% 
.%% 
Close%%  
(%%  !
)%%! "
;%%" #
}&& 
}'' 	
private)) 
static)) 
void)) 
ExecuteCloseWindow)) .
()). /
object))/ 5
	parameter))6 ?
)))? @
{** 	
if++ 
(++ 
	parameter++ 
is++ 
Window++ #
)++# $
{,, 
Application-- 
.-- 
Current-- #
.--# $
Shutdown--$ ,
(--, -
)--- .
;--. /
}.. 
}// 	
private11 
static11 
void11 !
ExecuteMaximizeWindow11 1
(111 2
object112 8
	parameter119 B
)11B C
{22 	
if33 
(33 
	parameter33 
is33 
Window33 #
window33$ *
)33* +
{44 
window55 
.55 
WindowState55 "
=55# $
window55% +
.55+ ,
WindowState55, 7
==558 :
WindowState55; F
.55F G
	Maximized55G P
?55Q R
WindowState55S ^
.55^ _
Normal55_ e
:55f g
WindowState55h s
.55s t
	Maximized55t }
;55} ~
}66 
}77 	
private99 
static99 
void99 !
ExecuteMinimizeWindow99 1
(991 2
object992 8
	parameter999 B
)99B C
{:: 	
if;; 
(;; 
	parameter;; 
is;; 
Window;; #
window;;$ *
);;* +
{<< 
window== 
.== 
WindowState== "
===# $
WindowState==% 0
.==0 1
	Minimized==1 :
;==: ;
}>> 
}?? 	
}@@ 
}AA ùn
ùC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Lobby\SelectAvatarViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Lobby& +
{ 
public 

class !
SelectAvatarViewModel &
:' (
ViewModelBase) 6
{ 
private 
readonly 
int 
_currentAvatarId -
;- .
public 
event 
Action 
< 
AvatarModel '
>' (
AvatarSelected) 7
;7 8
private  
ObservableCollection $
<$ %
AvatarModel% 0
>0 1
_availableAvatars2 C
;C D
public  
ObservableCollection #
<# $
AvatarModel$ /
>/ 0
AvailableAvatars1 A
{ 	
get 
{ 
return 
_availableAvatars (
;( )
} 
set 
{   
if!! 
(!! 
_availableAvatars!! %
!=!!& (
value!!) .
)!!. /
{"" 
_availableAvatars## %
=##& '
value##( -
;##- .
OnPropertyChanged$$ %
($$% &
)$$& '
;$$' (
}%% 
}&& 
}'' 	
private)) 
AvatarModel)) 
_selectedAvatar)) +
;))+ ,
public** 
AvatarModel** 
SelectedAvatar** )
{++ 	
get,, 
{-- 
return.. 
_selectedAvatar.. &
;..& '
}// 
set00 
{11 
if22 
(22 
_selectedAvatar22 #
!=22$ &
value22' ,
)22, -
{33 
if44 
(44 
_selectedAvatar44 '
!=44( *
null44+ /
)44/ 0
{55 
_selectedAvatar66 '
.66' (

IsSelected66( 2
=663 4
false665 :
;66: ;
}77 
_selectedAvatar99 #
=99$ %
value99& +
;99+ ,
if;; 
(;; 
_selectedAvatar;; '
!=;;( *
null;;+ /
);;/ 0
{<< 
_selectedAvatar== '
.==' (

IsSelected==( 2
===3 4
true==5 9
;==9 :
}>> 
OnPropertyChanged?? %
(??% &
)??& '
;??' (
}@@ 
}AA 
}BB 	
publicDD 
ICommandDD #
ConfirmSelectionCommandDD /
{DD0 1
getDD2 5
;DD5 6
}DD7 8
publicEE 
ICommandEE 
CloseCommandEE $
{EE% &
getEE' *
;EE* +
}EE, -
publicFF 
ICommandFF #
SelectAvatarItemCommandFF /
{FF0 1
getFF2 5
;FF5 6
}FF7 8
publicHH !
SelectAvatarViewModelHH $
(HH$ %
intHH% (
currentAvatarIdHH) 8
=HH9 :
$numHH; <
)HH< =
{II 	
_currentAvatarIdJJ 
=JJ 
currentAvatarIdJJ .
;JJ. /
AvailableAvatarsKK 
=KK 
newKK " 
ObservableCollectionKK# 7
<KK7 8
AvatarModelKK8 C
>KKC D
(KKD E
)KKE F
;KKF G#
ConfirmSelectionCommandMM #
=MM$ %
newMM& )
RelayCommandMM* 6
(MM6 7#
ExecuteConfirmSelectionMM7 N
,MMN O&
CanExecuteConfirmSelectionMMP j
)MMj k
;MMk l
CloseCommandNN 
=NN 
newNN 
RelayCommandNN +
(NN+ ,
CloseWindowNN, 7
)NN7 8
;NN8 9#
SelectAvatarItemCommandOO #
=OO$ %
newOO& )
RelayCommandOO* 6
(OO6 7#
ExecuteSelectAvatarItemOO7 N
)OON O
;OOO P
ifQQ 
(QQ 
!QQ 
DesignerPropertiesQQ #
.QQ# $
GetIsInDesignModeQQ$ 5
(QQ5 6
newQQ6 9
DependencyObjectQQ: J
(QQJ K
)QQK L
)QQL M
)QQM N
{RR 
LoadAvatarsSS 
(SS 
)SS 
;SS 
}TT 
}UU 	
privateWW 
asyncWW 
TaskWW 
LoadAvatarsWW &
(WW& '
)WW' (
{XX 	
awaitYY 
LoadAvatarsAsyncYY "
(YY" #
)YY# $
;YY$ %
}ZZ 	
private\\ 
async\\ 
Task\\ 
LoadAvatarsAsync\\ +
(\\+ ,
)\\, -
{]] 	
using^^ 
(^^ 
var^^ 
client^^ 
=^^ 
new^^  #$
UserProfileServiceClient^^$ <
(^^< =
)^^= >
)^^> ?
{__ 
try`` 
{aa 
varbb 
serverAvatarsbb %
=bb& '
awaitbb( -
clientbb. 4
.bb4 5$
GetAvailableAvatarsAsyncbb5 M
(bbM N
)bbN O
;bbO P
vardd 
tempAvatarsdd #
=dd$ %
newdd& )
Listdd* .
<dd. /
AvatarModeldd/ :
>dd: ;
(dd; <
)dd< =
;dd= >
ifee 
(ee 
serverAvatarsee %
!=ee& (
nullee) -
)ee- .
{ff 
foreachgg 
(gg  !
vargg! $
	avatarDtogg% .
ingg/ 1
serverAvatarsgg2 ?
)gg? @
{hh 
tempAvatarsii '
.ii' (
Addii( +
(ii+ ,
newii, /
AvatarModelii0 ;
{jj 
Idkk  "
=kk# $
	avatarDtokk% .
.kk. /
IdAvatarkk/ 7
,kk7 8
Namell  $
=ll% &
	avatarDtoll' 0
.ll0 1

AvatarNamell1 ;
,ll; <
	ImageDatamm  )
=mm* +
	avatarDtomm, 5
.mm5 6

AvatarDatamm6 @
,mm@ A
ImageSourcenn  +
=nn, -
ConvertByteToImagenn. @
(nn@ A
	avatarDtonnA J
.nnJ K

AvatarDatannK U
)nnU V
}oo 
)oo 
;oo 
}pp 
}qq 
AvailableAvatarsss $
=ss% &
newss' * 
ObservableCollectionss+ ?
<ss? @
AvatarModelss@ K
>ssK L
(ssL M
tempAvatarsssM X
)ssX Y
;ssY Z
SelectedAvataruu "
=uu# $
AvailableAvatarsuu% 5
.uu5 6
FirstOrDefaultuu6 D
(uuD E
auuE F
=>uuG I
auuJ K
.uuK L
IduuL N
==uuO Q
_currentAvatarIduuR b
)uub c
??vv% '
AvailableAvatarsvv( 8
.vv8 9
FirstOrDefaultvv9 G
(vvG H
)vvH I
;vvI J
}ww 
catchxx 
(xx 
FaultExceptionxx %

fexGeneralxx& 0
)xx0 1
{yy 

MessageBoxzz 
.zz 
Showzz #
(zz# $
Lang{{ 
.{{ &
alertAvatarLoadServerError{{ 7
,{{7 8
Lang|| 
.|| 
alertErrorTitle|| ,
,||, -
MessageBoxButton}} (
.}}( )
OK}}) +
,}}+ ,
MessageBoxImage~~ '
.~~' (
Error~~( -
)~~- .
;~~. /
Console 
. 
	WriteLine %
(% &
$"& (
$str( C
{C D

fexGeneralD N
.N O
MessageO V
}V W
"W X
)X Y
;Y Z
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ '
EndpointNotFoundException
ÅÅ 0
ex
ÅÅ1 3
)
ÅÅ3 4
{
ÇÇ 

MessageBox
ÉÉ 
.
ÉÉ 
Show
ÉÉ #
(
ÉÉ# $
Lang
ÑÑ 
.
ÑÑ )
alertConnectionErrorMessage
ÑÑ 8
,
ÑÑ8 9
Lang
ÖÖ 
.
ÖÖ '
alertConnectionErrorTitle
ÖÖ 6
,
ÖÖ6 7
MessageBoxButton
ÜÜ (
.
ÜÜ( )
OK
ÜÜ) +
,
ÜÜ+ ,
MessageBoxImage
áá '
.
áá' (
Error
áá( -
)
áá- .
;
áá. /
Console
àà 
.
àà 
	WriteLine
àà %
(
àà% &
$"
àà& (
$str
àà( J
{
ààJ K
ex
ààK M
.
ààM N
Message
ààN U
}
ààU V
"
ààV W
)
ààW X
;
ààX Y
}
ââ 
catch
ää 
(
ää 
	Exception
ää  
ex
ää! #
)
ää# $
{
ãã 

MessageBox
åå 
.
åå 
Show
åå #
(
åå# $
Lang
çç 
.
çç )
alertAvatarLoadUnknownError
çç 8
,
çç8 9
Lang
éé 
.
éé 
alertErrorTitle
éé ,
,
éé, -
MessageBoxButton
èè (
.
èè( )
OK
èè) +
,
èè+ ,
MessageBoxImage
êê '
.
êê' (
Error
êê( -
)
êê- .
;
êê. /
Console
ëë 
.
ëë 
	WriteLine
ëë %
(
ëë% &
$"
ëë& (
$str
ëë( J
{
ëëJ K
ex
ëëK M
.
ëëM N
Message
ëëN U
}
ëëU V
"
ëëV W
)
ëëW X
;
ëëX Y
}
íí 
}
ìì 
}
îî 	
private
ññ 
void
ññ %
ExecuteSelectAvatarItem
ññ ,
(
ññ, -
object
ññ- 3
	parameter
ññ4 =
)
ññ= >
{
óó 	
if
òò 
(
òò 
	parameter
òò 
is
òò 
AvatarModel
òò (
avatar
òò) /
)
òò/ 0
{
ôô 
SelectedAvatar
öö 
=
öö  
avatar
öö! '
;
öö' (
}
õõ 
}
úú 	
private
ûû 
bool
ûû (
CanExecuteConfirmSelection
ûû /
(
ûû/ 0
object
ûû0 6
	parameter
ûû7 @
)
ûû@ A
{
üü 	
return
†† 
SelectedAvatar
†† !
!=
††" $
null
††% )
;
††) *
}
°° 	
private
££ 
void
££ %
ExecuteConfirmSelection
££ ,
(
££, -
object
££- 3
	parameter
££4 =
)
££= >
{
§§ 	
AvatarSelected
•• 
?
•• 
.
•• 
Invoke
•• "
(
••" #
SelectedAvatar
••# 1
)
••1 2
;
••2 3
CloseWindow
¶¶ 
(
¶¶ 
	parameter
¶¶ !
)
¶¶! "
;
¶¶" #
}
ßß 	
private
©© 
void
©© 
CloseWindow
©©  
(
©©  !
object
©©! '
	parameter
©©( 1
)
©©1 2
{
™™ 	
if
´´ 
(
´´ 
	parameter
´´ 
is
´´ 
Window
´´ #
window
´´$ *
)
´´* +
{
¨¨ 
window
≠≠ 
.
≠≠ 
Close
≠≠ 
(
≠≠ 
)
≠≠ 
;
≠≠ 
}
ÆÆ 
else
ØØ 
{
∞∞ 
var
±± 
activeWindow
±±  
=
±±! "
Application
±±# .
.
±±. /
Current
±±/ 6
.
±±6 7
Windows
±±7 >
.
±±> ?
OfType
±±? E
<
±±E F
Window
±±F L
>
±±L M
(
±±M N
)
±±N O
.
±±O P
FirstOrDefault
±±P ^
(
±±^ _
w
±±_ `
=>
±±a c
w
±±d e
.
±±e f
DataContext
±±f q
==
±±r t
this
±±u y
)
±±y z
;
±±z {
activeWindow
≤≤ 
?
≤≤ 
.
≤≤ 
Close
≤≤ #
(
≤≤# $
)
≤≤$ %
;
≤≤% &
}
≥≥ 
}
¥¥ 	
public
∂∂ 
static
∂∂ 
BitmapImage
∂∂ ! 
ConvertByteToImage
∂∂" 4
(
∂∂4 5
byte
∂∂5 9
[
∂∂9 :
]
∂∂: ;

imageBytes
∂∂< F
)
∂∂F G
{
∑∑ 	
if
∏∏ 
(
∏∏ 

imageBytes
∏∏ 
==
∏∏ 
null
∏∏ "
||
∏∏# %

imageBytes
∏∏& 0
.
∏∏0 1
Length
∏∏1 7
==
∏∏8 :
$num
∏∏; <
)
∏∏< =
{
ππ 
return
∫∫ 
null
∫∫ 
;
∫∫ 
}
ªª 
var
ΩΩ 
image
ΩΩ 
=
ΩΩ 
new
ΩΩ 
BitmapImage
ΩΩ '
(
ΩΩ' (
)
ΩΩ( )
;
ΩΩ) *
using
ææ 
(
ææ 
var
ææ 
mem
ææ 
=
ææ 
new
ææ  
MemoryStream
ææ! -
(
ææ- .

imageBytes
ææ. 8
)
ææ8 9
)
ææ9 :
{
øø 
mem
¿¿ 
.
¿¿ 
Position
¿¿ 
=
¿¿ 
$num
¿¿  
;
¿¿  !
image
¡¡ 
.
¡¡ 
	BeginInit
¡¡ 
(
¡¡  
)
¡¡  !
;
¡¡! "
image
¬¬ 
.
¬¬ 
CreateOptions
¬¬ #
=
¬¬$ %!
BitmapCreateOptions
¬¬& 9
.
¬¬9 :!
PreservePixelFormat
¬¬: M
;
¬¬M N
image
√√ 
.
√√ 
CacheOption
√√ !
=
√√" #
BitmapCacheOption
√√$ 5
.
√√5 6
OnLoad
√√6 <
;
√√< =
image
ƒƒ 
.
ƒƒ 
	UriSource
ƒƒ 
=
ƒƒ  !
null
ƒƒ" &
;
ƒƒ& '
image
≈≈ 
.
≈≈ 
StreamSource
≈≈ "
=
≈≈# $
mem
≈≈% (
;
≈≈( )
image
∆∆ 
.
∆∆ 
EndInit
∆∆ 
(
∆∆ 
)
∆∆ 
;
∆∆  
}
«« 
image
»» 
.
»» 
Freeze
»» 
(
»» 
)
»» 
;
»» 
return
…… 
image
…… 
;
…… 
}
   	
}
ÀÀ 
}ÃÃ ä∑
ñC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Lobby\LobbyViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Lobby& +
{ 
public 

class 
LobbyViewModel 
:  !
ViewModelBase" /
{ 
private 
UserProfileDto 
_userProfileData /
;/ 0
private 
string 
	_username  
;  !
private 
BitmapImage 
_userAvatar '
;' (
private 
bool 
_isProfilePopupOpen (
;( )
private 
ProfileViewModel  
_profileViewModel! 2
;2 3
private 
bool 
_isFriendsPopupOpen (
;( )
private   
FriendsViewModel    
_friendsViewModel  ! 2
;  2 3
private!! 
bool!! %
_isConfigurationPopupOpen!! .
;!!. /
private"" "
ConfigurationViewModel"" &#
_configurationViewModel""' >
;""> ?
private## 
bool## 
_isChatPopupOpen## %
;##% &
private$$ "
DirectMessageViewModel$$ &#
_directMessageViewModel$$' >
;$$> ?
public&& 
UserProfileDto&& 
UserProfileData&& -
{'' 	
get(( 
{(( 
return(( 
_userProfileData(( )
;(() *
}((+ ,
set)) 
{** 
if++ 
(++ 
_userProfileData++ $
!=++% '
value++( -
)++- .
{,, 
_userProfileData-- $
=--% &
value--' ,
;--, -
OnPropertyChanged.. %
(..% &
)..& '
;..' (
}// 
}00 
}11 	
public33 
string33 
Username33 
{44 	
get55 
{55 
return55 
	_username55 "
;55" #
}55$ %
set66 
{77 
if88 
(88 
	_username88 
!=88  
value88! &
)88& '
{99 
	_username:: 
=:: 
value::  %
;::% &
OnPropertyChanged;; %
(;;% &
);;& '
;;;' (
}<< 
}== 
}>> 	
public@@ 
BitmapImage@@ 

UserAvatar@@ %
{AA 	
getBB 
{BB 
returnBB 
_userAvatarBB $
;BB$ %
}BB& '
setCC 
{DD 
ifEE 
(EE 
_userAvatarEE 
!=EE  "
valueEE# (
)EE( )
{FF 
_userAvatarGG 
=GG  !
valueGG" '
;GG' (
OnPropertyChangedHH %
(HH% &
)HH& '
;HH' (
}II 
}JJ 
}KK 	
publicMM 
boolMM 
IsProfilePopupOpenMM &
{NN 	
getOO 
{OO 
returnOO 
_isProfilePopupOpenOO ,
;OO, -
}OO. /
setPP 
{QQ 
ifRR 
(RR 
_isProfilePopupOpenRR '
!=RR( *
valueRR+ 0
)RR0 1
{SS 
_isProfilePopupOpenTT '
=TT( )
valueTT* /
;TT/ 0
OnPropertyChangedUU %
(UU% &
)UU& '
;UU' (
}VV 
}WW 
}XX 	
publicZZ 
ProfileViewModelZZ 
ProfileViewModelZZ  0
{[[ 	
get\\ 
{\\ 
return\\ 
_profileViewModel\\ *
;\\* +
}\\, -
set]] 
{^^ 
if__ 
(__ 
_profileViewModel__ %
!=__& (
value__) .
)__. /
{`` 
_profileViewModelaa %
=aa& '
valueaa( -
;aa- .
OnPropertyChangedbb %
(bb% &
)bb& '
;bb' (
}cc 
}dd 
}ee 	
publicgg 
boolgg 
IsFriendsPopupOpengg &
{hh 	
getii 
{ii 
returnii 
_isFriendsPopupOpenii ,
;ii, -
}ii. /
setjj 
{kk 
ifll 
(ll 
_isFriendsPopupOpenll '
!=ll( *
valuell+ 0
)ll0 1
{mm 
_isFriendsPopupOpennn '
=nn( )
valuenn* /
;nn/ 0
OnPropertyChangedoo %
(oo% &
)oo& '
;oo' (
}pp 
}qq 
}rr 	
publictt 
FriendsViewModeltt 
FriendsViewModeltt  0
{uu 	
getvv 
{vv 
returnvv 
_friendsViewModelvv *
;vv* +
}vv, -
setww 
{xx 
ifyy 
(yy 
_friendsViewModelyy %
!=yy& (
valueyy) .
)yy. /
{zz 
_friendsViewModel{{ %
={{& '
value{{( -
;{{- .
OnPropertyChanged|| %
(||% &
)||& '
;||' (
}}} 
}~~ 
} 	
public
ÅÅ 
bool
ÅÅ &
IsConfigurationPopupOpen
ÅÅ ,
{
ÇÇ 	
get
ÉÉ 
{
ÉÉ 
return
ÉÉ '
_isConfigurationPopupOpen
ÉÉ 2
;
ÉÉ2 3
}
ÉÉ4 5
set
ÑÑ 
{
ÖÖ 
if
ÜÜ 
(
ÜÜ '
_isConfigurationPopupOpen
ÜÜ -
!=
ÜÜ. 0
value
ÜÜ1 6
)
ÜÜ6 7
{
áá '
_isConfigurationPopupOpen
àà -
=
àà. /
value
àà0 5
;
àà5 6
OnPropertyChanged
ââ %
(
ââ% &
)
ââ& '
;
ââ' (
}
ää 
}
ãã 
}
åå 	
public
éé $
ConfigurationViewModel
éé %$
ConfigurationViewModel
éé& <
{
èè 	
get
êê 
{
êê 
return
êê %
_configurationViewModel
êê 0
;
êê0 1
}
êê2 3
set
ëë 
{
íí 
if
ìì 
(
ìì %
_configurationViewModel
ìì +
!=
ìì, .
value
ìì/ 4
)
ìì4 5
{
îî %
_configurationViewModel
ïï +
=
ïï, -
value
ïï. 3
;
ïï3 4
OnPropertyChanged
ññ %
(
ññ% &
)
ññ& '
;
ññ' (
}
óó 
}
òò 
}
ôô 	
public
õõ 
bool
õõ 
IsChatPopupOpen
õõ #
{
úú 	
get
ùù 
{
ùù 
return
ùù 
_isChatPopupOpen
ùù )
;
ùù) *
}
ùù+ ,
set
ûû 
{
üü 
if
†† 
(
†† 
_isChatPopupOpen
†† $
!=
††% '
value
††( -
)
††- .
{
°° 
_isChatPopupOpen
¢¢ $
=
¢¢% &
value
¢¢' ,
;
¢¢, -
OnPropertyChanged
££ %
(
££% &
)
££& '
;
££' (
}
§§ 
}
•• 
}
¶¶ 	
public
®® $
DirectMessageViewModel
®® %$
DirectMessageViewModel
®®& <
{
©© 	
get
™™ 
{
™™ 
return
™™ %
_directMessageViewModel
™™ 0
;
™™0 1
}
™™2 3
set
´´ 
{
¨¨ 
if
≠≠ 
(
≠≠ %
_directMessageViewModel
≠≠ +
!=
≠≠, .
value
≠≠/ 4
)
≠≠4 5
{
ÆÆ %
_directMessageViewModel
ØØ +
=
ØØ, -
value
ØØ. 3
;
ØØ3 4
OnPropertyChanged
∞∞ %
(
∞∞% &
)
∞∞& '
;
∞∞' (
}
±± 
}
≤≤ 
}
≥≥ 	
public
µµ 
ICommand
µµ 
SettingsCommand
µµ '
{
µµ( )
get
µµ* -
;
µµ- .
}
µµ/ 0
public
∂∂ 
ICommand
∂∂ 
FriendsCommand
∂∂ &
{
∂∂' (
get
∂∂) ,
;
∂∂, -
}
∂∂. /
public
∑∑ 
ICommand
∑∑ 
ChatCommand
∑∑ #
{
∑∑$ %
get
∑∑& )
;
∑∑) *
}
∑∑+ ,
public
∏∏ 
ICommand
∏∏ 
PlayCommand
∏∏ #
{
∏∏$ %
get
∏∏& )
;
∏∏) *
}
∏∏+ ,
public
ππ 
ICommand
ππ 
CreateGameCommand
ππ )
{
ππ* +
get
ππ, /
;
ππ/ 0
}
ππ1 2
public
∫∫ 
ICommand
∫∫  
EditProfileCommand
∫∫ *
{
∫∫+ ,
get
∫∫- 0
;
∫∫0 1
}
∫∫2 3
public
ªª 
ICommand
ªª !
SelectAvatarCommand
ªª +
{
ªª, -
get
ªª. 1
;
ªª1 2
}
ªª3 4
public
ºº 
ICommand
ºº  
CloseWindowCommand
ºº *
{
ºº+ ,
get
ºº- 0
;
ºº0 1
}
ºº2 3
public
ΩΩ 
ICommand
ΩΩ #
MaximizeWindowCommand
ΩΩ -
{
ΩΩ. /
get
ΩΩ0 3
;
ΩΩ3 4
}
ΩΩ5 6
public
ææ 
ICommand
ææ #
MinimizeWindowCommand
ææ -
{
ææ. /
get
ææ0 3
;
ææ3 4
}
ææ5 6
public
¿¿ 
LobbyViewModel
¿¿ 
(
¿¿ 
)
¿¿ 
{
¡¡ 	
SettingsCommand
¬¬ 
=
¬¬ 
new
¬¬ !
RelayCommand
¬¬" .
(
¬¬. /
ExecuteSettings
¬¬/ >
)
¬¬> ?
;
¬¬? @
FriendsCommand
√√ 
=
√√ 
new
√√  
RelayCommand
√√! -
(
√√- .
ExecuteFriends
√√. <
)
√√< =
;
√√= >
ChatCommand
ƒƒ 
=
ƒƒ 
new
ƒƒ 
RelayCommand
ƒƒ *
(
ƒƒ* +
ExecuteChat
ƒƒ+ 6
)
ƒƒ6 7
;
ƒƒ7 8
PlayCommand
≈≈ 
=
≈≈ 
new
≈≈ 
RelayCommand
≈≈ *
(
≈≈* +
ExecutePlay
≈≈+ 6
)
≈≈6 7
;
≈≈7 8
CreateGameCommand
∆∆ 
=
∆∆ 
new
∆∆  #
RelayCommand
∆∆$ 0
(
∆∆0 1
ExecuteCreateGame
∆∆1 B
)
∆∆B C
;
∆∆C D 
EditProfileCommand
«« 
=
««  
new
««! $
RelayCommand
««% 1
(
««1 2 
ExecuteEditProfile
««2 D
)
««D E
;
««E F!
SelectAvatarCommand
»» 
=
»»  !
new
»»" %
RelayCommand
»»& 2
(
»»2 3!
ExecuteSelectAvatar
»»3 F
)
»»F G
;
»»G H 
CloseWindowCommand
…… 
=
……  
new
……! $
RelayCommand
……% 1
(
……1 2 
ExecuteCloseWindow
……2 D
)
……D E
;
……E F#
MaximizeWindowCommand
   !
=
  " #
new
  $ '
RelayCommand
  ( 4
(
  4 5#
ExecuteMaximizeWindow
  5 J
)
  J K
;
  K L#
MinimizeWindowCommand
ÀÀ !
=
ÀÀ" #
new
ÀÀ$ '
RelayCommand
ÀÀ( 4
(
ÀÀ4 5#
ExecuteMinimizeWindow
ÀÀ5 J
)
ÀÀJ K
;
ÀÀK L
try
ÕÕ 
{
ŒŒ !
SocialClientManager
œœ #
.
œœ# $
Instance
œœ$ ,
.
œœ, -

Initialize
œœ- 7
(
œœ7 8
)
œœ8 9
;
œœ9 :
FriendsViewModel
––  
=
––! "
new
––# &
FriendsViewModel
––' 7
(
––7 8
)
––8 9
;
––9 :$
DirectMessageViewModel
—— &
=
——' (
new
——) ,$
DirectMessageViewModel
——- C
(
——C D
)
——D E
;
——E F$
ConfigurationViewModel
““ &
=
““' (
new
““) ,$
ConfigurationViewModel
““- C
(
““C D
)
““D E
;
““E F
}
”” 
catch
‘‘ 
(
‘‘ 
	Exception
‘‘ 
ex
‘‘ 
)
‘‘  
{
’’ 

MessageBox
÷÷ 
.
÷÷ 
Show
÷÷ 
(
÷÷  
string
◊◊ 
.
◊◊ 
Format
◊◊ !
(
◊◊! "
Lang
◊◊" &
.
◊◊& ')
alertSocialServiceInitError
◊◊' B
,
◊◊B C
ex
◊◊D F
.
◊◊F G
Message
◊◊G N
)
◊◊N O
,
◊◊O P
Lang
ÿÿ 
.
ÿÿ %
alertCriticalErrorTitle
ÿÿ 0
,
ÿÿ0 1
MessageBoxButton
ŸŸ $
.
ŸŸ$ %
OK
ŸŸ% '
,
ŸŸ' (
MessageBoxImage
⁄⁄ #
.
⁄⁄# $
Warning
⁄⁄$ +
)
⁄⁄+ ,
;
⁄⁄, -
Console
€€ 
.
€€ 
	WriteLine
€€ !
(
€€! "
$"
€€" $
$str
€€$ M
{
€€M N
ex
€€N P
.
€€P Q
Message
€€Q X
}
€€X Y
"
€€Y Z
)
€€Z [
;
€€[ \
}
‹‹ 
LoadDataOnEntry
ﬁﬁ 
(
ﬁﬁ 
)
ﬁﬁ 
;
ﬁﬁ 
}
ﬂﬂ 	
private
·· 
async
·· 
Task
·· 
LoadDataOnEntry
·· *
(
··* +
)
··+ ,
{
‚‚ 	
await
„„ "
LoadUserProfileAsync
„„ &
(
„„& '
)
„„' (
;
„„( )
}
‰‰ 	
private
ÊÊ 
void
ÊÊ 
ExecuteSettings
ÊÊ $
(
ÊÊ$ %
object
ÊÊ% +
	parameter
ÊÊ, 5
)
ÊÊ5 6
{
ÁÁ 	
if
ËË 
(
ËË $
ConfigurationViewModel
ËË &
!=
ËË' )
null
ËË* .
)
ËË. /
{
ÈÈ  
IsProfilePopupOpen
ÍÍ "
=
ÍÍ# $
false
ÍÍ% *
;
ÍÍ* + 
IsFriendsPopupOpen
ÎÎ "
=
ÎÎ# $
false
ÎÎ% *
;
ÎÎ* +
IsChatPopupOpen
ÏÏ 
=
ÏÏ  !
false
ÏÏ" '
;
ÏÏ' (&
IsConfigurationPopupOpen
ÌÌ (
=
ÌÌ) *
!
ÌÌ+ ,&
IsConfigurationPopupOpen
ÌÌ, D
;
ÌÌD E
}
ÓÓ 
else
ÔÔ 
{
 

MessageBox
ÒÒ 
.
ÒÒ 
Show
ÒÒ 
(
ÒÒ  
Lang
ÚÚ 
.
ÚÚ *
alertFeatureUnavailableError
ÚÚ 5
,
ÚÚ5 6
Lang
ÛÛ 
.
ÛÛ 
alertErrorTitle
ÛÛ (
,
ÛÛ( )
MessageBoxButton
ÙÙ $
.
ÙÙ$ %
OK
ÙÙ% '
,
ÙÙ' (
MessageBoxImage
ıı #
.
ıı# $
Warning
ıı$ +
)
ıı+ ,
;
ıı, -
}
ˆˆ 
}
˜˜ 	
private
˘˘ 
void
˘˘ 
ExecuteFriends
˘˘ #
(
˘˘# $
object
˘˘$ *
param
˘˘+ 0
)
˘˘0 1
{
˙˙ 	
if
˚˚ 
(
˚˚ 
FriendsViewModel
˚˚  
!=
˚˚! #
null
˚˚$ (
)
˚˚( )
{
¸¸  
IsProfilePopupOpen
˝˝ "
=
˝˝# $
false
˝˝% *
;
˝˝* +&
IsConfigurationPopupOpen
˛˛ (
=
˛˛) *
false
˛˛+ 0
;
˛˛0 1
IsChatPopupOpen
ˇˇ 
=
ˇˇ  !
false
ˇˇ" '
;
ˇˇ' ( 
IsFriendsPopupOpen
ÄÄ "
=
ÄÄ# $
!
ÄÄ% & 
IsFriendsPopupOpen
ÄÄ& 8
;
ÄÄ8 9
}
ÅÅ 
else
ÇÇ 
{
ÉÉ 

MessageBox
ÑÑ 
.
ÑÑ 
Show
ÑÑ 
(
ÑÑ  
Lang
ÖÖ 
.
ÖÖ *
alertFeatureUnavailableError
ÖÖ 5
,
ÖÖ5 6
Lang
ÜÜ 
.
ÜÜ 
alertErrorTitle
ÜÜ (
,
ÜÜ( )
MessageBoxButton
áá $
.
áá$ %
OK
áá% '
,
áá' (
MessageBoxImage
àà #
.
àà# $
Warning
àà$ +
)
àà+ ,
;
àà, -
}
ââ 
}
ää 	
private
åå 
void
åå 
ExecuteChat
åå  
(
åå  !
object
åå! '
param
åå( -
)
åå- .
{
çç 	
if
éé 
(
éé $
DirectMessageViewModel
éé &
!=
éé' )
null
éé* .
)
éé. /
{
èè  
IsProfilePopupOpen
êê "
=
êê# $
false
êê% *
;
êê* +&
IsConfigurationPopupOpen
ëë (
=
ëë) *
false
ëë+ 0
;
ëë0 1 
IsFriendsPopupOpen
íí "
=
íí# $
false
íí% *
;
íí* +
IsChatPopupOpen
ìì 
=
ìì  !
!
ìì" #
IsChatPopupOpen
ìì# 2
;
ìì2 3
}
îî 
else
ïï 
{
ññ 

MessageBox
óó 
.
óó 
Show
óó 
(
óó  
Lang
òò 
.
òò  
alertChatLoadError
òò +
,
òò+ ,
Lang
ôô 
.
ôô 
alertErrorTitle
ôô (
,
ôô( )
MessageBoxButton
öö $
.
öö$ %
OK
öö% '
,
öö' (
MessageBoxImage
õõ #
.
õõ# $
Warning
õõ$ +
)
õõ+ ,
;
õõ, -
}
úú 
}
ùù 	
private
üü 
void
üü 
ExecutePlay
üü  
(
üü  !
object
üü! '
param
üü( -
)
üü- .
{
†† 	
MatchesViewModel
°° 
matchesViewModel
°° -
=
°°. /
new
°°0 3
MatchesViewModel
°°4 D
(
°°D E
)
°°E F
;
°°F G
MatchesView
¢¢ 
matchesView
¢¢ #
=
¢¢$ %
new
¢¢& )
MatchesView
¢¢* 5
(
¢¢5 6
)
¢¢6 7
;
¢¢7 8
matchesView
££ 
.
££ 
DataContext
££ #
=
££$ %
matchesViewModel
££& 6
;
££6 7
matchesView
§§ 
.
§§ 
Show
§§ 
(
§§ 
)
§§ 
;
§§ %
CloseCurrentLobbyWindow
•• #
(
••# $
)
••$ %
;
••% &
}
¶¶ 	
private
®® 
void
®® 
ExecuteCreateGame
®® &
(
®®& '
object
®®' -
param
®®. 3
)
®®3 4
{
©© 	$
MatchSettingsViewModel
™™ "$
matchSettingsViewModel
™™# 9
=
™™: ;
new
™™< ?$
MatchSettingsViewModel
™™@ V
(
™™V W
)
™™W X
;
™™X Y
MatchSettingsView
´´ 
matchSettingsView
´´ /
=
´´0 1
new
´´2 5
MatchSettingsView
´´6 G
(
´´G H
)
´´H I
;
´´I J
matchSettingsView
¨¨ 
.
¨¨ 
DataContext
¨¨ )
=
¨¨* +$
matchSettingsViewModel
¨¨, B
;
¨¨B C
matchSettingsView
≠≠ 
.
≠≠ 
Show
≠≠ "
(
≠≠" #
)
≠≠# $
;
≠≠$ %%
CloseCurrentLobbyWindow
ÆÆ #
(
ÆÆ# $
)
ÆÆ$ %
;
ÆÆ% &
}
ØØ 	
private
±± 
async
±± 
Task
±± "
LoadUserProfileAsync
±± /
(
±±/ 0
)
±±0 1
{
≤≤ 	
if
≥≥ 
(
≥≥ 
!
≥≥ 
SessionManager
≥≥ 
.
≥≥  
Instance
≥≥  (
.
≥≥( )

IsLoggedIn
≥≥) 3
)
≥≥3 4
{
¥¥ 
Console
µµ 
.
µµ 
	WriteLine
µµ !
(
µµ! "
$str
µµ" N
)
µµN O
;
µµO P
return
∂∂ 
;
∂∂ 
}
∑∑ 
using
ππ 
(
ππ 
var
ππ 
client
ππ 
=
ππ 
new
ππ  #&
UserProfileServiceClient
ππ$ <
(
ππ< =
)
ππ= >
)
ππ> ?
{
∫∫ 
try
ªª 
{
ºº 
UserProfileDto
ΩΩ "
profileData
ΩΩ# .
=
ΩΩ/ 0
await
ΩΩ1 6
client
ΩΩ7 =
.
ΩΩ= >!
GetUserProfileAsync
ΩΩ> Q
(
ΩΩQ R
SessionManager
ΩΩR `
.
ΩΩ` a
Instance
ΩΩa i
.
ΩΩi j
CurrentUsername
ΩΩj y
)
ΩΩy z
;
ΩΩz {
if
øø 
(
øø 
profileData
øø #
==
øø$ &
null
øø' +
)
øø+ ,
{
¿¿ 

MessageBox
¡¡ "
.
¡¡" #
Show
¡¡# '
(
¡¡' (
Lang
¬¬  
.
¬¬  !#
alertProfileLoadError
¬¬! 6
,
¬¬6 7
Lang
√√  
.
√√  !
alertErrorTitle
√√! 0
,
√√0 1
MessageBoxButton
ƒƒ ,
.
ƒƒ, -
OK
ƒƒ- /
,
ƒƒ/ 0
MessageBoxImage
≈≈ +
.
≈≈+ ,
Error
≈≈, 1
)
≈≈1 2
;
≈≈2 3
return
∆∆ 
;
∆∆ 
}
«« 
UserProfileData
…… #
=
……$ %
profileData
……& 1
;
……1 2
Username
   
=
   
profileData
   *
.
  * +
Username
  + 3
;
  3 4
ProfileViewModel
ÀÀ $
=
ÀÀ% &
new
ÀÀ' *
ProfileViewModel
ÀÀ+ ;
(
ÀÀ; <
UserProfileData
ÀÀ< K
)
ÀÀK L
;
ÀÀL M
var
ÕÕ 

allAvatars
ÕÕ "
=
ÕÕ# $
await
ÕÕ% *
client
ÕÕ+ 1
.
ÕÕ1 2&
GetAvailableAvatarsAsync
ÕÕ2 J
(
ÕÕJ K
)
ÕÕK L
;
ÕÕL M
if
ŒŒ 
(
ŒŒ 

allAvatars
ŒŒ "
!=
ŒŒ# %
null
ŒŒ& *
)
ŒŒ* +
{
œœ 
var
–– 
userAvatarDto
–– )
=
––* +

allAvatars
––, 6
.
––6 7
FirstOrDefault
––7 E
(
––E F
a
––F G
=>
––H J
a
––K L
.
––L M
IdAvatar
––M U
==
––V X
profileData
––Y d
.
––d e
AvatarId
––e m
)
––m n
;
––n o
if
—— 
(
—— 
userAvatarDto
—— )
?
——) *
.
——* +

AvatarData
——+ 5
!=
——6 8
null
——9 =
)
——= >
{
““ 

UserAvatar
”” &
=
””' ( 
ConvertByteToImage
””) ;
(
””; <
userAvatarDto
””< I
.
””I J

AvatarData
””J T
)
””T U
;
””U V
}
‘‘ 
else
’’ 
{
÷÷ 
Console
◊◊ #
.
◊◊# $
	WriteLine
◊◊$ -
(
◊◊- .
$"
◊◊. 0
$str
◊◊0 >
{
◊◊> ?
profileData
◊◊? J
.
◊◊J K
AvatarId
◊◊K S
}
◊◊S T
$str
◊◊T o
"
◊◊o p
)
◊◊p q
;
◊◊q r
}
ÿÿ 
}
ŸŸ 
}
⁄⁄ 
catch
€€ 
(
€€ 
FaultException
€€ %

fexGeneral
€€& 0
)
€€0 1
{
‹‹ 

MessageBox
›› 
.
›› 
Show
›› #
(
››# $
Lang
ﬁﬁ 
.
ﬁﬁ )
alertProfileLoadServerError
ﬁﬁ 8
,
ﬁﬁ8 9
Lang
ﬂﬂ 
.
ﬂﬂ 
alertErrorTitle
ﬂﬂ ,
,
ﬂﬂ, -
MessageBoxButton
‡‡ (
.
‡‡( )
OK
‡‡) +
,
‡‡+ ,
MessageBoxImage
·· '
.
··' (
Error
··( -
)
··- .
;
··. /
Console
‚‚ 
.
‚‚ 
	WriteLine
‚‚ %
(
‚‚% &
$"
‚‚& (
$str
‚‚( C
{
‚‚C D

fexGeneral
‚‚D N
.
‚‚N O
Message
‚‚O V
}
‚‚V W
"
‚‚W X
)
‚‚X Y
;
‚‚Y Z
}
„„ 
catch
‰‰ 
(
‰‰ '
EndpointNotFoundException
‰‰ 0
ex
‰‰1 3
)
‰‰3 4
{
ÂÂ 

MessageBox
ÊÊ 
.
ÊÊ 
Show
ÊÊ #
(
ÊÊ# $
Lang
ÁÁ 
.
ÁÁ )
alertConnectionErrorMessage
ÁÁ 8
,
ÁÁ8 9
Lang
ËË 
.
ËË '
alertConnectionErrorTitle
ËË 6
,
ËË6 7
MessageBoxButton
ÈÈ (
.
ÈÈ( )
OK
ÈÈ) +
,
ÈÈ+ ,
MessageBoxImage
ÍÍ '
.
ÍÍ' (
Error
ÍÍ( -
)
ÍÍ- .
;
ÍÍ. /
Console
ÎÎ 
.
ÎÎ 
	WriteLine
ÎÎ %
(
ÎÎ% &
$"
ÎÎ& (
$str
ÎÎ( J
{
ÎÎJ K
ex
ÎÎK M
.
ÎÎM N
Message
ÎÎN U
}
ÎÎU V
"
ÎÎV W
)
ÎÎW X
;
ÎÎX Y
}
ÏÏ 
catch
ÌÌ 
(
ÌÌ 
	Exception
ÌÌ  
ex
ÌÌ! #
)
ÌÌ# $
{
ÓÓ 

MessageBox
ÔÔ 
.
ÔÔ 
Show
ÔÔ #
(
ÔÔ# $
Lang
 
.
 #
alertProfileLoadError
 2
,
2 3
Lang
ÒÒ 
.
ÒÒ 
alertErrorTitle
ÒÒ ,
,
ÒÒ, -
MessageBoxButton
ÚÚ (
.
ÚÚ( )
OK
ÚÚ) +
,
ÚÚ+ ,
MessageBoxImage
ÛÛ '
.
ÛÛ' (
Error
ÛÛ( -
)
ÛÛ- .
;
ÛÛ. /
Console
ÙÙ 
.
ÙÙ 
	WriteLine
ÙÙ %
(
ÙÙ% &
$"
ÙÙ& (
$str
ÙÙ( ?
{
ÙÙ? @
ex
ÙÙ@ B
.
ÙÙB C
Message
ÙÙC J
}
ÙÙJ K
"
ÙÙK L
)
ÙÙL M
;
ÙÙM N
}
ıı 
}
ˆˆ 
}
˜˜ 	
private
˘˘ 
void
˘˘  
ExecuteEditProfile
˘˘ '
(
˘˘' (
object
˘˘( .
	parameter
˘˘/ 8
)
˘˘8 9
{
˙˙ 	
if
˚˚ 
(
˚˚ 
ProfileViewModel
˚˚  
!=
˚˚! #
null
˚˚$ (
)
˚˚( )
{
¸¸ &
IsConfigurationPopupOpen
˝˝ (
=
˝˝) *
false
˝˝+ 0
;
˝˝0 1 
IsFriendsPopupOpen
˛˛ "
=
˛˛# $
false
˛˛% *
;
˛˛* +
IsChatPopupOpen
ˇˇ 
=
ˇˇ  !
false
ˇˇ" '
;
ˇˇ' ( 
IsProfilePopupOpen
ÄÄ "
=
ÄÄ# $
!
ÄÄ% & 
IsProfilePopupOpen
ÄÄ& 8
;
ÄÄ8 9
}
ÅÅ 
else
ÇÇ 
{
ÉÉ 

MessageBox
ÑÑ 
.
ÑÑ 
Show
ÑÑ 
(
ÑÑ  
Lang
ÖÖ 
.
ÖÖ #
alertProfileNotLoaded
ÖÖ .
,
ÖÖ. /
Lang
ÜÜ 
.
ÜÜ 
alertInfoTitle
ÜÜ '
,
ÜÜ' (
MessageBoxButton
áá $
.
áá$ %
OK
áá% '
,
áá' (
MessageBoxImage
àà #
.
àà# $
Information
àà$ /
)
àà/ 0
;
àà0 1
}
ââ 
}
ää 	
private
åå 
void
åå !
ExecuteSelectAvatar
åå (
(
åå( )
object
åå) /
	parameter
åå0 9
)
åå9 :
{
çç 	
if
éé 
(
éé 
UserProfileData
éé 
==
éé  "
null
éé# '
)
éé' (
{
èè 

MessageBox
êê 
.
êê 
Show
êê 
(
êê  
Lang
ëë 
.
ëë #
alertProfileNotLoaded
ëë .
,
ëë. /
Lang
íí 
.
íí 
alertInfoTitle
íí '
,
íí' (
MessageBoxButton
ìì $
.
ìì$ %
OK
ìì% '
,
ìì' (
MessageBoxImage
îî #
.
îî# $
Information
îî$ /
)
îî/ 0
;
îî0 1
return
ïï 
;
ïï 
}
ññ 
var
òò 
selectAvatarView
òò  
=
òò! "
new
òò# &
SelectAvatarView
òò' 7
(
òò7 8
)
òò8 9
;
òò9 :
var
ôô #
selectAvatarViewModel
ôô %
=
ôô& '
new
ôô( +#
SelectAvatarViewModel
ôô, A
(
ôôA B
UserProfileData
ôôB Q
.
ôôQ R
AvatarId
ôôR Z
)
ôôZ [
;
ôô[ \#
selectAvatarViewModel
öö !
.
öö! "
AvatarSelected
öö" 0
+=
öö1 3
OnAvatarSelected
öö4 D
;
ööD E
selectAvatarView
õõ 
.
õõ 
DataContext
õõ (
=
õõ) *#
selectAvatarViewModel
õõ+ @
;
õõ@ A
selectAvatarView
úú 
.
úú 

ShowDialog
úú '
(
úú' (
)
úú( )
;
úú) *#
selectAvatarViewModel
ùù !
.
ùù! "
AvatarSelected
ùù" 0
-=
ùù1 3
OnAvatarSelected
ùù4 D
;
ùùD E
}
ûû 	
private
†† 
async
†† 
void
†† 
OnAvatarSelected
†† +
(
††+ ,
AvatarModel
††, 7
	newAvatar
††8 A
)
††A B
{
°° 	
if
¢¢ 
(
¢¢ 
	newAvatar
¢¢ 
==
¢¢ 
null
¢¢ !
||
¢¢" $
UserProfileData
¢¢% 4
==
¢¢5 7
null
¢¢8 <
||
¢¢= ?
	newAvatar
¢¢@ I
.
¢¢I J
Id
¢¢J L
==
¢¢M O
UserProfileData
¢¢P _
.
¢¢_ `
AvatarId
¢¢` h
)
¢¢h i
{
££ 
return
§§ 
;
§§ 
}
•• 
UserProfileData
ßß 
.
ßß 
AvatarId
ßß $
=
ßß% &
	newAvatar
ßß' 0
.
ßß0 1
Id
ßß1 3
;
ßß3 4
using
©© 
(
©© 
var
©© 
client
©© 
=
©© 
new
©©  #&
UserProfileServiceClient
©©$ <
(
©©< =
)
©©= >
)
©©> ?
{
™™ 
try
´´ 
{
¨¨  
OperationResultDto
≠≠ &
result
≠≠' -
=
≠≠. /
await
≠≠0 5
client
≠≠6 <
.
≠≠< = 
UpdateProfileAsync
≠≠= O
(
≠≠O P
Username
≠≠P X
,
≠≠X Y
UserProfileData
≠≠Z i
)
≠≠i j
;
≠≠j k
if
ÆÆ 
(
ÆÆ 
result
ÆÆ 
.
ÆÆ 
Success
ÆÆ &
)
ÆÆ& '
{
ØØ 

UserAvatar
∞∞ "
=
∞∞# $
	newAvatar
∞∞% .
.
∞∞. /
ImageSource
∞∞/ :
;
∞∞: ;

MessageBox
±± "
.
±±" #
Show
±±# '
(
±±' (
Lang
≤≤  
.
≤≤  !&
alertAvatarUpdateSuccess
≤≤! 9
,
≤≤9 :
Lang
≥≥  
.
≥≥  !
alertSuccessTitle
≥≥! 2
,
≥≥2 3
MessageBoxButton
¥¥ ,
.
¥¥, -
OK
¥¥- /
,
¥¥/ 0
MessageBoxImage
µµ +
.
µµ+ ,
Information
µµ, 7
)
µµ7 8
;
µµ8 9
}
∂∂ 
else
∑∑ 
{
∏∏ 

MessageBox
ππ "
.
ππ" #
Show
ππ# '
(
ππ' (
result
∫∫ "
.
∫∫" #
Message
∫∫# *
,
∫∫* +
Lang
ªª  
.
ªª  !)
alertAvatarUpdateErrorTitle
ªª! <
,
ªª< =
MessageBoxButton
ºº ,
.
ºº, -
OK
ºº- /
,
ºº/ 0
MessageBoxImage
ΩΩ +
.
ΩΩ+ ,
Warning
ΩΩ, 3
)
ΩΩ3 4
;
ΩΩ4 5
}
ææ 
}
øø 
catch
¿¿ 
(
¿¿ 
FaultException
¿¿ %

fexGeneral
¿¿& 0
)
¿¿0 1
{
¡¡ 

MessageBox
¬¬ 
.
¬¬ 
Show
¬¬ #
(
¬¬# $
Lang
√√ 
.
√√ %
alertServerErrorMessage
√√ 4
,
√√4 5
Lang
ƒƒ 
.
ƒƒ )
alertAvatarUpdateErrorTitle
ƒƒ 8
,
ƒƒ8 9
MessageBoxButton
≈≈ (
.
≈≈( )
OK
≈≈) +
,
≈≈+ ,
MessageBoxImage
∆∆ '
.
∆∆' (
Error
∆∆( -
)
∆∆- .
;
∆∆. /
Console
«« 
.
«« 
	WriteLine
«« %
(
««% &
$"
««& (
$str
««( A
{
««A B

fexGeneral
««B L
.
««L M
Message
««M T
}
««T U
"
««U V
)
««V W
;
««W X
}
»» 
catch
…… 
(
…… '
EndpointNotFoundException
…… 0
ex
……1 3
)
……3 4
{
   

MessageBox
ÀÀ 
.
ÀÀ 
Show
ÀÀ #
(
ÀÀ# $
Lang
ÃÃ 
.
ÃÃ )
alertConnectionErrorMessage
ÃÃ 8
,
ÃÃ8 9
Lang
ÕÕ 
.
ÕÕ )
alertAvatarUpdateErrorTitle
ÕÕ 8
,
ÕÕ8 9
MessageBoxButton
ŒŒ (
.
ŒŒ( )
OK
ŒŒ) +
,
ŒŒ+ ,
MessageBoxImage
œœ '
.
œœ' (
Error
œœ( -
)
œœ- .
;
œœ. /
Console
–– 
.
–– 
	WriteLine
–– %
(
––% &
$"
––& (
$str
––( H
{
––H I
ex
––I K
.
––K L
Message
––L S
}
––S T
"
––T U
)
––U V
;
––V W
}
—— 
catch
““ 
(
““ 
	Exception
““  
ex
““! #
)
““# $
{
”” 

MessageBox
‘‘ 
.
‘‘ 
Show
‘‘ #
(
‘‘# $
Lang
’’ 
.
’’ +
alertAvatarUpdateUnknownError
’’ :
,
’’: ;
Lang
÷÷ 
.
÷÷ )
alertAvatarUpdateErrorTitle
÷÷ 8
,
÷÷8 9
MessageBoxButton
◊◊ (
.
◊◊( )
OK
◊◊) +
,
◊◊+ ,
MessageBoxImage
ÿÿ '
.
ÿÿ' (
Error
ÿÿ( -
)
ÿÿ- .
;
ÿÿ. /
Console
ŸŸ 
.
ŸŸ 
	WriteLine
ŸŸ %
(
ŸŸ% &
$"
ŸŸ& (
$str
ŸŸ( @
{
ŸŸ@ A
ex
ŸŸA C
.
ŸŸC D
Message
ŸŸD K
}
ŸŸK L
"
ŸŸL M
)
ŸŸM N
;
ŸŸN O
}
⁄⁄ 
}
€€ 
}
‹‹ 	
public
ﬁﬁ 
static
ﬁﬁ 
BitmapImage
ﬁﬁ ! 
ConvertByteToImage
ﬁﬁ" 4
(
ﬁﬁ4 5
byte
ﬁﬁ5 9
[
ﬁﬁ9 :
]
ﬁﬁ: ;

imageBytes
ﬁﬁ< F
)
ﬁﬁF G
{
ﬂﬂ 	
if
‡‡ 
(
‡‡ 

imageBytes
‡‡ 
==
‡‡ 
null
‡‡ "
||
‡‡# %

imageBytes
‡‡& 0
.
‡‡0 1
Length
‡‡1 7
==
‡‡8 :
$num
‡‡; <
)
‡‡< =
{
·· 
return
‚‚ 
null
‚‚ 
;
‚‚ 
}
„„ 
var
ÂÂ 
image
ÂÂ 
=
ÂÂ 
new
ÂÂ 
BitmapImage
ÂÂ '
(
ÂÂ' (
)
ÂÂ( )
;
ÂÂ) *
using
ÊÊ 
(
ÊÊ 
var
ÊÊ 
mem
ÊÊ 
=
ÊÊ 
new
ÊÊ  
MemoryStream
ÊÊ! -
(
ÊÊ- .

imageBytes
ÊÊ. 8
)
ÊÊ8 9
)
ÊÊ9 :
{
ÁÁ 
mem
ËË 
.
ËË 
Position
ËË 
=
ËË 
$num
ËË  
;
ËË  !
image
ÈÈ 
.
ÈÈ 
	BeginInit
ÈÈ 
(
ÈÈ  
)
ÈÈ  !
;
ÈÈ! "
image
ÍÍ 
.
ÍÍ 
CreateOptions
ÍÍ #
=
ÍÍ$ %!
BitmapCreateOptions
ÍÍ& 9
.
ÍÍ9 :!
PreservePixelFormat
ÍÍ: M
;
ÍÍM N
image
ÎÎ 
.
ÎÎ 
CacheOption
ÎÎ !
=
ÎÎ" #
BitmapCacheOption
ÎÎ$ 5
.
ÎÎ5 6
OnLoad
ÎÎ6 <
;
ÎÎ< =
image
ÏÏ 
.
ÏÏ 
	UriSource
ÏÏ 
=
ÏÏ  !
null
ÏÏ" &
;
ÏÏ& '
image
ÌÌ 
.
ÌÌ 
StreamSource
ÌÌ "
=
ÌÌ# $
mem
ÌÌ% (
;
ÌÌ( )
image
ÓÓ 
.
ÓÓ 
EndInit
ÓÓ 
(
ÓÓ 
)
ÓÓ 
;
ÓÓ  
}
ÔÔ 
image
 
.
 
Freeze
 
(
 
)
 
;
 
return
ÒÒ 
image
ÒÒ 
;
ÒÒ 
}
ÚÚ 	
public
ÙÙ 
void
ÙÙ %
CleanupSocialConnection
ÙÙ +
(
ÙÙ+ ,
)
ÙÙ, -
{
ıı 	
FriendsViewModel
ˆˆ 
?
ˆˆ 
.
ˆˆ 
Cleanup
ˆˆ %
(
ˆˆ% &
)
ˆˆ& '
;
ˆˆ' ($
DirectMessageViewModel
˜˜ "
?
˜˜" #
.
˜˜# $
Cleanup
˜˜$ +
(
˜˜+ ,
)
˜˜, -
;
˜˜- .!
SocialClientManager
¯¯ 
.
¯¯  
Instance
¯¯  (
.
¯¯( )
Cleanup
¯¯) 0
(
¯¯0 1
)
¯¯1 2
;
¯¯2 3
Console
˘˘ 
.
˘˘ 
	WriteLine
˘˘ 
(
˘˘ 
$str
˘˘ 9
)
˘˘9 :
;
˘˘: ;
}
˙˙ 	
private
¸¸ 
static
¸¸ 
void
¸¸ %
CloseCurrentLobbyWindow
¸¸ 3
(
¸¸3 4
)
¸¸4 5
{
˝˝ 	
Window
˛˛ 
lobbyWindow
˛˛ 
=
˛˛  
Application
˛˛! ,
.
˛˛, -
Current
˛˛- 4
.
˛˛4 5
Windows
˛˛5 <
.
˛˛< =
OfType
˛˛= C
<
˛˛C D
	LobbyView
˛˛D M
>
˛˛M N
(
˛˛N O
)
˛˛O P
.
˛˛P Q
FirstOrDefault
˛˛Q _
(
˛˛_ `
)
˛˛` a
;
˛˛a b
if
ˇˇ 
(
ˇˇ 
lobbyWindow
ˇˇ 
!=
ˇˇ 
null
ˇˇ #
)
ˇˇ# $
{
ÄÄ 
lobbyWindow
ÅÅ 
.
ÅÅ 
Close
ÅÅ !
(
ÅÅ! "
)
ÅÅ" #
;
ÅÅ# $
}
ÇÇ 
else
ÉÉ 
{
ÑÑ 

MessageBox
ÖÖ 
.
ÖÖ 
Show
ÖÖ 
(
ÖÖ  
Lang
ÜÜ 
.
ÜÜ +
alertLobbyWindowNotFoundError
ÜÜ 6
,
ÜÜ6 7
Lang
áá 
.
áá 
alertErrorTitle
áá (
,
áá( )
MessageBoxButton
àà $
.
àà$ %
OK
àà% '
,
àà' (
MessageBoxImage
ââ #
.
ââ# $
Warning
ââ$ +
)
ââ+ ,
;
ââ, -
Console
ää 
.
ää 
	WriteLine
ää !
(
ää! "
$str
ää" V
)
ääV W
;
ääW X
}
ãã 
}
åå 	
private
éé 
void
éé  
ExecuteCloseWindow
éé '
(
éé' (
object
éé( .
	parameter
éé/ 8
)
éé8 9
{
èè 	
if
êê 
(
êê 
	parameter
êê 
is
êê 
Window
êê #
)
êê# $
{
ëë %
CleanupSocialConnection
íí '
(
íí' (
)
íí( )
;
íí) *
Application
ìì 
.
ìì 
Current
ìì #
.
ìì# $
Shutdown
ìì$ ,
(
ìì, -
)
ìì- .
;
ìì. /
}
îî 
}
ïï 	
private
óó 
static
óó 
void
óó #
ExecuteMaximizeWindow
óó 1
(
óó1 2
object
óó2 8
	parameter
óó9 B
)
óóB C
{
òò 	
if
ôô 
(
ôô 
	parameter
ôô 
is
ôô 
Window
ôô #
window
ôô$ *
)
ôô* +
{
öö 
window
õõ 
.
õõ 
WindowState
õõ "
=
õõ# $
window
õõ% +
.
õõ+ ,
WindowState
õõ, 7
==
õõ8 :
WindowState
õõ; F
.
õõF G
	Maximized
õõG P
?
õõQ R
WindowState
õõS ^
.
õõ^ _
Normal
õõ_ e
:
õõf g
WindowState
õõh s
.
õõs t
	Maximized
õõt }
;
õõ} ~
}
úú 
}
ùù 	
private
üü 
static
üü 
void
üü #
ExecuteMinimizeWindow
üü 1
(
üü1 2
object
üü2 8
	parameter
üü9 B
)
üüB C
{
†† 	
if
°° 
(
°° 
	parameter
°° 
is
°° 
Window
°° #
window
°°$ *
)
°°* +
{
¢¢ 
window
££ 
.
££ 
WindowState
££ "
=
££# $
WindowState
££% 0
.
££0 1
	Minimized
££1 :
;
££: ;
}
§§ 
}
•• 	
}
¶¶ 
}ßß ’™
òC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Lobby\FriendsViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Lobby& +
{ 
public 

class 
FriendsViewModel !
:" #
ViewModelBase$ 1
,1 2
IDisposable3 >
{ 
private 
static 
SocialServiceClient *
Client+ 1
=>2 4
SocialClientManager5 H
.H I
InstanceI Q
.Q R
ClientR X
;X Y
public  
ObservableCollection #
<# $
FriendViewModel$ 3
>3 4
Friends5 <
{= >
get? B
;B C
}D E
public  
ObservableCollection #
<# $"
FriendRequestViewModel$ :
>: ;
FriendRequests< J
{K L
getM P
;P Q
}R S
private  
ObservableCollection $
<$ %
UserProfileDto% 3
>3 4
_searchResults5 C
;C D
public  
ObservableCollection #
<# $
UserProfileDto$ 2
>2 3
SearchResults4 A
{ 	
get 
{ 
return 
_searchResults '
;' (
}) *
set 
{ 
if 
( 
_searchResults "
!=# %
value& +
)+ ,
{ 
_searchResults "
=# $
value% *
;* +
OnPropertyChanged %
(% &
)& '
;' (
}   
}!! 
}"" 	
private$$ 
string$$ 
_searchText$$ "
;$$" #
public%% 
string%% 

SearchText%%  
{&& 	
get'' 
{'' 
return'' 
_searchText'' $
;''$ %
}''& '
set(( 
{)) 
if** 
(** 
_searchText** 
!=**  "
value**# (
)**( )
{++ 
_searchText,, 
=,,  !
value,," '
;,,' (
OnPropertyChanged-- %
(--% &
)--& '
;--' (
}.. 
}// 
}00 	
public22 
ICommand22 
SearchCommand22 %
{22& '
get22( +
;22+ ,
}22- .
public33 
ICommand33  
InviteByEmailCommand33 ,
{33- .
get33/ 2
;332 3
}334 5
public44 
ICommand44 $
SendFriendRequestCommand44 0
{441 2
get443 6
;446 7
}448 9
public66 
FriendsViewModel66 
(66  
)66  !
{77 	
Friends88 
=88 
new88  
ObservableCollection88 .
<88. /
FriendViewModel88/ >
>88> ?
(88? @
)88@ A
;88A B
FriendRequests99 
=99 
new99   
ObservableCollection99! 5
<995 6"
FriendRequestViewModel996 L
>99L M
(99M N
)99N O
;99O P
SearchResults:: 
=:: 
new::  
ObservableCollection::  4
<::4 5
UserProfileDto::5 C
>::C D
(::D E
)::E F
;::F G
SearchCommand<< 
=<< 
new<< 
RelayCommand<<  ,
(<<, -
async<<- 2
	parameter<<3 <
=><<= ?
await<<@ E
SearchUsersAsync<<F V
(<<V W
)<<W X
,<<X Y
	parameter<<Z c
=><<d f$
CanExecuteNetworkActions<<g 
(	<< Ä
)
<<Ä Å
)
<<Å Ç
;
<<Ç É 
InviteByEmailCommand==  
===! "
new==# &
RelayCommand==' 3
(==3 4
InviteByEmail==4 A
,==A B
	parameter==C L
=>==M O$
CanExecuteNetworkActions==P h
(==h i
)==i j
)==j k
;==k l$
SendFriendRequestCommand>> $
=>>% &
new>>' *
RelayCommand>>+ 7
(>>7 8
SendFriendRequest>>8 I
,>>I J
	parameter>>K T
=>>>U W$
CanExecuteNetworkActions>>X p
(>>p q
)>>q r
)>>r s
;>>s t
SubscribeToEvents@@ 
(@@ 
)@@ 
;@@  
ifBB 
(BB $
CanExecuteNetworkActionsBB (
(BB( )
)BB) *
)BB* +
{CC '
LoadFriendsAndRequestsAsyncDD +
(DD+ ,
)DD, -
;DD- .
}EE 
elseFF 
{GG 
ConsoleHH 
.HH 
	WriteLineHH !
(HH! "
$strHH" l
)HHl m
;HHm n
}II 
}JJ 	
privateLL 
boolLL $
CanExecuteNetworkActionsLL -
(LL- .
)LL. /
{MM 	
returnNN 
ClientNN 
!=NN 
nullNN !
&&NN" $
ClientNN% +
.NN+ ,
StateNN, 1
==NN2 4
CommunicationStateNN5 G
.NNG H
OpenedNNH N
;NNN O
}OO 	
privateQQ 
asyncQQ 
TaskQQ '
LoadFriendsAndRequestsAsyncQQ 6
(QQ6 7
)QQ7 8
{RR 	
stringSS 
usernameSS 
=SS 
SessionManagerSS ,
.SS, -
InstanceSS- 5
.SS5 6
CurrentUsernameSS6 E
;SSE F
ifUU 
(UU 
stringUU 
.UU 
IsNullOrEmptyUU $
(UU$ %
usernameUU% -
)UU- .
||UU/ 1
!UU2 3$
CanExecuteNetworkActionsUU3 K
(UUK L
)UUL M
)UUM N
{VV 
ConsoleWW 
.WW 
	WriteLineWW !
(WW! "
$"WW" $
$strWW$ b
{WWb c
usernameWWc k
}WWk l
$strWWl {
{WW{ |%
CanExecuteNetworkActions	WW| î
(
WWî ï
)
WWï ñ
}
WWñ ó
"
WWó ò
)
WWò ô
;
WWô ö
returnXX 
;XX 
}YY 
try[[ 
{\\ 
var]] 
friends]] 
=]] 
await]] #
Client]]$ *
.]]* +
GetFriendsListAsync]]+ >
(]]> ?
username]]? G
)]]G H
;]]H I
Application^^ 
.^^ 
Current^^ #
.^^# $

Dispatcher^^$ .
.^^. /
Invoke^^/ 5
(^^5 6
(^^6 7
)^^7 8
=>^^9 ;
{__ 
Friends`` 
.`` 
Clear`` !
(``! "
)``" #
;``# $
ifaa 
(aa 
friendsaa 
!=aa  "
nullaa# '
)aa' (
{bb 
foreachcc 
(cc  !
varcc! $
fcc% &
incc' )
friendscc* 1
)cc1 2
{dd 
Friendsee #
.ee# $
Addee$ '
(ee' (
newee( +
FriendViewModelee, ;
{ee< =
Usernameee> F
=eeG H
feeI J
.eeJ K
UsernameeeK S
,eeS T
IsOnlineeeU ]
=ee^ _
fee` a
.eea b
IsOnlineeeb j
}eek l
)eel m
;eem n
}ff 
}gg 
}hh 
)hh 
;hh 
varjj 
requestsjj 
=jj 
awaitjj $
Clientjj% +
.jj+ ,"
GetFriendRequestsAsyncjj, B
(jjB C
usernamejjC K
)jjK L
;jjL M
Applicationkk 
.kk 
Currentkk #
.kk# $

Dispatcherkk$ .
.kk. /
Invokekk/ 5
(kk5 6
(kk6 7
)kk7 8
=>kk9 ;
{ll 
FriendRequestsmm "
.mm" #
Clearmm# (
(mm( )
)mm) *
;mm* +
ifnn 
(nn 
requestsnn  
!=nn! #
nullnn$ (
)nn( )
{oo 
foreachpp 
(pp  !
varpp! $
rpp% &
inpp' )
requestspp* 2
)pp2 3
{qq 
FriendRequestsrr *
.rr* +
Addrr+ .
(rr. /
newrr/ 2"
FriendRequestViewModelrr3 I
(rrI J
thisrrJ N
)rrN O
{rrP Q
RequesterUsernamerrR c
=rrd e
rrrf g
.rrg h
RequesterUsernamerrh y
}rrz {
)rr{ |
;rr| }
}ss 
}tt 
}uu 
)uu 
;uu 
}vv 
catchww 
(ww 
FaultExceptionww !

fexGeneralww" ,
)ww, -
{xx 

MessageBoxyy 
.yy 
Showyy 
(yy  
Langzz 
.zz  
alertFriendLoadErrorzz -
,zz- .
Lang{{ 
.{{ 
alertErrorTitle{{ (
,{{( )
MessageBoxButton|| $
.||$ %
OK||% '
,||' (
MessageBoxImage}} #
.}}# $
Error}}$ )
)}}) *
;}}* +
Console~~ 
.~~ 
	WriteLine~~ !
(~~! "
$"~~" $
$str~~$ H
{~~H I

fexGeneral~~I S
.~~S T
Message~~T [
}~~[ \
"~~\ ]
)~~] ^
;~~^ _
} 
catch
ÄÄ 
(
ÄÄ '
EndpointNotFoundException
ÄÄ ,
ex
ÄÄ- /
)
ÄÄ/ 0
{
ÅÅ 

MessageBox
ÇÇ 
.
ÇÇ 
Show
ÇÇ 
(
ÇÇ  
Lang
ÉÉ 
.
ÉÉ )
alertConnectionErrorMessage
ÉÉ 4
,
ÉÉ4 5
Lang
ÑÑ 
.
ÑÑ '
alertConnectionErrorTitle
ÑÑ 2
,
ÑÑ2 3
MessageBoxButton
ÖÖ $
.
ÖÖ$ %
OK
ÖÖ% '
,
ÖÖ' (
MessageBoxImage
ÜÜ #
.
ÜÜ# $
Error
ÜÜ$ )
)
ÜÜ) *
;
ÜÜ* +
Console
áá 
.
áá 
	WriteLine
áá !
(
áá! "
$"
áá" $
$str
áá$ O
{
ááO P
ex
ááP R
.
ááR S
Message
ááS Z
}
ááZ [
"
áá[ \
)
áá\ ]
;
áá] ^
}
àà 
catch
ââ 
(
ââ 
	Exception
ââ 
ex
ââ 
)
ââ  
{
ää 

MessageBox
ãã 
.
ãã 
Show
ãã 
(
ãã  
Lang
åå 
.
åå "
alertFriendLoadError
åå -
,
åå- .
Lang
çç 
.
çç 
alertErrorTitle
çç (
,
çç( )
MessageBoxButton
éé $
.
éé$ %
OK
éé% '
,
éé' (
MessageBoxImage
èè #
.
èè# $
Error
èè$ )
)
èè) *
;
èè* +
Console
êê 
.
êê 
	WriteLine
êê !
(
êê! "
$"
êê" $
$str
êê$ H
{
êêH I
ex
êêI K
.
êêK L
Message
êêL S
}
êêS T
"
êêT U
)
êêU V
;
êêV W
}
ëë 
}
íí 	
private
îî 
async
îî 
Task
îî 
SearchUsersAsync
îî +
(
îî+ ,
)
îî, -
{
ïï 	
if
ññ 
(
ññ 
string
ññ 
.
ññ  
IsNullOrWhiteSpace
ññ )
(
ññ) *

SearchText
ññ* 4
)
ññ4 5
)
ññ5 6
{
óó 
Application
òò 
.
òò 
Current
òò #
.
òò# $

Dispatcher
òò$ .
.
òò. /
Invoke
òò/ 5
(
òò5 6
(
òò6 7
)
òò7 8
=>
òò9 ;
SearchResults
òò< I
.
òòI J
Clear
òòJ O
(
òòO P
)
òòP Q
)
òòQ R
;
òòR S
return
ôô 
;
ôô 
}
öö 
if
úú 
(
úú 
!
úú &
CanExecuteNetworkActions
úú )
(
úú) *
)
úú* +
)
úú+ ,
{
ùù 
Console
ûû 
.
ûû 
	WriteLine
ûû !
(
ûû! "
$str
ûû" ]
)
ûû] ^
;
ûû^ _
return
üü 
;
üü 
}
†† 
try
¢¢ 
{
££ 
var
§§ 
users
§§ 
=
§§ 
await
§§ !
Client
§§" (
.
§§( )
SearchUsersAsync
§§) 9
(
§§9 :

SearchText
§§: D
,
§§D E
SessionManager
§§F T
.
§§T U
Instance
§§U ]
.
§§] ^
CurrentUsername
§§^ m
)
§§m n
;
§§n o
Application
•• 
.
•• 
Current
•• #
.
••# $

Dispatcher
••$ .
.
••. /
Invoke
••/ 5
(
••5 6
(
••6 7
)
••7 8
=>
••9 ;
{
¶¶ 
SearchResults
ßß !
.
ßß! "
Clear
ßß" '
(
ßß' (
)
ßß( )
;
ßß) *
if
®® 
(
®® 
users
®® 
!=
®®  
null
®®! %
)
®®% &
{
©© 
foreach
™™ 
(
™™  !
var
™™! $
u
™™% &
in
™™' )
users
™™* /
)
™™/ 0
{
´´ 
SearchResults
¨¨ )
.
¨¨) *
Add
¨¨* -
(
¨¨- .
u
¨¨. /
)
¨¨/ 0
;
¨¨0 1
}
≠≠ 
}
ÆÆ 
}
ØØ 
)
ØØ 
;
ØØ 
}
∞∞ 
catch
±± 
(
±± 
FaultException
±± !

fexGeneral
±±" ,
)
±±, -
{
≤≤ 

MessageBox
≥≥ 
.
≥≥ 
Show
≥≥ 
(
≥≥  
Lang
¥¥ 
.
¥¥ $
alertFriendSearchError
¥¥ /
,
¥¥/ 0
Lang
µµ 
.
µµ 
alertErrorTitle
µµ (
,
µµ( )
MessageBoxButton
∂∂ $
.
∂∂$ %
OK
∂∂% '
,
∂∂' (
MessageBoxImage
∑∑ #
.
∑∑# $
Error
∑∑$ )
)
∑∑) *
;
∑∑* +
Console
∏∏ 
.
∏∏ 
	WriteLine
∏∏ !
(
∏∏! "
$"
∏∏" $
$str
∏∏$ ?
{
∏∏? @

fexGeneral
∏∏@ J
.
∏∏J K
Message
∏∏K R
}
∏∏R S
"
∏∏S T
)
∏∏T U
;
∏∏U V
}
ππ 
catch
∫∫ 
(
∫∫ '
EndpointNotFoundException
∫∫ ,
ex
∫∫- /
)
∫∫/ 0
{
ªª 

MessageBox
ºº 
.
ºº 
Show
ºº 
(
ºº  
Lang
ΩΩ 
.
ΩΩ )
alertConnectionErrorMessage
ΩΩ 4
,
ΩΩ4 5
Lang
ææ 
.
ææ '
alertConnectionErrorTitle
ææ 2
,
ææ2 3
MessageBoxButton
øø $
.
øø$ %
OK
øø% '
,
øø' (
MessageBoxImage
¿¿ #
.
¿¿# $
Error
¿¿$ )
)
¿¿) *
;
¿¿* +
Console
¡¡ 
.
¡¡ 
	WriteLine
¡¡ !
(
¡¡! "
$"
¡¡" $
$str
¡¡$ F
{
¡¡F G
ex
¡¡G I
.
¡¡I J
Message
¡¡J Q
}
¡¡Q R
"
¡¡R S
)
¡¡S T
;
¡¡T U
}
¬¬ 
catch
√√ 
(
√√ 
	Exception
√√ 
ex
√√ 
)
√√  
{
ƒƒ 

MessageBox
≈≈ 
.
≈≈ 
Show
≈≈ 
(
≈≈  
Lang
∆∆ 
.
∆∆ $
alertFriendSearchError
∆∆ /
,
∆∆/ 0
Lang
«« 
.
«« 
alertErrorTitle
«« (
,
««( )
MessageBoxButton
»» $
.
»»$ %
OK
»»% '
,
»»' (
MessageBoxImage
…… #
.
……# $
Error
……$ )
)
……) *
;
……* +
Console
   
.
   
	WriteLine
   !
(
  ! "
$"
  " $
$str
  $ 3
{
  3 4
ex
  4 6
.
  6 7
Message
  7 >
}
  > ?
"
  ? @
)
  @ A
;
  A B
}
ÀÀ 
}
ÃÃ 	
private
ŒŒ 
void
ŒŒ 
SendFriendRequest
ŒŒ &
(
ŒŒ& '
object
ŒŒ' -
	parameter
ŒŒ. 7
)
ŒŒ7 8
{
œœ 	
if
–– 
(
–– 
	parameter
–– 
is
–– 
UserProfileDto
–– +
userProfile
––, 7
&&
––8 :&
CanExecuteNetworkActions
––; S
(
––S T
)
––T U
)
––U V
{
—— 
try
““ 
{
”” 
Client
‘‘ 
.
‘‘ 
SendFriendRequest
‘‘ ,
(
‘‘, -
SessionManager
‘‘- ;
.
‘‘; <
Instance
‘‘< D
.
‘‘D E
CurrentUsername
‘‘E T
,
‘‘T U
userProfile
‘‘V a
.
‘‘a b
Username
‘‘b j
)
‘‘j k
;
‘‘k l
Application
’’ 
.
’’  
Current
’’  '
.
’’' (

Dispatcher
’’( 2
.
’’2 3
Invoke
’’3 9
(
’’9 :
(
’’: ;
)
’’; <
=>
’’= ?
{
÷÷ 
SearchResults
◊◊ %
.
◊◊% &
Remove
◊◊& ,
(
◊◊, -
userProfile
◊◊- 8
)
◊◊8 9
;
◊◊9 :
}
ÿÿ 
)
ÿÿ 
;
ÿÿ 

MessageBox
ŸŸ 
.
ŸŸ 
Show
ŸŸ #
(
ŸŸ# $
string
⁄⁄ 
.
⁄⁄ 
Format
⁄⁄ %
(
⁄⁄% &
Lang
⁄⁄& *
.
⁄⁄* +$
alertFriendRequestSent
⁄⁄+ A
,
⁄⁄A B
userProfile
⁄⁄C N
.
⁄⁄N O
Username
⁄⁄O W
)
⁄⁄W X
,
⁄⁄X Y
Lang
€€ 
.
€€ 
alertSuccessTitle
€€ .
,
€€. /
MessageBoxButton
‹‹ (
.
‹‹( )
OK
‹‹) +
,
‹‹+ ,
MessageBoxImage
›› '
.
››' (
Information
››( 3
)
››3 4
;
››4 5
}
ﬁﬁ 
catch
ﬂﬂ 
(
ﬂﬂ 
FaultException
ﬂﬂ %
<
ﬂﬂ% &
string
ﬂﬂ& ,
>
ﬂﬂ, -
fex
ﬂﬂ. 1
)
ﬂﬂ1 2
{
‡‡ 

MessageBox
·· 
.
·· 
Show
·· #
(
··# $
fex
‚‚ 
.
‚‚ 
Detail
‚‚ "
,
‚‚" #
Lang
„„ 
.
„„ *
alertFriendRequestErrorTitle
„„ 9
,
„„9 :
MessageBoxButton
‰‰ (
.
‰‰( )
OK
‰‰) +
,
‰‰+ ,
MessageBoxImage
ÂÂ '
.
ÂÂ' (
Warning
ÂÂ( /
)
ÂÂ/ 0
;
ÂÂ0 1
Console
ÊÊ 
.
ÊÊ 
	WriteLine
ÊÊ %
(
ÊÊ% &
$"
ÊÊ& (
$str
ÊÊ( ?
{
ÊÊ? @
fex
ÊÊ@ C
.
ÊÊC D
Detail
ÊÊD J
}
ÊÊJ K
"
ÊÊK L
)
ÊÊL M
;
ÊÊM N
}
ÁÁ 
catch
ËË 
(
ËË $
CommunicationException
ËË -
commEx
ËË. 4
)
ËË4 5
{
ÈÈ 

MessageBox
ÍÍ 
.
ÍÍ 
Show
ÍÍ #
(
ÍÍ# $
Lang
ÎÎ 
.
ÎÎ )
alertFriendRequestSendError
ÎÎ 8
,
ÎÎ8 9
Lang
ÏÏ 
.
ÏÏ *
alertFriendRequestErrorTitle
ÏÏ 9
,
ÏÏ9 :
MessageBoxButton
ÌÌ (
.
ÌÌ( )
OK
ÌÌ) +
,
ÌÌ+ ,
MessageBoxImage
ÓÓ '
.
ÓÓ' (
Error
ÓÓ( -
)
ÓÓ- .
;
ÓÓ. /
Console
ÔÔ 
.
ÔÔ 
	WriteLine
ÔÔ %
(
ÔÔ% &
$"
ÔÔ& (
$str
ÔÔ( M
{
ÔÔM N
commEx
ÔÔN T
.
ÔÔT U
Message
ÔÔU \
}
ÔÔ\ ]
"
ÔÔ] ^
)
ÔÔ^ _
;
ÔÔ_ `
}
 
catch
ÒÒ 
(
ÒÒ 
	Exception
ÒÒ  
ex
ÒÒ! #
)
ÒÒ# $
{
ÚÚ 

MessageBox
ÛÛ 
.
ÛÛ 
Show
ÛÛ #
(
ÛÛ# $
Lang
ÙÙ 
.
ÙÙ )
alertFriendRequestSendError
ÙÙ 8
,
ÙÙ8 9
Lang
ıı 
.
ıı *
alertFriendRequestErrorTitle
ıı 9
,
ıı9 :
MessageBoxButton
ˆˆ (
.
ˆˆ( )
OK
ˆˆ) +
,
ˆˆ+ ,
MessageBoxImage
˜˜ '
.
˜˜' (
Error
˜˜( -
)
˜˜- .
;
˜˜. /
Console
¯¯ 
.
¯¯ 
	WriteLine
¯¯ %
(
¯¯% &
$"
¯¯& (
$str
¯¯( @
{
¯¯@ A
ex
¯¯A C
.
¯¯C D
Message
¯¯D K
}
¯¯K L
"
¯¯L M
)
¯¯M N
;
¯¯N O
}
˘˘ 
}
˙˙ 
else
˚˚ 
if
˚˚ 
(
˚˚ 
!
˚˚ 
(
˚˚ 
	parameter
˚˚  
is
˚˚! #
UserProfileDto
˚˚$ 2
)
˚˚2 3
)
˚˚3 4
{
¸¸ 
Console
˝˝ 
.
˝˝ 
	WriteLine
˝˝ !
(
˝˝! "
$str
˝˝" J
)
˝˝J K
;
˝˝K L
}
˛˛ 
else
ˇˇ 
if
ˇˇ 
(
ˇˇ 
!
ˇˇ &
CanExecuteNetworkActions
ˇˇ .
(
ˇˇ. /
)
ˇˇ/ 0
)
ˇˇ0 1
{
ÄÄ 
Console
ÅÅ 
.
ÅÅ 
	WriteLine
ÅÅ !
(
ÅÅ! "
$str
ÅÅ" ^
)
ÅÅ^ _
;
ÅÅ_ `
}
ÇÇ 
}
ÉÉ 	
public
ÖÖ 
void
ÖÖ 
RespondToRequest
ÖÖ $
(
ÖÖ$ %
string
ÖÖ% +
requesterUsername
ÖÖ, =
,
ÖÖ= >
bool
ÖÖ? C
accepted
ÖÖD L
)
ÖÖL M
{
ÜÜ 	
if
áá 
(
áá 
!
áá &
CanExecuteNetworkActions
áá )
(
áá) *
)
áá* +
)
áá+ ,
{
àà 
Console
ââ 
.
ââ 
	WriteLine
ââ !
(
ââ! "
$str
ââ" ]
)
ââ] ^
;
ââ^ _
return
ää 
;
ää 
}
ãã 
try
åå 
{
çç 
Client
éé 
.
éé $
RespondToFriendRequest
éé -
(
éé- .
SessionManager
éé. <
.
éé< =
Instance
éé= E
.
ééE F
CurrentUsername
ééF U
,
ééU V
requesterUsername
ééW h
,
ééh i
accepted
ééj r
)
éér s
;
éés t
Application
èè 
.
èè 
Current
èè #
.
èè# $

Dispatcher
èè$ .
.
èè. /
Invoke
èè/ 5
(
èè5 6
(
èè6 7
)
èè7 8
=>
èè9 ;
{
êê 
var
ëë 
	requestVM
ëë !
=
ëë" #
FriendRequests
ëë$ 2
.
ëë2 3
FirstOrDefault
ëë3 A
(
ëëA B
r
ëëB C
=>
ëëD F
r
ëëG H
.
ëëH I
RequesterUsername
ëëI Z
==
ëë[ ]
requesterUsername
ëë^ o
)
ëëo p
;
ëëp q
if
íí 
(
íí 
	requestVM
íí !
!=
íí" $
null
íí% )
)
íí) *
{
ìì 
FriendRequests
îî &
.
îî& '
Remove
îî' -
(
îî- .
	requestVM
îî. 7
)
îî7 8
;
îî8 9
}
ïï 
if
ññ 
(
ññ 
accepted
ññ  
&&
ññ! #
!
ññ$ %
Friends
ññ% ,
.
ññ, -
Any
ññ- 0
(
ññ0 1
f
ññ1 2
=>
ññ3 5
f
ññ6 7
.
ññ7 8
Username
ññ8 @
==
ññA C
requesterUsername
ññD U
)
ññU V
)
ññV W
{
óó 
Friends
òò 
.
òò  
Add
òò  #
(
òò# $
new
òò$ '
FriendViewModel
òò( 7
{
òò8 9
Username
òò: B
=
òòC D
requesterUsername
òòE V
,
òòV W
IsOnline
òòX `
=
òòa b
false
òòc h
}
òòi j
)
òòj k
;
òòk l
}
ôô 
}
öö 
)
öö 
;
öö 
}
õõ 
catch
úú 
(
úú $
CommunicationException
úú )
commEx
úú* 0
)
úú0 1
{
ùù 

MessageBox
ûû 
.
ûû 
Show
ûû 
(
ûû  
Lang
üü 
.
üü &
alertFriendResponseError
üü 1
,
üü1 2
Lang
†† 
.
†† 
alertErrorTitle
†† (
,
††( )
MessageBoxButton
°° $
.
°°$ %
OK
°°% '
,
°°' (
MessageBoxImage
¢¢ #
.
¢¢# $
Error
¢¢$ )
)
¢¢) *
;
¢¢* +
Console
££ 
.
££ 
	WriteLine
££ !
(
££! "
$"
££" $
$str
££$ O
{
££O P
commEx
££P V
.
££V W
Message
££W ^
}
££^ _
"
££_ `
)
££` a
;
££a b
}
§§ 
catch
•• 
(
•• 
	Exception
•• 
ex
•• 
)
••  
{
¶¶ 

MessageBox
ßß 
.
ßß 
Show
ßß 
(
ßß  
Lang
®® 
.
®® &
alertFriendResponseError
®® 1
,
®®1 2
Lang
©© 
.
©© 
alertErrorTitle
©© (
,
©©( )
MessageBoxButton
™™ $
.
™™$ %
OK
™™% '
,
™™' (
MessageBoxImage
´´ #
.
´´# $
Error
´´$ )
)
´´) *
;
´´* +
Console
¨¨ 
.
¨¨ 
	WriteLine
¨¨ !
(
¨¨! "
$"
¨¨" $
$str
¨¨$ 7
{
¨¨7 8
ex
¨¨8 :
.
¨¨: ;
Message
¨¨; B
}
¨¨B C
"
¨¨C D
)
¨¨D E
;
¨¨E F
}
≠≠ 
}
ÆÆ 	
private
∞∞ 
void
∞∞ 
InviteByEmail
∞∞ "
(
∞∞" #
object
∞∞# )
obj
∞∞* -
)
∞∞- .
{
±± 	
}
≥≥ 	
private
µµ 
void
µµ 
SubscribeToEvents
µµ &
(
µµ& '
)
µµ' (
{
∂∂ 	!
SocialClientManager
∑∑ 
.
∑∑  
Instance
∑∑  (
.
∑∑( )
OnFriendRequest
∑∑) 8
+=
∑∑9 ;!
HandleFriendRequest
∑∑< O
;
∑∑O P!
SocialClientManager
∏∏ 
.
∏∏  
Instance
∏∏  (
.
∏∏( )
OnFriendResponse
∏∏) 9
+=
∏∏: <"
HandleFriendResponse
∏∏= Q
;
∏∏Q R!
SocialClientManager
ππ 
.
ππ  
Instance
ππ  (
.
ππ( )#
OnFriendStatusChanged
ππ) >
+=
ππ? A'
HandleFriendStatusChanged
ππB [
;
ππ[ \
Console
∫∫ 
.
∫∫ 
	WriteLine
∫∫ 
(
∫∫ 
$str
∫∫ P
)
∫∫P Q
;
∫∫Q R
}
ªª 	
private
ΩΩ 
void
ΩΩ #
UnsubscribeFromEvents
ΩΩ *
(
ΩΩ* +
)
ΩΩ+ ,
{
ææ 	!
SocialClientManager
øø 
.
øø  
Instance
øø  (
.
øø( )
OnFriendRequest
øø) 8
-=
øø9 ;!
HandleFriendRequest
øø< O
;
øøO P!
SocialClientManager
¿¿ 
.
¿¿  
Instance
¿¿  (
.
¿¿( )
OnFriendResponse
¿¿) 9
-=
¿¿: <"
HandleFriendResponse
¿¿= Q
;
¿¿Q R!
SocialClientManager
¡¡ 
.
¡¡  
Instance
¡¡  (
.
¡¡( )#
OnFriendStatusChanged
¡¡) >
-=
¡¡? A'
HandleFriendStatusChanged
¡¡B [
;
¡¡[ \
Console
¬¬ 
.
¬¬ 
	WriteLine
¬¬ 
(
¬¬ 
$str
¬¬ S
)
¬¬S T
;
¬¬T U
}
√√ 	
public
≈≈ 
void
≈≈ 
Dispose
≈≈ 
(
≈≈ 
)
≈≈ 
{
∆∆ 	
Dispose
«« 
(
«« 
true
«« 
)
«« 
;
«« 
GC
»» 
.
»» 
SuppressFinalize
»» 
(
»»  
this
»»  $
)
»»$ %
;
»»% &
}
…… 	
	protected
ÀÀ 
virtual
ÀÀ 
void
ÀÀ 
Dispose
ÀÀ &
(
ÀÀ& '
bool
ÀÀ' +
	disposing
ÀÀ, 5
)
ÀÀ5 6
{
ÃÃ 	
if
ÕÕ 
(
ÕÕ 
	disposing
ÕÕ 
)
ÕÕ 
{
ŒŒ #
UnsubscribeFromEvents
œœ %
(
œœ% &
)
œœ& '
;
œœ' (
}
–– 
}
—— 	
public
”” 
void
”” 
Cleanup
”” 
(
”” 
)
”” 
{
‘‘ 	
Dispose
’’ 
(
’’ 
)
’’ 
;
’’ 
}
÷÷ 	
private
ÿÿ 
void
ÿÿ !
HandleFriendRequest
ÿÿ (
(
ÿÿ( )
string
ÿÿ) /
fromUsername
ÿÿ0 <
)
ÿÿ< =
{
ŸŸ 	
Application
⁄⁄ 
.
⁄⁄ 
Current
⁄⁄ 
.
⁄⁄  

Dispatcher
⁄⁄  *
.
⁄⁄* +
Invoke
⁄⁄+ 1
(
⁄⁄1 2
(
⁄⁄2 3
)
⁄⁄3 4
=>
⁄⁄5 7
{
€€ 

MessageBox
‹‹ 
.
‹‹ 
Show
‹‹ 
(
‹‹  
string
›› 
.
›› 
Format
›› !
(
››! "
Lang
››" &
.
››& ''
alertFriendNewRequestFrom
››' @
,
››@ A
fromUsername
››B N
)
››N O
,
››O P
Lang
ﬁﬁ 
.
ﬁﬁ (
alertFriendNewRequestTitle
ﬁﬁ 3
,
ﬁﬁ3 4
MessageBoxButton
ﬂﬂ $
.
ﬂﬂ$ %
OK
ﬂﬂ% '
,
ﬂﬂ' (
MessageBoxImage
‡‡ #
.
‡‡# $
Information
‡‡$ /
)
‡‡/ 0
;
‡‡0 1
if
‚‚ 
(
‚‚ 
!
‚‚ 
FriendRequests
‚‚ #
.
‚‚# $
Any
‚‚$ '
(
‚‚' (
r
‚‚( )
=>
‚‚* ,
r
‚‚- .
.
‚‚. /
RequesterUsername
‚‚/ @
==
‚‚A C
fromUsername
‚‚D P
)
‚‚P Q
)
‚‚Q R
{
„„ 
FriendRequests
‰‰ "
.
‰‰" #
Add
‰‰# &
(
‰‰& '
new
‰‰' *$
FriendRequestViewModel
‰‰+ A
(
‰‰A B
this
‰‰B F
)
‰‰F G
{
‰‰H I
RequesterUsername
‰‰J [
=
‰‰\ ]
fromUsername
‰‰^ j
}
‰‰k l
)
‰‰l m
;
‰‰m n
}
ÂÂ 
}
ÊÊ 
)
ÊÊ 
;
ÊÊ 
}
ÁÁ 	
private
ÈÈ 
void
ÈÈ "
HandleFriendResponse
ÈÈ )
(
ÈÈ) *
string
ÈÈ* 0 
respondingUsername
ÈÈ1 C
,
ÈÈC D
bool
ÈÈE I
accepted
ÈÈJ R
)
ÈÈR S
{
ÍÍ 	
Application
ÎÎ 
.
ÎÎ 
Current
ÎÎ 
.
ÎÎ  

Dispatcher
ÎÎ  *
.
ÎÎ* +
Invoke
ÎÎ+ 1
(
ÎÎ1 2
(
ÎÎ2 3
)
ÎÎ3 4
=>
ÎÎ5 7
{
ÏÏ 
string
ÌÌ 
message
ÌÌ 
=
ÌÌ  
accepted
ÌÌ! )
?
ÓÓ 
string
ÓÓ 
.
ÓÓ 
Format
ÓÓ #
(
ÓÓ# $
Lang
ÓÓ$ (
.
ÓÓ( )(
alertFriendRequestAccepted
ÓÓ) C
,
ÓÓC D 
respondingUsername
ÓÓE W
)
ÓÓW X
:
ÔÔ 
string
ÔÔ 
.
ÔÔ 
Format
ÔÔ #
(
ÔÔ# $
Lang
ÔÔ$ (
.
ÔÔ( )(
alertFriendRequestDeclined
ÔÔ) C
,
ÔÔC D 
respondingUsername
ÔÔE W
)
ÔÔW X
;
ÔÔX Y

MessageBox
ÒÒ 
.
ÒÒ 
Show
ÒÒ 
(
ÒÒ  
message
ÚÚ 
,
ÚÚ 
Lang
ÛÛ 
.
ÛÛ -
alertFriendRequestResponseTitle
ÛÛ 8
,
ÛÛ8 9
MessageBoxButton
ÙÙ $
.
ÙÙ$ %
OK
ÙÙ% '
,
ÙÙ' (
MessageBoxImage
ıı #
.
ıı# $
Information
ıı$ /
)
ıı/ 0
;
ıı0 1
if
˜˜ 
(
˜˜ 
accepted
˜˜ 
&&
˜˜ 
!
˜˜  !
Friends
˜˜! (
.
˜˜( )
Any
˜˜) ,
(
˜˜, -
f
˜˜- .
=>
˜˜/ 1
f
˜˜2 3
.
˜˜3 4
Username
˜˜4 <
==
˜˜= ? 
respondingUsername
˜˜@ R
)
˜˜R S
)
˜˜S T
{
¯¯ 
Friends
˘˘ 
.
˘˘ 
Add
˘˘ 
(
˘˘  
new
˘˘  #
FriendViewModel
˘˘$ 3
{
˘˘4 5
Username
˘˘6 >
=
˘˘? @ 
respondingUsername
˘˘A S
,
˘˘S T
IsOnline
˘˘U ]
=
˘˘^ _
false
˘˘` e
}
˘˘f g
)
˘˘g h
;
˘˘h i
}
˙˙ 
}
˚˚ 
)
˚˚ 
;
˚˚ 
}
¸¸ 	
private
˛˛ 
void
˛˛ '
HandleFriendStatusChanged
˛˛ .
(
˛˛. /
string
˛˛/ 5
friendUsername
˛˛6 D
,
˛˛D E
string
˛˛F L
status
˛˛M S
)
˛˛S T
{
ˇˇ 	
Application
ÄÄ 
.
ÄÄ 
Current
ÄÄ 
.
ÄÄ  

Dispatcher
ÄÄ  *
.
ÄÄ* +
Invoke
ÄÄ+ 1
(
ÄÄ1 2
(
ÄÄ2 3
)
ÄÄ3 4
=>
ÄÄ5 7
{
ÅÅ 
var
ÇÇ 
friend
ÇÇ 
=
ÇÇ 
Friends
ÇÇ $
.
ÇÇ$ %
FirstOrDefault
ÇÇ% 3
(
ÇÇ3 4
f
ÇÇ4 5
=>
ÇÇ6 8
f
ÇÇ9 :
.
ÇÇ: ;
Username
ÇÇ; C
==
ÇÇD F
friendUsername
ÇÇG U
)
ÇÇU V
;
ÇÇV W
if
ÉÉ 
(
ÉÉ 
friend
ÉÉ 
!=
ÉÉ 
null
ÉÉ "
)
ÉÉ" #
{
ÑÑ 
bool
ÖÖ 
isOnline
ÖÖ !
=
ÖÖ" #
(
ÖÖ$ %
status
ÖÖ% +
==
ÖÖ, .
$str
ÖÖ/ 7
)
ÖÖ7 8
;
ÖÖ8 9
if
ÜÜ 
(
ÜÜ 
friend
ÜÜ 
.
ÜÜ 
IsOnline
ÜÜ '
!=
ÜÜ( *
isOnline
ÜÜ+ 3
)
ÜÜ3 4
{
áá 
friend
àà 
.
àà 
IsOnline
àà '
=
àà( )
isOnline
àà* 2
;
àà2 3
Console
ââ 
.
ââ  
	WriteLine
ââ  )
(
ââ) *
$"
ââ* ,
$str
ââ, 6
{
ââ6 7
friendUsername
ââ7 E
}
ââE F
$str
ââF U
{
ââU V
status
ââV \
}
ââ\ ]
$str
ââ] r
"
ââr s
)
ââs t
;
âât u
}
ää 
}
ãã 
else
åå 
{
çç 
Console
éé 
.
éé 
	WriteLine
éé %
(
éé% &
$"
éé& (
$str
éé( >
{
éé> ?
friendUsername
éé? M
}
ééM N
$str
ééN x
"
ééx y
)
ééy z
;
ééz {
}
èè 
}
êê 
)
êê 
;
êê 
}
ëë 	
~
ìì 	
FriendsViewModel
ìì	 
(
ìì 
)
ìì 
{
îî 	
Dispose
ïï 
(
ïï 
false
ïï 
)
ïï 
;
ïï 
}
ññ 	
}
óó 
public
ôô 

class
ôô 
FriendViewModel
ôô  
:
ôô! "
ViewModelBase
ôô# 0
{
öö 
public
õõ 
string
õõ 
Username
õõ 
{
õõ  
get
õõ! $
;
õõ$ %
set
õõ& )
;
õõ) *
}
õõ+ ,
private
ùù 
bool
ùù 
	_isOnline
ùù 
;
ùù 
public
ûû 
bool
ûû 
IsOnline
ûû 
{
üü 	
get
†† 
{
†† 
return
†† 
	_isOnline
†† "
;
††" #
}
††$ %
set
°° 
{
¢¢ 
if
££ 
(
££ 
	_isOnline
££ 
!=
££  
value
££! &
)
££& '
{
§§ 
	_isOnline
•• 
=
•• 
value
••  %
;
••% &
OnPropertyChanged
¶¶ %
(
¶¶% &
)
¶¶& '
;
¶¶' (
}
ßß 
}
®® 
}
©© 	
}
™™ 
public
¨¨ 

class
¨¨ $
FriendRequestViewModel
¨¨ '
:
¨¨( )
ViewModelBase
¨¨* 7
{
≠≠ 
private
ÆÆ 
readonly
ÆÆ 
FriendsViewModel
ÆÆ )
_parent
ÆÆ* 1
;
ÆÆ1 2
public
ØØ 
string
ØØ 
RequesterUsername
ØØ '
{
ØØ( )
get
ØØ* -
;
ØØ- .
set
ØØ/ 2
;
ØØ2 3
}
ØØ4 5
public
±± 
ICommand
±± 
AcceptCommand
±± %
{
±±& '
get
±±( +
;
±±+ ,
}
±±- .
public
≤≤ 
ICommand
≤≤ 
DeclineCommand
≤≤ &
{
≤≤' (
get
≤≤) ,
;
≤≤, -
}
≤≤. /
public
¥¥ $
FriendRequestViewModel
¥¥ %
(
¥¥% &
FriendsViewModel
¥¥& 6
parent
¥¥7 =
)
¥¥= >
{
µµ 	
_parent
∂∂ 
=
∂∂ 
parent
∂∂ 
??
∂∂ 
throw
∂∂  %
new
∂∂& )#
ArgumentNullException
∂∂* ?
(
∂∂? @
nameof
∂∂@ F
(
∂∂F G
parent
∂∂G M
)
∂∂M N
)
∂∂N O
;
∂∂O P
AcceptCommand
∑∑ 
=
∑∑ 
new
∑∑ 
RelayCommand
∑∑  ,
(
∑∑, -
	parameter
∑∑- 6
=>
∑∑7 9
_parent
∑∑: A
.
∑∑A B
RespondToRequest
∑∑B R
(
∑∑R S
RequesterUsername
∑∑S d
,
∑∑d e
true
∑∑f j
)
∑∑j k
)
∑∑k l
;
∑∑l m
DeclineCommand
∏∏ 
=
∏∏ 
new
∏∏  
RelayCommand
∏∏! -
(
∏∏- .
	parameter
∏∏. 7
=>
∏∏8 :
_parent
∏∏; B
.
∏∏B C
RespondToRequest
∏∏C S
(
∏∏S T
RequesterUsername
∏∏T e
,
∏∏e f
false
∏∏g l
)
∏∏l m
)
∏∏m n
;
∏∏n o
}
ππ 	
}
∫∫ 
}ªª ¬¿
ûC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Lobby\DirectMessageViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Lobby& +
{ 
public 

class "
DirectMessageViewModel '
:( )
ViewModelBase* 7
,7 8
IDisposable9 D
{ 
private 
static 
SocialServiceClient *
Client+ 1
=>2 4
SocialClientManager5 H
.H I
InstanceI Q
.Q R
ClientR X
;X Y
public  
ObservableCollection #
<# $
	FriendDto$ -
>- .
Conversations/ <
{= >
get? B
;B C
}D E
public  
ObservableCollection #
<# $
DirectMessageDto$ 4
>4 5
ChatHistory6 A
{B C
getD G
;G H
}I J
private 
string 
_messageText #
;# $
public 
string 
MessageText !
{ 	
get 
{ 
return 
_messageText #
;# $
} 
set 
{ 
if 
( 
_messageText  
!=! #
value$ )
)) *
{ 
_messageText    
=  ! "
value  # (
;  ( )
OnPropertyChanged!! %
(!!% &
)!!& '
;!!' (
}"" 
}## 
}$$ 	
private&& 
string&& '
_currentChatPartnerUsername&& 2
;&&2 3
private'' 
	FriendDto'' !
_selectedConversation'' /
;''/ 0
public(( 
	FriendDto((  
SelectedConversation(( -
{)) 	
get** 
{++ 
return,, !
_selectedConversation,, ,
;,,, -
}-- 
set.. 
{// 
if00 
(00 !
_selectedConversation00 )
!=00* ,
value00- 2
)002 3
{11 !
_selectedConversation22 )
=22* +
value22, 1
;221 2
OnPropertyChanged33 %
(33% &
)33& '
;33' (
if55 
(55 
value55 
!=55  
null55! %
)55% &
{66 
LoadChatHistory77 '
(77' (
value77( -
.77- .
Username77. 6
)776 7
;777 8
}88 
else99 
{:: 
ClearChatHistory;; (
(;;( )
);;) *
;;;* +
}<< 
}== 
}>> 
}?? 	
publicAA 
ICommandAA 
SendMessageCommandAA *
{AA+ ,
getAA- 0
;AA0 1
}AA2 3
publicCC "
DirectMessageViewModelCC %
(CC% &
)CC& '
{DD 	
ConversationsEE 
=EE 
newEE  
ObservableCollectionEE  4
<EE4 5
	FriendDtoEE5 >
>EE> ?
(EE? @
)EE@ A
;EEA B
ChatHistoryFF 
=FF 
newFF  
ObservableCollectionFF 2
<FF2 3
DirectMessageDtoFF3 C
>FFC D
(FFD E
)FFE F
;FFF G
SendMessageCommandGG 
=GG  
newGG! $
RelayCommandGG% 1
(GG1 2
PerformSendMessageGG2 D
,GGD E
	parameterGGF O
=>GGP R!
CanPerformSendMessageGGS h
(GGh i
)GGi j
)GGj k
;GGk l
SubscribeToEventsII 
(II 
)II 
;II  
ifKK 
(KK $
CanExecuteNetworkActionsKK (
(KK( )
)KK) *
)KK* +
{LL  
LoadFriendsListAsyncMM $
(MM$ %
)MM% &
;MM& '
}NN 
elseOO 
{PP 
ConsoleQQ 
.QQ 
	WriteLineQQ !
(QQ! "
$strQQ" _
)QQ_ `
;QQ` a
}RR 
}SS 	
privateUU 
boolUU $
CanExecuteNetworkActionsUU -
(UU- .
)UU. /
{VV 	
returnWW 
ClientWW 
!=WW 
nullWW !
&&WW" $
ClientWW% +
.WW+ ,
StateWW, 1
==WW2 4
CommunicationStateWW5 G
.WWG H
OpenedWWH N
;WWN O
}XX 	
privateZZ 
asyncZZ 
TaskZZ  
LoadFriendsListAsyncZZ /
(ZZ/ 0
)ZZ0 1
{[[ 	
if\\ 
(\\ 
!\\ $
CanExecuteNetworkActions\\ )
(\\) *
)\\* +
)\\+ ,
{]] 
Console^^ 
.^^ 
	WriteLine^^ !
(^^! "
$str^^" a
)^^a b
;^^b c
return__ 
;__ 
}`` 
tryaa 
{bb 
varcc 
userscc 
=cc 
awaitcc !
Clientcc" (
.cc( )
GetFriendsListAsynccc) <
(cc< =
SessionManagercc= K
.ccK L
InstanceccL T
.ccT U
CurrentUsernameccU d
)ccd e
;cce f
Applicationdd 
.dd 
Currentdd #
.dd# $

Dispatcherdd$ .
.dd. /
Invokedd/ 5
(dd5 6
(dd6 7
)dd7 8
=>dd9 ;
{ee 
Conversationsff !
.ff! "
Clearff" '
(ff' (
)ff( )
;ff) *
ifgg 
(gg 
usersgg 
!=gg  
nullgg! %
)gg% &
{hh 
foreachii 
(ii  !
varii! $
uii% &
inii' )
usersii* /
)ii/ 0
{jj 
Conversationskk )
.kk) *
Addkk* -
(kk- .
ukk. /
)kk/ 0
;kk0 1
}ll 
}mm 
}nn 
)nn 
;nn 
}oo 
catchpp 
(pp 
FaultExceptionpp !

fexGeneralpp" ,
)pp, -
{qq 

MessageBoxrr 
.rr 
Showrr 
(rr  
Langss 
.ss %
alertChatLoadFriendsErrorss 2
,ss2 3
Langtt 
.tt 
alertErrorTitlett (
,tt( )
MessageBoxButtonuu $
.uu$ %
OKuu% '
,uu' (
MessageBoxImagevv #
.vv# $
Errorvv$ )
)vv) *
;vv* +
Consoleww 
.ww 
	WriteLineww !
(ww! "
$"ww" $
$strww$ D
{wwD E

fexGeneralwwE O
.wwO P
MessagewwP W
}wwW X
"wwX Y
)wwY Z
;wwZ [
}xx 
catchyy 
(yy %
EndpointNotFoundExceptionyy ,
exyy- /
)yy/ 0
{zz 

MessageBox{{ 
.{{ 
Show{{ 
({{  
Lang|| 
.|| '
alertConnectionErrorMessage|| 4
,||4 5
Lang}} 
.}} %
alertConnectionErrorTitle}} 2
,}}2 3
MessageBoxButton~~ $
.~~$ %
OK~~% '
,~~' (
MessageBoxImage #
.# $
Error$ )
)) *
;* +
Console
ÄÄ 
.
ÄÄ 
	WriteLine
ÄÄ !
(
ÄÄ! "
$"
ÄÄ" $
$str
ÄÄ$ K
{
ÄÄK L
ex
ÄÄL N
.
ÄÄN O
Message
ÄÄO V
}
ÄÄV W
"
ÄÄW X
)
ÄÄX Y
;
ÄÄY Z
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ 
	Exception
ÇÇ 
ex
ÇÇ 
)
ÇÇ  
{
ÉÉ 

MessageBox
ÑÑ 
.
ÑÑ 
Show
ÑÑ 
(
ÑÑ  
Lang
ÖÖ 
.
ÖÖ '
alertChatLoadFriendsError
ÖÖ 2
,
ÖÖ2 3
Lang
ÜÜ 
.
ÜÜ 
alertErrorTitle
ÜÜ (
,
ÜÜ( )
MessageBoxButton
áá $
.
áá$ %
OK
áá% '
,
áá' (
MessageBoxImage
àà #
.
àà# $
Error
àà$ )
)
àà) *
;
àà* +
Console
ââ 
.
ââ 
	WriteLine
ââ !
(
ââ! "
$"
ââ" $
$str
ââ$ G
{
ââG H
ex
ââH J
.
ââJ K
Message
ââK R
}
ââR S
"
ââS T
)
ââT U
;
ââU V
}
ää 
}
ãã 	
private
çç 
async
çç 
Task
çç 
LoadChatHistory
çç *
(
çç* +
string
çç+ 1
otherUsername
çç2 ?
)
çç? @
{
éé 	
if
èè 
(
èè 
string
èè 
.
èè 
IsNullOrEmpty
èè $
(
èè$ %
otherUsername
èè% 2
)
èè2 3
)
èè3 4
{
êê 
ClearChatHistory
ëë  
(
ëë  !
)
ëë! "
;
ëë" #
return
íí 
;
íí 
}
ìì 
if
ïï 
(
ïï 
!
ïï &
CanExecuteNetworkActions
ïï )
(
ïï) *
)
ïï* +
)
ïï+ ,
{
ññ 
Console
óó 
.
óó 
	WriteLine
óó !
(
óó! "
$str
óó" \
)
óó\ ]
;
óó] ^
ClearChatHistory
òò  
(
òò  !
)
òò! "
;
òò" #
return
ôô 
;
ôô 
}
öö )
_currentChatPartnerUsername
úú '
=
úú( )
otherUsername
úú* 7
;
úú7 8
try
ùù 
{
ûû 
string
üü 
currentUsername
üü &
=
üü' (
SessionManager
üü) 7
.
üü7 8
Instance
üü8 @
.
üü@ A
CurrentUsername
üüA P
;
üüP Q
var
†† 
history
†† 
=
†† 
await
†† #
Client
††$ *
.
††* +)
GetConversationHistoryAsync
††+ F
(
††F G
currentUsername
††G V
,
††V W
otherUsername
††X e
)
††e f
;
††f g
Application
¢¢ 
.
¢¢ 
Current
¢¢ #
.
¢¢# $

Dispatcher
¢¢$ .
.
¢¢. /
Invoke
¢¢/ 5
(
¢¢5 6
(
¢¢6 7
)
¢¢7 8
=>
¢¢9 ;
{
££ 
ChatHistory
§§ 
.
§§  
Clear
§§  %
(
§§% &
)
§§& '
;
§§' (
if
•• 
(
•• 
history
•• 
!=
••  "
null
••# '
)
••' (
{
¶¶ 
foreach
ßß 
(
ßß  !
var
ßß! $
msg
ßß% (
in
ßß) +
history
ßß, 3
)
ßß3 4
{
®® 
if
©© 
(
©©  
msg
©©  #
.
©©# $
SenderUsername
©©$ 2
==
©©3 5
currentUsername
©©6 E
)
©©E F
{
™™ 
var
´´  #
localMessageDto
´´$ 3
=
´´4 5
new
´´6 9
DirectMessageDto
´´: J
{
¨¨  !
SenderUsername
≠≠$ 2
=
≠≠3 4
Lang
≠≠5 9
.
≠≠9 : 
alertChatSenderYou
≠≠: L
,
≠≠L M
RecipientUsername
ÆÆ$ 5
=
ÆÆ6 7
msg
ÆÆ8 ;
.
ÆÆ; <
RecipientUsername
ÆÆ< M
,
ÆÆM N
Content
ØØ$ +
=
ØØ, -
msg
ØØ. 1
.
ØØ1 2
Content
ØØ2 9
,
ØØ9 :
	Timestamp
∞∞$ -
=
∞∞. /
msg
∞∞0 3
.
∞∞3 4
	Timestamp
∞∞4 =
}
±±  !
;
±±! "
ChatHistory
≤≤  +
.
≤≤+ ,
Add
≤≤, /
(
≤≤/ 0
localMessageDto
≤≤0 ?
)
≤≤? @
;
≤≤@ A
}
≥≥ 
else
¥¥  
{
µµ 
ChatHistory
∂∂  +
.
∂∂+ ,
Add
∂∂, /
(
∂∂/ 0
msg
∂∂0 3
)
∂∂3 4
;
∂∂4 5
}
∑∑ 
}
∏∏ 
}
ππ 
}
∫∫ 
)
∫∫ 
;
∫∫ 
}
ªª 
catch
ºº 
(
ºº 
FaultException
ºº !

fexGeneral
ºº" ,
)
ºº, -
{
ΩΩ 

MessageBox
ææ 
.
ææ 
Show
ææ 
(
ææ  
Lang
øø 
.
øø '
alertChatLoadHistoryError
øø 2
,
øø2 3
Lang
¿¿ 
.
¿¿ 
alertErrorTitle
¿¿ (
,
¿¿( )
MessageBoxButton
¡¡ $
.
¡¡$ %
OK
¡¡% '
,
¡¡' (
MessageBoxImage
¬¬ #
.
¬¬# $
Error
¬¬$ )
)
¬¬) *
;
¬¬* +
Console
√√ 
.
√√ 
	WriteLine
√√ !
(
√√! "
$"
√√" $
$str
√√$ D
{
√√D E

fexGeneral
√√E O
.
√√O P
Message
√√P W
}
√√W X
"
√√X Y
)
√√Y Z
;
√√Z [
ClearChatHistory
ƒƒ  
(
ƒƒ  !
)
ƒƒ! "
;
ƒƒ" #
}
≈≈ 
catch
∆∆ 
(
∆∆ '
EndpointNotFoundException
∆∆ ,
ex
∆∆- /
)
∆∆/ 0
{
«« 

MessageBox
»» 
.
»» 
Show
»» 
(
»»  
Lang
…… 
.
…… )
alertConnectionErrorMessage
…… 4
,
……4 5
Lang
   
.
   '
alertConnectionErrorTitle
   2
,
  2 3
MessageBoxButton
ÀÀ $
.
ÀÀ$ %
OK
ÀÀ% '
,
ÀÀ' (
MessageBoxImage
ÃÃ #
.
ÃÃ# $
Error
ÃÃ$ )
)
ÃÃ) *
;
ÃÃ* +
Console
ÕÕ 
.
ÕÕ 
	WriteLine
ÕÕ !
(
ÕÕ! "
$"
ÕÕ" $
$str
ÕÕ$ K
{
ÕÕK L
ex
ÕÕL N
.
ÕÕN O
Message
ÕÕO V
}
ÕÕV W
"
ÕÕW X
)
ÕÕX Y
;
ÕÕY Z
ClearChatHistory
ŒŒ  
(
ŒŒ  !
)
ŒŒ! "
;
ŒŒ" #
}
œœ 
catch
–– 
(
–– 
	Exception
–– 
ex
–– 
)
––  
{
—— 

MessageBox
““ 
.
““ 
Show
““ 
(
““  
Lang
”” 
.
”” '
alertChatLoadHistoryError
”” 2
,
””2 3
Lang
‘‘ 
.
‘‘ 
alertErrorTitle
‘‘ (
,
‘‘( )
MessageBoxButton
’’ $
.
’’$ %
OK
’’% '
,
’’' (
MessageBoxImage
÷÷ #
.
÷÷# $
Error
÷÷$ )
)
÷÷) *
;
÷÷* +
Console
◊◊ 
.
◊◊ 
	WriteLine
◊◊ !
(
◊◊! "
$"
◊◊" $
$str
◊◊$ @
{
◊◊@ A
ex
◊◊A C
.
◊◊C D
Message
◊◊D K
}
◊◊K L
"
◊◊L M
)
◊◊M N
;
◊◊N O
ClearChatHistory
ÿÿ  
(
ÿÿ  !
)
ÿÿ! "
;
ÿÿ" #
}
ŸŸ 
}
⁄⁄ 	
private
‹‹ 
void
‹‹ 
ClearChatHistory
‹‹ %
(
‹‹% &
)
‹‹& '
{
›› 	)
_currentChatPartnerUsername
ﬁﬁ '
=
ﬁﬁ( )
null
ﬁﬁ* .
;
ﬁﬁ. /
Application
ﬂﬂ 
.
ﬂﬂ 
Current
ﬂﬂ 
.
ﬂﬂ  

Dispatcher
ﬂﬂ  *
.
ﬂﬂ* +
Invoke
ﬂﬂ+ 1
(
ﬂﬂ1 2
(
ﬂﬂ2 3
)
ﬂﬂ3 4
=>
ﬂﬂ5 7
ChatHistory
ﬂﬂ8 C
.
ﬂﬂC D
Clear
ﬂﬂD I
(
ﬂﬂI J
)
ﬂﬂJ K
)
ﬂﬂK L
;
ﬂﬂL M
}
‡‡ 	
private
‚‚ 
bool
‚‚ #
CanPerformSendMessage
‚‚ *
(
‚‚* +
)
‚‚+ ,
{
„„ 	
return
‰‰ 
!
‰‰ 
string
‰‰ 
.
‰‰  
IsNullOrWhiteSpace
‰‰ -
(
‰‰- .
MessageText
‰‰. 9
)
‰‰9 :
&&
‰‰; =)
_currentChatPartnerUsername
ÂÂ .
!=
ÂÂ/ 1
null
ÂÂ2 6
&&
ÂÂ7 9&
CanExecuteNetworkActions
ÊÊ +
(
ÊÊ+ ,
)
ÊÊ, -
;
ÊÊ- .
}
ÁÁ 	
private
ÈÈ 
void
ÈÈ  
PerformSendMessage
ÈÈ '
(
ÈÈ' (
object
ÈÈ( .
obj
ÈÈ/ 2
)
ÈÈ2 3
{
ÍÍ 	
if
ÎÎ 
(
ÎÎ 
!
ÎÎ #
CanPerformSendMessage
ÎÎ &
(
ÎÎ& '
)
ÎÎ' (
)
ÎÎ( )
{
ÏÏ 
return
ÌÌ 
;
ÌÌ 
}
ÓÓ 
var
 

messageDto
 
=
 
new
  
DirectMessageDto
! 1
{
ÒÒ 
SenderUsername
ÚÚ 
=
ÚÚ  
SessionManager
ÚÚ! /
.
ÚÚ/ 0
Instance
ÚÚ0 8
.
ÚÚ8 9
CurrentUsername
ÚÚ9 H
,
ÚÚH I
RecipientUsername
ÛÛ !
=
ÛÛ" #)
_currentChatPartnerUsername
ÛÛ$ ?
,
ÛÛ? @
Content
ÙÙ 
=
ÙÙ 
MessageText
ÙÙ %
,
ÙÙ% &
	Timestamp
ıı 
=
ıı 
DateTime
ıı $
.
ıı$ %
UtcNow
ıı% +
}
ˆˆ 
;
ˆˆ 
try
¯¯ 
{
˘˘ 
Client
˙˙ 
.
˙˙ 
SendDirectMessage
˙˙ (
(
˙˙( )

messageDto
˙˙) 3
)
˙˙3 4
;
˙˙4 5
var
¸¸ 
localMsg
¸¸ 
=
¸¸ 
new
¸¸ "
DirectMessageDto
¸¸# 3
{
˝˝ 
SenderUsername
˛˛ "
=
˛˛# $
Lang
˛˛% )
.
˛˛) * 
alertChatSenderYou
˛˛* <
,
˛˛< =
Content
ˇˇ 
=
ˇˇ 
MessageText
ˇˇ )
,
ˇˇ) *
	Timestamp
ÄÄ 
=
ÄÄ 
DateTime
ÄÄ  (
.
ÄÄ( )
Now
ÄÄ) ,
}
ÅÅ 
;
ÅÅ 
ChatHistory
ÇÇ 
.
ÇÇ 
Add
ÇÇ 
(
ÇÇ  
localMsg
ÇÇ  (
)
ÇÇ( )
;
ÇÇ) *
MessageText
ÉÉ 
=
ÉÉ 
string
ÉÉ $
.
ÉÉ$ %
Empty
ÉÉ% *
;
ÉÉ* +
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ $
CommunicationException
ÖÖ )
commEx
ÖÖ* 0
)
ÖÖ0 1
{
ÜÜ 

MessageBox
áá 
.
áá 
Show
áá 
(
áá  
Lang
àà 
.
àà '
alertChatMessageSendError
àà 2
,
àà2 3
Lang
ââ 
.
ââ 
alertErrorTitle
ââ (
,
ââ( )
MessageBoxButton
ää $
.
ää$ %
OK
ää% '
,
ää' (
MessageBoxImage
ãã #
.
ãã# $
Error
ãã$ )
)
ãã) *
;
ãã* +
Console
åå 
.
åå 
	WriteLine
åå !
(
åå! "
$"
åå" $
$str
åå$ I
{
ååI J
commEx
ååJ P
.
ååP Q
Message
ååQ X
}
ååX Y
"
ååY Z
)
ååZ [
;
åå[ \
}
çç 
catch
éé 
(
éé 
	Exception
éé 
ex
éé 
)
éé  
{
èè 

MessageBox
êê 
.
êê 
Show
êê 
(
êê  
Lang
ëë 
.
ëë '
alertChatMessageSendError
ëë 2
,
ëë2 3
Lang
íí 
.
íí 
alertErrorTitle
íí (
,
íí( )
MessageBoxButton
ìì $
.
ìì$ %
OK
ìì% '
,
ìì' (
MessageBoxImage
îî #
.
îî# $
Error
îî$ )
)
îî) *
;
îî* +
Console
ïï 
.
ïï 
	WriteLine
ïï !
(
ïï! "
$"
ïï" $
$str
ïï$ <
{
ïï< =
ex
ïï= ?
.
ïï? @
Message
ïï@ G
}
ïïG H
"
ïïH I
)
ïïI J
;
ïïJ K
}
ññ 
}
óó 	
private
ôô 
void
ôô 
SubscribeToEvents
ôô &
(
ôô& '
)
ôô' (
{
öö 	!
SocialClientManager
õõ 
.
õõ  
Instance
õõ  (
.
õõ( )
OnMessageReceived
õõ) :
+=
õõ; =#
HandleMessageReceived
õõ> S
;
õõS T!
SocialClientManager
úú 
.
úú  
Instance
úú  (
.
úú( )
OnFriendResponse
úú) 9
+=
úú: <"
HandleFriendResponse
úú= Q
;
úúQ R
Console
ùù 
.
ùù 
	WriteLine
ùù 
(
ùù 
$str
ùù V
)
ùùV W
;
ùùW X
}
ûû 	
private
†† 
void
†† #
UnsubscribeFromEvents
†† *
(
††* +
)
††+ ,
{
°° 	!
SocialClientManager
¢¢ 
.
¢¢  
Instance
¢¢  (
.
¢¢( )
OnMessageReceived
¢¢) :
-=
¢¢; =#
HandleMessageReceived
¢¢> S
;
¢¢S T!
SocialClientManager
££ 
.
££  
Instance
££  (
.
££( )
OnFriendResponse
££) 9
-=
££: <"
HandleFriendResponse
££= Q
;
££Q R
Console
§§ 
.
§§ 
	WriteLine
§§ 
(
§§ 
$str
§§ Y
)
§§Y Z
;
§§Z [
}
•• 	
public
ßß 
void
ßß 
Dispose
ßß 
(
ßß 
)
ßß 
{
®® 	
Dispose
©© 
(
©© 
true
©© 
)
©© 
;
©© 
GC
™™ 
.
™™ 
SuppressFinalize
™™ 
(
™™  
this
™™  $
)
™™$ %
;
™™% &
}
´´ 	
	protected
≠≠ 
virtual
≠≠ 
void
≠≠ 
Dispose
≠≠ &
(
≠≠& '
bool
≠≠' +
	disposing
≠≠, 5
)
≠≠5 6
{
ÆÆ 	
if
ØØ 
(
ØØ 
	disposing
ØØ 
)
ØØ 
{
∞∞ #
UnsubscribeFromEvents
±± %
(
±±% &
)
±±& '
;
±±' (
}
≤≤ 
}
≥≥ 	
public
µµ 
void
µµ 
Cleanup
µµ 
(
µµ 
)
µµ 
{
∂∂ 	
Dispose
∑∑ 
(
∑∑ 
)
∑∑ 
;
∑∑ 
}
∏∏ 	
private
∫∫ 
void
∫∫ #
HandleMessageReceived
∫∫ *
(
∫∫* +
DirectMessageDto
∫∫+ ;
message
∫∫< C
)
∫∫C D
{
ªª 	
Application
ºº 
.
ºº 
Current
ºº 
.
ºº  

Dispatcher
ºº  *
.
ºº* +
Invoke
ºº+ 1
(
ºº1 2
(
ºº2 3
)
ºº3 4
=>
ºº5 7
{
ΩΩ 
if
ææ 
(
ææ 
message
ææ 
.
ææ 
SenderUsername
ææ *
==
ææ+ -)
_currentChatPartnerUsername
ææ. I
)
ææI J
{
øø 
ChatHistory
¿¿ 
.
¿¿  
Add
¿¿  #
(
¿¿# $
message
¿¿$ +
)
¿¿+ ,
;
¿¿, -
}
¡¡ 
else
¬¬ 
{
√√ 

MessageBox
ƒƒ 
.
ƒƒ 
Show
ƒƒ #
(
ƒƒ# $
string
≈≈ 
.
≈≈ 
Format
≈≈ %
(
≈≈% &
Lang
≈≈& *
.
≈≈* +%
alertChatNewMessageFrom
≈≈+ B
,
≈≈B C
message
≈≈D K
.
≈≈K L
SenderUsername
≈≈L Z
)
≈≈Z [
,
≈≈[ \
Lang
∆∆ 
.
∆∆ &
alertChatNewMessageTitle
∆∆ 5
,
∆∆5 6
MessageBoxButton
«« (
.
««( )
OK
««) +
,
««+ ,
MessageBoxImage
»» '
.
»»' (
Information
»»( 3
)
»»3 4
;
»»4 5
}
…… 
}
   
)
   
;
   
}
ÀÀ 	
private
ÕÕ 
void
ÕÕ "
HandleFriendResponse
ÕÕ )
(
ÕÕ) *
string
ÕÕ* 0
fromUsername
ÕÕ1 =
,
ÕÕ= >
bool
ÕÕ? C
accepted
ÕÕD L
)
ÕÕL M
{
ŒŒ 	
if
œœ 
(
œœ 
accepted
œœ 
)
œœ 
{
–– 
Application
—— 
.
—— 
Current
—— #
.
——# $

Dispatcher
——$ .
.
——. /
Invoke
——/ 5
(
——5 6
(
——6 7
)
——7 8
=>
——9 ;"
LoadFriendsListAsync
——< P
(
——P Q
)
——Q R
)
——R S
;
——S T
}
““ 
}
”” 	
~
’’ 	$
DirectMessageViewModel
’’	 
(
’’  
)
’’  !
{
÷÷ 	
Dispose
◊◊ 
(
◊◊ 
false
◊◊ 
)
◊◊ 
;
◊◊ 
}
ÿÿ 	
}
ŸŸ 
}⁄⁄ Ée
¨C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Lobby\Dialogs\VerifyChangesByCodeViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Lobby& +
.+ ,
Dialogs, 3
{ 
internal 
class (
VerifyChangesByCodeViewModel /
:0 1
ViewModelBase2 ?
{ 
public 
enum 
VerificationMode $
{% &
Email' ,
,, -
Password. 6
}7 8
private 
readonly 
VerificationMode )
_mode* /
;/ 0
private 
readonly 
string 
	_username  )
;) *
private 
readonly 
string 
_payload  (
;( )
private 
readonly 
Action 
<  
string  &
>& ' 
_emailUpdateCallback( <
;< =
private 
string 
_verificationCode (
;( )
public 
string 
VerificationCode &
{ 	
get 
{ 
return 
_verificationCode (
;( )
} 
set 
{ 
if 
( 
_verificationCode %
!=& (
value) .
). /
{ 
_verificationCode   %
=  & '
value  ( -
;  - .
OnPropertyChanged!! %
(!!% &
)!!& '
;!!' (
}"" 
}## 
}$$ 	
public&& 
ICommand&& 
VerifyCommand&& %
{&&& '
get&&( +
;&&+ ,
}&&- .
public'' 
ICommand'' 
CloseCommand'' $
{''% &
get''' *
;''* +
}'', -
private)) 
static)) 
bool)) 
IsValidEmail)) (
())( )
string))) /
email))0 5
)))5 6
{** 	
if++ 
(++ 
string++ 
.++ 
IsNullOrWhiteSpace++ )
(++) *
email++* /
)++/ 0
)++0 1
{,, 
return-- 
false-- 
;-- 
}.. 
try// 
{00 
var11 
regex11 
=11 
new11 
Regex11  %
(11% &
$str11& H
,11H I
RegexOptions11J V
.11V W

IgnoreCase11W a
,11a b
TimeSpan11c k
.11k l
FromMilliseconds11l |
(11| }
$num	11} Ä
)
11Ä Å
)
11Å Ç
;
11Ç É
return22 
regex22 
.22 
IsMatch22 $
(22$ %
email22% *
)22* +
;22+ ,
}33 
catch44 
(44 &
RegexMatchTimeoutException44 -
)44- .
{55 
return66 
false66 
;66 
}77 
}88 	
public:: (
VerifyChangesByCodeViewModel:: +
(::+ ,
VerificationMode::, <
mode::= A
,::A B
string::C I
username::J R
,::R S
string::T Z
payload::[ b
,::b c
Action::d j
<::j k
string::k q
>::q r 
emailUpdateCallback	::s Ü
)
::Ü á
{;; 	
if<< 
(<< 
string<< 
.<< 
IsNullOrWhiteSpace<< )
(<<) *
username<<* 2
)<<2 3
)<<3 4
{== 
throw>> 
new>> !
ArgumentNullException>> /
(>>/ 0
nameof>>0 6
(>>6 7
username>>7 ?
)>>? @
)>>@ A
;>>A B
}?? 
if@@ 
(@@ 
string@@ 
.@@ 
IsNullOrWhiteSpace@@ )
(@@) *
payload@@* 1
)@@1 2
)@@2 3
{AA 
throwBB 
newBB !
ArgumentNullExceptionBB /
(BB/ 0
nameofBB0 6
(BB6 7
payloadBB7 >
)BB> ?
)BB? @
;BB@ A
}CC 
ifDD 
(DD 
modeDD 
==DD 
VerificationModeDD (
.DD( )
EmailDD) .
&&DD/ 1
emailUpdateCallbackDD2 E
==DDF H
nullDDI M
)DDM N
{EE 
ConsoleFF 
.FF 
	WriteLineFF !
(FF! "
$strFF" x
)FFx y
;FFy z
}GG 
ifHH 
(HH 
modeHH 
==HH 
VerificationModeHH (
.HH( )
EmailHH) .
&&HH/ 1
!HH2 3
IsValidEmailHH3 ?
(HH? @
payloadHH@ G
)HHG H
)HHH I
{II 
throwJJ 
newJJ 
ArgumentExceptionJJ +
(JJ+ ,
$strJJ, o
,JJo p
nameofJJq w
(JJw x
payloadJJx 
)	JJ Ä
)
JJÄ Å
;
JJÅ Ç
}KK 
_modeMM 
=MM 
modeMM 
;MM 
	_usernameNN 
=NN 
usernameNN  
;NN  !
_payloadOO 
=OO 
payloadOO 
;OO  
_emailUpdateCallbackPP  
=PP! "
emailUpdateCallbackPP# 6
;PP6 7
VerifyCommandRR 
=RR 
newRR 
RelayCommandRR  ,
(RR, -
ExecuteVerifyRR- :
,RR: ;
CanExecuteVerifyRR< L
)RRL M
;RRM N
CloseCommandSS 
=SS 
newSS 
RelayCommandSS +
(SS+ ,
ExecuteCloseSS, 8
)SS8 9
;SS9 :
}TT 	
privateVV 
boolVV 
CanExecuteVerifyVV %
(VV% &
objectVV& ,
objVV- 0
)VV0 1
{WW 	
returnXX 
!XX 
stringXX 
.XX 
IsNullOrWhiteSpaceXX -
(XX- .
VerificationCodeXX. >
)XX> ?
&&XX@ B
VerificationCodeYY #
.YY# $
LengthYY$ *
==YY+ -
$numYY. /
&&YY0 2
VerificationCodeZZ #
.ZZ# $
AllZZ$ '
(ZZ' (
charZZ( ,
.ZZ, -
IsDigitZZ- 4
)ZZ4 5
;ZZ5 6
}[[ 	
private]] 
async]] 
void]] 
ExecuteVerify]] (
(]]( )
object]]) /
	parameter]]0 9
)]]9 :
{^^ 	
if__ 
(__ 
!__ 
CanExecuteVerify__ !
(__! "
null__" &
)__& '
)__' (
{`` 

MessageBoxaa 
.aa 
Showaa 
(aa  
Langbb 
.bb "
alertInvalidCodeFormatbb /
,bb/ 0
Langcc 
.cc !
alertInvalidCodeTitlecc .
,cc. /
MessageBoxButtondd $
.dd$ %
OKdd% '
,dd' (
MessageBoxImageee #
.ee# $
Warningee$ +
)ee+ ,
;ee, -
returnff 
;ff 
}gg 
tryii 
{jj 
usingkk 
(kk 
varkk 
clientkk !
=kk" #
newkk$ '$
UserProfileServiceClientkk( @
(kk@ A
)kkA B
)kkB C
{ll 
OperationResultDtomm &
resultmm' -
;mm- .
ifoo 
(oo 
_modeoo 
==oo  
VerificationModeoo! 1
.oo1 2
Emailoo2 7
)oo7 8
{pp 
resultqq 
=qq  
awaitqq! &
clientqq' -
.qq- .#
ConfirmChangeEmailAsyncqq. E
(qqE F
	_usernameqqF O
,qqO P
VerificationCodeqqQ a
)qqa b
;qqb c
ifrr 
(rr 
resultrr "
.rr" #
Successrr# *
)rr* +
{ss  
_emailUpdateCallbacktt 0
?tt0 1
.tt1 2
Invokett2 8
(tt8 9
_payloadtt9 A
)ttA B
;ttB C
}uu 
}vv 
elseww 
{xx 
resultyy 
=yy  
awaityy! &
clientyy' -
.yy- .&
ConfirmChangePasswordAsyncyy. H
(yyH I
	_usernameyyI R
,yyR S
_payloadyyT \
,yy\ ]
VerificationCodeyy^ n
)yyn o
;yyo p
}zz 
if|| 
(|| 
result|| 
.|| 
Success|| &
)||& '
{}} 

MessageBox~~ "
.~~" #
Show~~# '
(~~' (
result "
." #
Message# *
,* +
Lang
ÄÄ  
.
ÄÄ  !
alertSuccessTitle
ÄÄ! 2
,
ÄÄ2 3
MessageBoxButton
ÅÅ ,
.
ÅÅ, -
OK
ÅÅ- /
,
ÅÅ/ 0
MessageBoxImage
ÇÇ +
.
ÇÇ+ ,
Information
ÇÇ, 7
)
ÇÇ7 8
;
ÇÇ8 9
ExecuteClose
ÉÉ $
(
ÉÉ$ %
	parameter
ÉÉ% .
)
ÉÉ. /
;
ÉÉ/ 0
}
ÑÑ 
else
ÖÖ 
{
ÜÜ 

MessageBox
áá "
.
áá" #
Show
áá# '
(
áá' (
result
àà "
.
àà" #
Message
àà# *
,
àà* +
Lang
ââ  
.
ââ  !)
alertVerificationErrorTitle
ââ! <
,
ââ< =
MessageBoxButton
ää ,
.
ää, -
OK
ää- /
,
ää/ 0
MessageBoxImage
ãã +
.
ãã+ ,
Warning
ãã, 3
)
ãã3 4
;
ãã4 5
}
åå 
}
çç 
}
éé 
catch
èè 
(
èè 
FaultException
èè !

fexGeneral
èè" ,
)
èè, -
{
êê 

MessageBox
ëë 
.
ëë 
Show
ëë 
(
ëë  
Lang
íí 
.
íí %
alertServerErrorMessage
íí 0
,
íí0 1
Lang
ìì 
.
ìì 
alertErrorTitle
ìì (
,
ìì( )
MessageBoxButton
îî $
.
îî$ %
OK
îî% '
,
îî' (
MessageBoxImage
ïï #
.
ïï# $
Error
ïï$ )
)
ïï) *
;
ïï* +
Console
ññ 
.
ññ 
	WriteLine
ññ !
(
ññ! "
$"
ññ" $
$str
ññ$ J
{
ññJ K

fexGeneral
ññK U
.
ññU V
Message
ññV ]
}
ññ] ^
"
ññ^ _
)
ññ_ `
;
ññ` a
}
óó 
catch
òò 
(
òò '
EndpointNotFoundException
òò ,
ex
òò- /
)
òò/ 0
{
ôô 

MessageBox
öö 
.
öö 
Show
öö 
(
öö  
Lang
õõ 
.
õõ )
alertConnectionErrorMessage
õõ 4
,
õõ4 5
Lang
úú 
.
úú '
alertConnectionErrorTitle
úú 2
,
úú2 3
MessageBoxButton
ùù $
.
ùù$ %
OK
ùù% '
,
ùù' (
MessageBoxImage
ûû #
.
ûû# $
Error
ûû$ )
)
ûû) *
;
ûû* +
Console
üü 
.
üü 
	WriteLine
üü !
(
üü! "
$"
üü" $
$str
üü$ Q
{
üüQ R
ex
üüR T
.
üüT U
Message
üüU \
}
üü\ ]
"
üü] ^
)
üü^ _
;
üü_ `
}
†† 
catch
°° 
(
°° 
	Exception
°° 
ex
°° 
)
°°  
{
¢¢ 

MessageBox
££ 
.
££ 
Show
££ 
(
££  
Lang
§§ 
.
§§ &
alertUnknownErrorMessage
§§ 1
,
§§1 2
Lang
•• 
.
•• 
alertErrorTitle
•• (
,
••( )
MessageBoxButton
¶¶ $
.
¶¶$ %
OK
¶¶% '
,
¶¶' (
MessageBoxImage
ßß #
.
ßß# $
Error
ßß$ )
)
ßß) *
;
ßß* +
Console
®® 
.
®® 
	WriteLine
®® !
(
®®! "
$"
®®" $
$str
®®$ N
{
®®N O
ex
®®O Q
.
®®Q R
Message
®®R Y
}
®®Y Z
"
®®Z [
)
®®[ \
;
®®\ ]
}
©© 
}
™™ 	
private
¨¨ 
static
¨¨ 
void
¨¨ 
ExecuteClose
¨¨ (
(
¨¨( )
object
¨¨) /
	parameter
¨¨0 9
)
¨¨9 :
{
≠≠ 	
if
ÆÆ 
(
ÆÆ 
	parameter
ÆÆ 
is
ÆÆ 
Window
ÆÆ #
window
ÆÆ$ *
)
ÆÆ* +
{
ØØ 
window
∞∞ 
.
∞∞ 
Close
∞∞ 
(
∞∞ 
)
∞∞ 
;
∞∞ 
}
±± 
}
≤≤ 	
}
≥≥ 
}¥¥ ı?
•C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Lobby\Dialogs\VerifyByCodeViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Lobby& +
.+ ,
Dialogs, 3
{ 
public 

class !
VerifyByCodeViewModel &
:' (
ViewModelBase) 6
{ 
private 
readonly 
string 

_userEmail  *
;* +
private 
string 
_verificationCode (
;( )
public 
string 
VerificationCode &
{ 	
get 
{ 
return 
_verificationCode (
;( )
} 
set 
{ 
if 
( 
_verificationCode %
!=& (
value) .
). /
{ 
_verificationCode %
=& '
value( -
;- .
OnPropertyChanged %
(% &
)& '
;' (
}   
}!! 
}"" 	
public$$ 
ICommand$$ 
VerifyCommand$$ %
{$$& '
get$$( +
;$$+ ,
}$$- .
public%% 
ICommand%% 
CloseCommand%% $
{%%% &
get%%' *
;%%* +
}%%, -
public'' !
VerifyByCodeViewModel'' $
(''$ %
string''% +
	userEmail'', 5
)''5 6
{(( 	
if)) 
()) 
string)) 
.)) 
IsNullOrWhiteSpace)) )
())) *
	userEmail))* 3
)))3 4
)))4 5
{** 
throw++ 
new++ !
ArgumentNullException++ /
(++/ 0
nameof++0 6
(++6 7
	userEmail++7 @
)++@ A
,++A B
$str++C q
)++q r
;++r s
},, 

_userEmail-- 
=-- 
	userEmail-- "
;--" #
VerifyCommand// 
=// 
new// 
RelayCommand//  ,
(//, -
ExecuteVerify//- :
,//: ;
CanExecuteVerify//< L
)//L M
;//M N
CloseCommand00 
=00 
new00 
RelayCommand00 +
(00+ ,
CloseWindow00, 7
)007 8
;008 9
}11 	
private33 
bool33 
CanExecuteVerify33 %
(33% &
object33& ,
	parameter33- 6
)336 7
{44 	
return55 
!55 
string55 
.55 
IsNullOrWhiteSpace55 -
(55- .
VerificationCode55. >
)55> ?
;55? @
}66 	
private88 
async88 
void88 
ExecuteVerify88 (
(88( )
object88) /
	parameter880 9
)889 :
{99 	
using:: 
(:: '
AuthenticationServiceClient:: .
client::/ 5
=::6 7
new::8 ;'
AuthenticationServiceClient::< W
(::W X
)::X Y
)::Y Z
{;; 
try<< 
{== 
OperationResultDto>> &
result>>' -
=>>. /
await>>0 5
client>>6 <
.>>< =
VerifyAccountAsync>>= O
(>>O P

_userEmail>>P Z
,>>Z [
VerificationCode>>\ l
)>>l m
;>>m n
if@@ 
(@@ 
result@@ 
.@@ 
Success@@ &
)@@& '
{AA 

MessageBoxBB "
.BB" #
ShowBB# '
(BB' (
LangCC  
.CC  !$
alertVerificationSuccessCC! 9
,CC9 :
LangDD  
.DD  !(
alertActivationCompleteTitleDD! =
,DD= >
MessageBoxButtonEE ,
.EE, -
OKEE- /
,EE/ 0
MessageBoxImageFF +
.FF+ ,
InformationFF, 7
)FF7 8
;FF8 9
OpenLoginWindowGG '
(GG' (
	parameterGG( 1
)GG1 2
;GG2 3
}HH 
elseII 
{JJ 

MessageBoxKK "
.KK" #
ShowKK# '
(KK' (
resultLL "
.LL" #
MessageLL# *
,LL* +
LangMM  
.MM  !'
alertVerificationErrorTitleMM! <
,MM< =
MessageBoxButtonNN ,
.NN, -
OKNN- /
,NN/ 0
MessageBoxImageOO +
.OO+ ,
WarningOO, 3
)OO3 4
;OO4 5
}PP 
}QQ 
catchRR 
(RR 
FaultExceptionRR %

fexGeneralRR& 0
)RR0 1
{SS 

MessageBoxTT 
.TT 
ShowTT #
(TT# $
LangUU 
.UU #
alertServerErrorMessageUU 4
,UU4 5
LangVV 
.VV 
alertErrorTitleVV ,
,VV, -
MessageBoxButtonWW (
.WW( )
OKWW) +
,WW+ ,
MessageBoxImageXX '
.XX' (
ErrorXX( -
)XX- .
;XX. /
ConsoleYY 
.YY 
	WriteLineYY %
(YY% &
$"YY& (
$strYY( G
{YYG H

fexGeneralYYH R
.YYR S
MessageYYS Z
}YYZ [
"YY[ \
)YY\ ]
;YY] ^
}ZZ 
catch[[ 
([[ %
EndpointNotFoundException[[ 0
ex[[1 3
)[[3 4
{\\ 

MessageBox]] 
.]] 
Show]] #
(]]# $
Lang^^ 
.^^ '
alertConnectionErrorMessage^^ 8
,^^8 9
Lang__ 
.__ %
alertConnectionErrorTitle__ 6
,__6 7
MessageBoxButton`` (
.``( )
OK``) +
,``+ ,
MessageBoxImageaa '
.aa' (
Erroraa( -
)aa- .
;aa. /
Consolebb 
.bb 
	WriteLinebb %
(bb% &
$"bb& (
$strbb( N
{bbN O
exbbO Q
.bbQ R
MessagebbR Y
}bbY Z
"bbZ [
)bb[ \
;bb\ ]
}cc 
catchdd 
(dd 
	Exceptiondd  
exdd! #
)dd# $
{ee 

MessageBoxff 
.ff 
Showff #
(ff# $
Langgg 
.gg $
alertUnknownErrorMessagegg 5
,gg5 6
Langhh 
.hh 
alertErrorTitlehh ,
,hh, -
MessageBoxButtonii (
.ii( )
OKii) +
,ii+ ,
MessageBoxImagejj '
.jj' (
Errorjj( -
)jj- .
;jj. /
Consolekk 
.kk 
	WriteLinekk %
(kk% &
$"kk& (
$strkk( K
{kkK L
exkkL N
.kkN O
MessagekkO V
}kkV W
"kkW X
)kkX Y
;kkY Z
}ll 
}mm 
}nn 	
privatepp 
staticpp 
voidpp 
OpenLoginWindowpp +
(pp+ ,
objectpp, 2
	parameterpp3 <
)pp< =
{qq 	
varrr 
	loginViewrr 
=rr 
newrr 
	LoginViewrr  )
(rr) *
)rr* +
;rr+ ,
	loginViewss 
.ss 
Showss 
(ss 
)ss 
;ss 
ifuu 
(uu 
	parameteruu 
isuu 
Windowuu #
verifyWindowuu$ 0
)uu0 1
{vv 
verifyWindowww 
.ww 
Closeww "
(ww" #
)ww# $
;ww$ %
}xx 
}yy 	
private{{ 
static{{ 
void{{ 
CloseWindow{{ '
({{' (
object{{( .
	parameter{{/ 8
){{8 9
{|| 	
if}} 
(}} 
	parameter}} 
is}} 
Window}} #
window}}$ *
)}}* +
{~~ 
window 
. 
Close 
( 
) 
; 
}
ÄÄ 
}
ÅÅ 	
}
ÇÇ 
}ÉÉ úc
ßC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Lobby\Dialogs\ChangePasswordViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Lobby& +
.+ ,
Dialogs, 3
{ 
internal 
class #
ChangePasswordViewModel *
:+ ,
ViewModelBase- :
{ 
private 
readonly 
string 
	_username  )
;) *
public 
ICommand 
ConfirmCommand &
{' (
get) ,
;, -
}. /
public 
ICommand 
CloseCommand $
{% &
get' *
;* +
}, -
public #
ChangePasswordViewModel &
(& '
string' -
username. 6
)6 7
{ 	
	_username 
= 
username  
;  !
ConfirmCommand 
= 
new  
RelayCommand! -
(- .
ExecuteConfirm. <
)< =
;= >
CloseCommand 
= 
new 
RelayCommand +
(+ ,
ExecuteClose, 8
)8 9
;9 :
} 	
private 
static 
bool 
IsPasswordSecure ,
(, -
string- 3
password4 <
,< =
out> A
stringB H
errorLangKeyI U
)U V
{ 	
if 
( 
string 
. 
IsNullOrWhiteSpace )
() *
password* 2
)2 3
)3 4
{   
errorLangKey!! 
=!! 
$str!! 3
;!!3 4
return"" 
false"" 
;"" 
}## 
if$$ 
($$ 
password$$ 
.$$ 
Length$$ 
<$$  !
$num$$" #
)$$# $
{%% 
errorLangKey&& 
=&& 
$str&& 6
;&&6 7
return'' 
false'' 
;'' 
}(( 
if)) 
()) 
!)) 
password)) 
.)) 
Any)) 
()) 
char)) "
.))" #
IsUpper))# *
)))* +
)))+ ,
{** 
errorLangKey++ 
=++ 
$str++ 8
;++8 9
return,, 
false,, 
;,, 
}-- 
if.. 
(.. 
!.. 
password.. 
... 
Any.. 
(.. 
char.. "
..." #
IsLower..# *
)..* +
)..+ ,
{// 
errorLangKey00 
=00 
$str00 8
;008 9
return11 
false11 
;11 
}22 
if33 
(33 
!33 
password33 
.33 
Any33 
(33 
char33 "
.33" #
IsDigit33# *
)33* +
)33+ ,
{44 
errorLangKey55 
=55 
$str55 8
;558 9
return66 
false66 
;66 
}77 
if88 
(88 
password88 
.88 
All88 
(88 
char88 !
.88! "
IsLetterOrDigit88" 1
)881 2
)882 3
{99 
errorLangKey:: 
=:: 
$str:: :
;::: ;
return;; 
false;; 
;;; 
}<< 
errorLangKey>> 
=>> 
null>> 
;>>  
return?? 
true?? 
;?? 
}@@ 	
privateBB 
asyncBB 
voidBB 
ExecuteConfirmBB )
(BB) *
objectBB* 0
	parameterBB1 :
)BB: ;
{CC 	
ifDD 
(DD 
!DD 
(DD 
	parameterDD 
isDD 
WindowDD %
windowDD& ,
)DD, -
)DD- .
{EE 
returnFF 
;FF 
}GG 
varII 
newPasswordBoxII 
=II  
windowII! '
.II' (
FindNameII( 0
(II0 1
$strII1 A
)IIA B
asIIC E
PasswordBoxIIF Q
;IIQ R
varJJ 
confirmPasswordBoxJJ "
=JJ# $
windowJJ% +
.JJ+ ,
FindNameJJ, 4
(JJ4 5
$strJJ5 I
)JJI J
asJJK M
PasswordBoxJJN Y
;JJY Z
ifLL 
(LL 
newPasswordBoxLL 
==LL !
nullLL" &
||LL' )
confirmPasswordBoxLL* <
==LL= ?
nullLL@ D
)LLD E
{MM 

MessageBoxNN 
.NN 
ShowNN 
(NN  
LangOO 
.OO )
alertPasswordControlsNotFoundOO 6
,OO6 7
LangPP 
.PP 
alertErrorTitlePP (
,PP( )
MessageBoxButtonQQ $
.QQ$ %
OKQQ% '
,QQ' (
MessageBoxImageRR #
.RR# $
ErrorRR$ )
)RR) *
;RR* +
returnSS 
;SS 
}TT 
stringVV 
newPasswordVV 
=VV  
newPasswordBoxVV! /
.VV/ 0
PasswordVV0 8
;VV8 9
stringWW 
confirmPasswordWW "
=WW# $
confirmPasswordBoxWW% 7
.WW7 8
PasswordWW8 @
;WW@ A
ifYY 
(YY 
!YY 
IsPasswordSecureYY !
(YY! "
newPasswordYY" -
,YY- .
outYY/ 2
stringYY3 9
passwordErrorKeyYY: J
)YYJ K
)YYK L
{ZZ 
string[[  
passwordErrorMessage[[ +
=[[, -
Lang[[. 2
.[[2 3
ResourceManager[[3 B
.[[B C
	GetString[[C L
([[L M
passwordErrorKey[[M ]
)[[] ^
??[[_ a
Lang[[b f
.[[f g&
alertPasswordGenericError	[[g Ä
;
[[Ä Å

MessageBox\\ 
.\\ 
Show\\ 
(\\   
passwordErrorMessage]] (
,]]( )
Lang^^ 
.^^ '
alertPasswordNotSecureTitle^^ 4
,^^4 5
MessageBoxButton__ $
.__$ %
OK__% '
,__' (
MessageBoxImage`` #
.``# $
Warning``$ +
)``+ ,
;``, -
returnaa 
;aa 
}bb 
ifdd 
(dd 
newPassworddd 
!=dd 
confirmPassworddd .
)dd. /
{ee 

MessageBoxff 
.ff 
Showff 
(ff  
Langgg 
.gg $
alertPasswordsDoNotMatchgg 1
,gg1 2
Langhh 
.hh  
alertInputErrorTitlehh -
,hh- .
MessageBoxButtonii $
.ii$ %
OKii% '
,ii' (
MessageBoxImagejj #
.jj# $
Warningjj$ +
)jj+ ,
;jj, -
returnkk 
;kk 
}ll 
trynn 
{oo 
usingpp 
(pp 
varpp 
clientpp !
=pp" #
newpp$ '$
UserProfileServiceClientpp( @
(pp@ A
)ppA B
)ppB C
{qq 
varrr 
resultrr 
=rr  
awaitrr! &
clientrr' -
.rr- .&
RequestChangePasswordAsyncrr. H
(rrH I
	_usernamerrI R
)rrR S
;rrS T
ifss 
(ss 
resultss 
.ss 
Successss &
)ss& '
{tt 

MessageBoxuu "
.uu" #
Showuu# '
(uu' (
resultvv "
.vv" #
Messagevv# *
,vv* +
Langww  
.ww  !
alertCodeSentTitleww! 3
,ww3 4
MessageBoxButtonxx ,
.xx, -
OKxx- /
,xx/ 0
MessageBoxImageyy +
.yy+ ,
Informationyy, 7
)yy7 8
;yy8 9
var{{ 
verifyVM{{ $
={{% &
new{{' *(
VerifyChangesByCodeViewModel{{+ G
({{G H(
VerifyChangesByCodeViewModel|| 8
.||8 9
VerificationMode||9 I
.||I J
Password||J R
,||R S
	_username}} %
,}}% &
newPassword~~ '
,~~' (
null  
)  !
;! "
var
ÄÄ 

verifyView
ÄÄ &
=
ÄÄ' (
new
ÄÄ) ,%
VerifyChangesByCodeView
ÄÄ- D
{
ÄÄE F
DataContext
ÄÄG R
=
ÄÄS T
verifyVM
ÄÄU ]
}
ÄÄ^ _
;
ÄÄ_ `
ExecuteClose
ÇÇ $
(
ÇÇ$ %
	parameter
ÇÇ% .
)
ÇÇ. /
;
ÇÇ/ 0

verifyView
ÉÉ "
.
ÉÉ" #

ShowDialog
ÉÉ# -
(
ÉÉ- .
)
ÉÉ. /
;
ÉÉ/ 0
}
ÑÑ 
else
ÖÖ 
{
ÜÜ 

MessageBox
áá "
.
áá" #
Show
áá# '
(
áá' (
result
àà "
.
àà" #
Message
àà# *
,
àà* +
Lang
ââ  
.
ââ  !
alertErrorTitle
ââ! 0
,
ââ0 1
MessageBoxButton
ää ,
.
ää, -
OK
ää- /
,
ää/ 0
MessageBoxImage
ãã +
.
ãã+ ,
Warning
ãã, 3
)
ãã3 4
;
ãã4 5
}
åå 
}
çç 
}
éé 
catch
èè 
(
èè 
FaultException
èè !

fexGeneral
èè" ,
)
èè, -
{
êê 

MessageBox
ëë 
.
ëë 
Show
ëë 
(
ëë  
Lang
íí 
.
íí %
alertServerErrorMessage
íí 0
,
íí0 1
Lang
ìì 
.
ìì 
alertErrorTitle
ìì (
,
ìì( )
MessageBoxButton
îî $
.
îî$ %
OK
îî% '
,
îî' (
MessageBoxImage
ïï #
.
ïï# $
Error
ïï$ )
)
ïï) *
;
ïï* +
Console
ññ 
.
ññ 
	WriteLine
ññ !
(
ññ! "
$"
ññ" $
$str
ññ$ O
{
ññO P

fexGeneral
ññP Z
.
ññZ [
Message
ññ[ b
}
ññb c
"
ññc d
)
ññd e
;
ññe f
}
óó 
catch
òò 
(
òò '
EndpointNotFoundException
òò ,
ex
òò- /
)
òò/ 0
{
ôô 

MessageBox
öö 
.
öö 
Show
öö 
(
öö  
Lang
õõ 
.
õõ )
alertConnectionErrorMessage
õõ 4
,
õõ4 5
Lang
úú 
.
úú '
alertConnectionErrorTitle
úú 2
,
úú2 3
MessageBoxButton
ùù $
.
ùù$ %
OK
ùù% '
,
ùù' (
MessageBoxImage
ûû #
.
ûû# $
Error
ûû$ )
)
ûû) *
;
ûû* +
Console
üü 
.
üü 
	WriteLine
üü !
(
üü! "
$"
üü" $
$str
üü$ V
{
üüV W
ex
üüW Y
.
üüY Z
Message
üüZ a
}
üüa b
"
üüb c
)
üüc d
;
üüd e
}
†† 
catch
°° 
(
°° 
	Exception
°° 
ex
°° 
)
°°  
{
¢¢ 

MessageBox
££ 
.
££ 
Show
££ 
(
££  
Lang
§§ 
.
§§ &
alertUnknownErrorMessage
§§ 1
,
§§1 2
Lang
•• 
.
•• 
alertErrorTitle
•• (
,
••( )
MessageBoxButton
¶¶ $
.
¶¶$ %
OK
¶¶% '
,
¶¶' (
MessageBoxImage
ßß #
.
ßß# $
Error
ßß$ )
)
ßß) *
;
ßß* +
Console
®® 
.
®® 
	WriteLine
®® !
(
®®! "
$"
®®" $
$str
®®$ S
{
®®S T
ex
®®T V
.
®®V W
Message
®®W ^
}
®®^ _
"
®®_ `
)
®®` a
;
®®a b
}
©© 
}
™™ 	
private
¨¨ 
static
¨¨ 
void
¨¨ 
ExecuteClose
¨¨ (
(
¨¨( )
object
¨¨) /
	parameter
¨¨0 9
)
¨¨9 :
{
≠≠ 	
if
ÆÆ 
(
ÆÆ 
	parameter
ÆÆ 
is
ÆÆ 
Window
ÆÆ #
window
ÆÆ$ *
)
ÆÆ* +
{
ØØ 
window
∞∞ 
.
∞∞ 
Close
∞∞ 
(
∞∞ 
)
∞∞ 
;
∞∞ 
}
±± 
}
≤≤ 	
}
≥≥ 
}¥¥ ¯
¶C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Lobby\Dialogs\InviteByEmailViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Lobby& +
.+ ,
Dialogs, 3
{ 
internal		 
class		 "
InviteByEmailViewModel		 )
:		* +
ViewModelBase		, 9
{

 
} 
} ‘?
§C:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Lobby\Dialogs\ChangeEmailViewModel.cs
	namespace

 	
GuessMyMessClient


 
.

 
	ViewModel

 %
.

% &
Lobby

& +
.

+ ,
Dialogs

, 3
{ 
internal 
class  
ChangeEmailViewModel '
:( )
ViewModelBase* 7
{ 
private 
readonly 
string 
	_username  )
;) *
private 
readonly 
Action 
<  
string  &
>& ' 
_emailUpdateCallback( <
;< =
private 
string 
	_newEmail  
;  !
public 
string 
NewEmail 
{ 	
get 
{ 
return 
	_newEmail  
;  !
} 
set 
{ 
if 
( 
	_newEmail 
!=  
value! &
)& '
{ 
	_newEmail 
= 
value  %
;% &
OnPropertyChanged %
(% &
)& '
;' (
} 
} 
}   	
public"" 
ICommand"" 
ConfirmCommand"" &
{""' (
get"") ,
;"", -
}"". /
public## 
ICommand## 
CloseCommand## $
{##% &
get##' *
;##* +
}##, -
public%%  
ChangeEmailViewModel%% #
(%%# $
string%%$ *
username%%+ 3
,%%3 4
Action%%5 ;
<%%; <
string%%< B
>%%B C
emailUpdateCallback%%D W
)%%W X
{&& 	
	_username'' 
='' 
username''  
;''  ! 
_emailUpdateCallback((  
=((! "
emailUpdateCallback((# 6
;((6 7
ConfirmCommand)) 
=)) 
new))  
RelayCommand))! -
())- .
ExecuteConfirm)). <
,))< =
CanExecuteConfirm))> O
)))O P
;))P Q
CloseCommand** 
=** 
new** 
RelayCommand** +
(**+ ,
ExecuteClose**, 8
)**8 9
;**9 :
}++ 	
private-- 
bool-- 
CanExecuteConfirm-- &
(--& '
object--' -
obj--. 1
)--1 2
{.. 	
return// 
!// 
string// 
.// 
IsNullOrWhiteSpace// -
(//- .
NewEmail//. 6
)//6 7
&&//8 :
NewEmail//; C
.//C D
Contains//D L
(//L M
$str//M P
)//P Q
;//Q R
}00 	
private22 
async22 
void22 
ExecuteConfirm22 )
(22) *
object22* 0
	parameter221 :
)22: ;
{33 	
try44 
{55 
using66 
(66 
var66 
client66 !
=66" #
new66$ '$
UserProfileServiceClient66( @
(66@ A
)66A B
)66B C
{77 
var88 
result88 
=88  
await88! &
client88' -
.88- .#
RequestChangeEmailAsync88. E
(88E F
	_username88F O
,88O P
NewEmail88Q Y
)88Y Z
;88Z [
if99 
(99 
result99 
.99 
Success99 &
)99' (
{:: 

MessageBox;; "
.;;" #
Show;;# '
(;;' (
result<< "
.<<" #
Message<<# *
,<<* +
Lang==  
.==  !
alertCodeSentTitle==! 3
,==3 4
MessageBoxButton>> ,
.>>, -
OK>>- /
,>>/ 0
MessageBoxImage?? +
.??+ ,
Information??, 7
)??7 8
;??8 9
varAA 
verifyVMAA $
=AA% &
newAA' *(
VerifyChangesByCodeViewModelAA+ G
(AAG H(
VerifyChangesByCodeViewModelBB 8
.BB8 9
VerificationModeBB9 I
.BBI J
EmailBBJ O
,BBO P
	_usernameCC %
,CC% &
NewEmailDD $
,DD$ % 
_emailUpdateCallbackEE 0
)FF 
;FF 
varHH 

verifyViewHH &
=HH' (
newHH) ,#
VerifyChangesByCodeViewHH- D
{HHE F
DataContextHHG R
=HHS T
verifyVMHHU ]
}HH^ _
;HH_ `
ExecuteCloseJJ $
(JJ$ %
	parameterJJ% .
)JJ. /
;JJ/ 0

verifyViewKK "
.KK" #

ShowDialogKK# -
(KK- .
)KK. /
;KK/ 0
}LL 
elseMM 
{NN 

MessageBoxOO "
.OO" #
ShowOO# '
(OO' (
resultPP "
.PP" #
MessagePP# *
,PP* +
LangQQ  
.QQ  !
alertErrorTitleQQ! 0
,QQ0 1
MessageBoxButtonRR ,
.RR, -
OKRR- /
,RR/ 0
MessageBoxImageSS +
.SS+ ,
WarningSS, 3
)SS3 4
;SS4 5
}TT 
}UU 
}VV 
catchWW 
(WW 
FaultExceptionWW !

fexGeneralWW" ,
)WW, -
{XX 

MessageBoxYY 
.YY 
ShowYY 
(YY  
LangZZ 
.ZZ #
alertServerErrorMessageZZ 0
,ZZ0 1
Lang[[ 
.[[ 
alertErrorTitle[[ (
,[[( )
MessageBoxButton\\ $
.\\$ %
OK\\% '
,\\' (
MessageBoxImage]] #
.]]# $
Error]]$ )
)]]) *
;]]* +
Console^^ 
.^^ 
	WriteLine^^ !
(^^! "
$"^^" $
$str^^$ G
{^^G H

fexGeneral^^H R
.^^R S
Message^^S Z
}^^Z [
"^^[ \
)^^\ ]
;^^] ^
}__ 
catch`` 
(`` %
EndpointNotFoundException`` ,
ex``- /
)``/ 0
{aa 

MessageBoxbb 
.bb 
Showbb 
(bb  
Langcc 
.cc '
alertConnectionErrorMessagecc 4
,cc4 5
Langdd 
.dd %
alertConnectionErrorTitledd 2
,dd2 3
MessageBoxButtonee $
.ee$ %
OKee% '
,ee' (
MessageBoxImageff #
.ff# $
Errorff$ )
)ff) *
;ff* +
Consolegg 
.gg 
	WriteLinegg !
(gg! "
$"gg" $
$strgg$ N
{ggN O
exggO Q
.ggQ R
MessageggR Y
}ggY Z
"ggZ [
)gg[ \
;gg\ ]
}hh 
catchii 
(ii 
	Exceptionii 
exii 
)ii  
{jj 

MessageBoxkk 
.kk 
Showkk 
(kk  
Langll 
.ll $
alertUnknownErrorMessagell 1
,ll1 2
Langmm 
.mm 
alertErrorTitlemm (
,mm( )
MessageBoxButtonnn $
.nn$ %
OKnn% '
,nn' (
MessageBoxImageoo #
.oo# $
Erroroo$ )
)oo) *
;oo* +
Consolepp 
.pp 
	WriteLinepp !
(pp! "
$"pp" $
$strpp$ K
{ppK L
exppL N
.ppN O
MessageppO V
}ppV W
"ppW X
)ppX Y
;ppY Z
}qq 
}rr 	
privatett 
statictt 
voidtt 
ExecuteClosett (
(tt( )
objecttt) /
	parametertt0 9
)tt9 :
{uu 	
ifvv 
(vv 
	parametervv 
isvv 
Windowvv #
windowvv$ *
)vv* +
{ww 
windowxx 
.xx 
Closexx 
(xx 
)xx 
;xx 
}yy 
}zz 	
}{{ 
}|| πÄ
ûC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\Lobby\ConfigurationViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
Lobby& +
{ 
public 

class "
ConfigurationViewModel '
:( )
ViewModelBase* 7
{ 
public 
ICommand 
LogOutCommand %
{& '
get( +
;+ ,
}- .
private 
bool 

_isSpanish 
;  
private 
bool 

_isEnglish 
;  
private 
string 
_configTitle #
;# $
private 
string 
_soundTitle "
;" #
private 
string 
_soundEffectsLabel )
;) *
private 
string 
_musicLabel "
;" #
private 
string 
_volumeLabel #
;# $
private 
string 
_languageTitle %
;% &
private 
string 
_spanishButtonText )
;) *
private 
string 
_englishButtonText )
;) *
private 
string 
_logoutButtonText (
;( )
public!! 
string!! 
ConfigTitle!! !
{"" 	
get## 
=>## 
_configTitle## 
;##  
set$$ 
{$$ 
_configTitle$$ 
=$$  
value$$! &
;$$& '
OnPropertyChanged$$( 9
($$9 :
nameof$$: @
($$@ A
ConfigTitle$$A L
)$$L M
)$$M N
;$$N O
}$$P Q
}%% 	
public&& 
string&& 

SoundTitle&&  
{'' 	
get(( 
=>(( 
_soundTitle(( 
;(( 
set)) 
{)) 
_soundTitle)) 
=)) 
value))  %
;))% &
OnPropertyChanged))' 8
())8 9
nameof))9 ?
())? @

SoundTitle))@ J
)))J K
)))K L
;))L M
}))N O
}** 	
public++ 
string++ 
SoundEffectsLabel++ '
{,, 	
get-- 
=>-- 
_soundEffectsLabel-- %
;--% &
set.. 
{.. 
_soundEffectsLabel.. $
=..% &
value..' ,
;.., -
OnPropertyChanged... ?
(..? @
nameof..@ F
(..F G
SoundEffectsLabel..G X
)..X Y
)..Y Z
;..Z [
}..\ ]
}// 	
public00 
string00 

MusicLabel00  
{11 	
get22 
=>22 
_musicLabel22 
;22 
set33 
{33 
_musicLabel33 
=33 
value33  %
;33% &
OnPropertyChanged33' 8
(338 9
nameof339 ?
(33? @

MusicLabel33@ J
)33J K
)33K L
;33L M
}33N O
}44 	
public55 
string55 
VolumeLabel55 !
{66 	
get77 
=>77 
_volumeLabel77 
;77  
set88 
{88 
_volumeLabel88 
=88  
value88! &
;88& '
OnPropertyChanged88( 9
(889 :
nameof88: @
(88@ A
VolumeLabel88A L
)88L M
)88M N
;88N O
}88P Q
}99 	
public:: 
string:: 
LanguageTitle:: #
{;; 	
get<< 
=><< 
_languageTitle<< !
;<<! "
set== 
{== 
_languageTitle==  
===! "
value==# (
;==( )
OnPropertyChanged==* ;
(==; <
nameof==< B
(==B C
LanguageTitle==C P
)==P Q
)==Q R
;==R S
}==T U
}>> 	
public?? 
string?? 
SpanishButtonText?? '
{@@ 	
getAA 
=>AA 
_spanishButtonTextAA %
;AA% &
setBB 
{BB 
_spanishButtonTextBB $
=BB% &
valueBB' ,
;BB, -
OnPropertyChangedBB. ?
(BB? @
nameofBB@ F
(BBF G
SpanishButtonTextBBG X
)BBX Y
)BBY Z
;BBZ [
}BB\ ]
}CC 	
publicDD 
stringDD 
EnglishButtonTextDD '
{EE 	
getFF 
=>FF 
_englishButtonTextFF %
;FF% &
setGG 
{GG 
_englishButtonTextGG $
=GG% &
valueGG' ,
;GG, -
OnPropertyChangedGG. ?
(GG? @
nameofGG@ F
(GGF G
EnglishButtonTextGGG X
)GGX Y
)GGY Z
;GGZ [
}GG\ ]
}HH 	
publicII 
stringII 
LogoutButtonTextII &
{JJ 	
getKK 
=>KK 
_logoutButtonTextKK $
;KK$ %
setLL 
{LL 
_logoutButtonTextLL #
=LL$ %
valueLL& +
;LL+ ,
OnPropertyChangedLL- >
(LL> ?
nameofLL? E
(LLE F
LogoutButtonTextLLF V
)LLV W
)LLW X
;LLX Y
}LLZ [
}MM 	
publicOO "
ConfigurationViewModelOO %
(OO% &
)OO& '
{PP 	
LogOutCommandQQ 
=QQ 
newQQ 
RelayCommandQQ  ,
(QQ, -
ExecuteLogoutQQ- :
)QQ: ;
;QQ; <
stringSS 
currentCultureSS !
=SS" #
ThreadSS$ *
.SS* +
CurrentThreadSS+ 8
.SS8 9
CurrentUICultureSS9 I
.SSI J
NameSSJ N
;SSN O
ifTT 
(TT 
currentCultureTT 
.TT 

StartsWithTT )
(TT) *
$strTT* .
)TT. /
)TT/ 0
{UU 

_isSpanishVV 
=VV 
trueVV !
;VV! "
}WW 
elseXX 
{YY 

_isEnglishZZ 
=ZZ 
trueZZ !
;ZZ! "
}[[ $
UpdateLanguageProperties\\ $
(\\$ %
)\\% &
;\\& '
}]] 	
public__ 
bool__ 
	IsSpanish__ 
{`` 	
getaa 
=>aa 

_isSpanishaa 
;aa 
setbb 
{cc 
ifdd 
(dd 
valuedd 
&&dd 
!dd 

_isSpanishdd (
)dd( )
{ee 

_isSpanishff 
=ff  
trueff! %
;ff% &

_isEnglishgg 
=gg  
falsegg! &
;gg& '
ChangeLanguageii "
(ii" #
$strii# *
)ii* +
;ii+ ,
OnPropertyChangedjj %
(jj% &
nameofjj& ,
(jj, -
	IsSpanishjj- 6
)jj6 7
)jj7 8
;jj8 9
OnPropertyChangedkk %
(kk% &
nameofkk& ,
(kk, -
	IsEnglishkk- 6
)kk6 7
)kk7 8
;kk8 9
}ll 
}mm 
}nn 	
publicpp 
boolpp 
	IsEnglishpp 
{qq 	
getrr 
=>rr 

_isEnglishrr 
;rr 
setss 
{tt 
ifuu 
(uu 
valueuu 
&&uu 
!uu 

_isEnglishuu (
)uu( )
{vv 

_isEnglishww 
=ww  
trueww! %
;ww% &

_isSpanishxx 
=xx  
falsexx! &
;xx& '
ChangeLanguagezz "
(zz" #
$strzz# *
)zz* +
;zz+ ,
OnPropertyChanged{{ %
({{% &
nameof{{& ,
({{, -
	IsEnglish{{- 6
){{6 7
){{7 8
;{{8 9
OnPropertyChanged|| %
(||% &
nameof||& ,
(||, -
	IsSpanish||- 6
)||6 7
)||7 8
;||8 9
}}} 
}~~ 
} 	
private
ÅÅ 
static
ÅÅ 
void
ÅÅ 
ChangeLanguage
ÅÅ *
(
ÅÅ* +
string
ÅÅ+ 1
cultureName
ÅÅ2 =
)
ÅÅ= >
{
ÇÇ 	
try
ÉÉ 
{
ÑÑ 
CultureInfo
ÖÖ 

newCulture
ÖÖ &
=
ÖÖ' (
new
ÖÖ) ,
CultureInfo
ÖÖ- 8
(
ÖÖ8 9
cultureName
ÖÖ9 D
)
ÖÖD E
;
ÖÖE F
Thread
áá 
.
áá 
CurrentThread
áá $
.
áá$ %
CurrentCulture
áá% 3
=
áá4 5

newCulture
áá6 @
;
áá@ A
Thread
àà 
.
àà 
CurrentThread
àà $
.
àà$ %
CurrentUICulture
àà% 5
=
àà6 7

newCulture
àà8 B
;
ààB C
Lang
ââ 
.
ââ 
Culture
ââ 
=
ââ 

newCulture
ââ )
;
ââ) *
Window
ãã  
currentLobbyWindow
ãã )
=
ãã* +
Application
ãã, 7
.
ãã7 8
Current
ãã8 ?
.
ãã? @
Windows
ãã@ G
.
ããG H
OfType
ããH N
<
ããN O
	LobbyView
ããO X
>
ããX Y
(
ããY Z
)
ããZ [
.
ãã[ \
FirstOrDefault
ãã\ j
(
ããj k
)
ããk l
;
ããl m
var
çç 
newLobbyView
çç  
=
çç! "
new
çç# &
	LobbyView
çç' 0
(
çç0 1
)
çç1 2
;
çç2 3
newLobbyView
éé 
.
éé 
Show
éé !
(
éé! "
)
éé" #
;
éé# $
if
êê 
(
êê  
currentLobbyWindow
êê &
!=
êê' )
null
êê* .
)
êê. /
{
ëë  
currentLobbyWindow
íí &
.
íí& '
Close
íí' ,
(
íí, -
)
íí- .
;
íí. /
}
ìì 
}
îî 
catch
ïï 
(
ïï 
	Exception
ïï 
ex
ïï 
)
ïï  
{
ññ 

MessageBox
óó 
.
óó 
Show
óó 
(
óó  
$"
óó  "
$str
óó" >
{
óó> ?
ex
óó? A
.
óóA B
Message
óóB I
}
óóI J
"
óóJ K
,
óóK L
$str
óóM T
,
óóT U
MessageBoxButton
óóV f
.
óóf g
OK
óóg i
,
óói j
MessageBoxImage
óók z
.
óóz {
Erroróó{ Ä
)óóÄ Å
;óóÅ Ç
}
òò 
}
ôô 	
private
õõ 
void
õõ &
UpdateLanguageProperties
õõ -
(
õõ- .
)
õõ. /
{
úú 	
ConfigTitle
ùù 
=
ùù 
Lang
ùù 
.
ùù #
configLbConfiguration
ùù 4
;
ùù4 5

SoundTitle
ûû 
=
ûû 
Lang
ûû 
.
ûû 
configLbSound
ûû +
;
ûû+ ,
SoundEffectsLabel
üü 
=
üü 
Lang
üü  $
.
üü$ %"
configLbSoundEffects
üü% 9
;
üü9 :

MusicLabel
†† 
=
†† 
Lang
†† 
.
†† 
configLbMusic
†† +
;
††+ ,
VolumeLabel
°° 
=
°° 
Lang
°° 
.
°° 
configLbVolume
°° -
;
°°- .
LanguageTitle
¢¢ 
=
¢¢ 
Lang
¢¢  
.
¢¢  !
configLbLanguage
¢¢! 1
;
¢¢1 2
SpanishButtonText
££ 
=
££ 
Lang
££  $
.
££$ %
configBtnSpanish
££% 5
;
££5 6
EnglishButtonText
§§ 
=
§§ 
Lang
§§  $
.
§§$ %
configBtnEnglish
§§% 5
;
§§5 6
LogoutButtonText
•• 
=
•• 
Lang
•• #
.
••# $
configtBtnLogOut
••$ 4
;
••4 5
}
¶¶ 	
private
®® 
static
®® 
void
®® 
ExecuteLogout
®® )
(
®®) *
object
®®* 0
	parameter
®®1 :
)
®®: ;
{
©© 	
bool
™™ "
sessionClosedLocally
™™ %
=
™™& '
false
™™( -
;
™™- .
try
´´ 
{
¨¨ 
string
≠≠ 
currentUsername
≠≠ &
=
≠≠' (
SessionManager
≠≠) 7
.
≠≠7 8
Instance
≠≠8 @
.
≠≠@ A
CurrentUsername
≠≠A P
;
≠≠P Q
if
ØØ 
(
ØØ 
!
ØØ 
string
ØØ 
.
ØØ 
IsNullOrEmpty
ØØ )
(
ØØ) *
currentUsername
ØØ* 9
)
ØØ9 :
)
ØØ: ;
{
∞∞ 
using
±± 
(
±± 
var
±± 

authClient
±± )
=
±±* +
new
±±, /)
AuthenticationServiceClient
±±0 K
(
±±K L
)
±±L M
)
±±M N
{
≤≤ 
try
≥≥ 
{
¥¥ 

authClient
µµ &
.
µµ& '
LogOut
µµ' -
(
µµ- .
currentUsername
µµ. =
)
µµ= >
;
µµ> ?
}
∂∂ 
catch
∑∑ 
(
∑∑ $
CommunicationException
∑∑ 5
commEx
∑∑6 <
)
∑∑< =
{
∏∏ 
Console
ππ #
.
ππ# $
	WriteLine
ππ$ -
(
ππ- .
$"
ππ. 0
$str
ππ0 d
{
ππd e
commEx
ππe k
.
ππk l
Message
ππl s
}
ππs t
"
ππt u
)
ππu v
;
ππv w
}
∫∫ 
}
ªª 
}
ºº 
SessionManager
ææ 
.
ææ 
Instance
ææ '
.
ææ' (
CloseSession
ææ( 4
(
ææ4 5
)
ææ5 6
;
ææ6 7"
sessionClosedLocally
øø $
=
øø% &
true
øø' +
;
øø+ ,&
MatchmakingClientManager
¿¿ (
.
¿¿( )
Instance
¿¿) 1
.
¿¿1 2

Disconnect
¿¿2 <
(
¿¿< =
)
¿¿= >
;
¿¿> ?
}
¡¡ 
catch
¬¬ 
(
¬¬ 
	Exception
¬¬ 
ex
¬¬ 
)
¬¬  
{
√√ 
Console
ƒƒ 
.
ƒƒ 
	WriteLine
ƒƒ !
(
ƒƒ! "
$"
ƒƒ" $
$str
ƒƒ$ R
{
ƒƒR S
ex
ƒƒS U
.
ƒƒU V
Message
ƒƒV ]
}
ƒƒ] ^
"
ƒƒ^ _
)
ƒƒ_ `
;
ƒƒ` a
if
≈≈ 
(
≈≈ 
!
≈≈ "
sessionClosedLocally
≈≈ )
)
≈≈) *
{
∆∆ 
SessionManager
«« "
.
««" #
Instance
««# +
.
««+ ,
CloseSession
««, 8
(
««8 9
)
««9 :
;
««: ;
}
»» 
}
…… 
var
ÀÀ 
mainView
ÀÀ 
=
ÀÀ 
new
ÀÀ 
Main
ÀÀ #
(
ÀÀ# $
)
ÀÀ$ %
;
ÀÀ% &
mainView
ÃÃ 
.
ÃÃ 
WindowState
ÃÃ  
=
ÃÃ! "
WindowState
ÃÃ# .
.
ÃÃ. /
	Maximized
ÃÃ/ 8
;
ÃÃ8 9
mainView
ÕÕ 
.
ÕÕ 
WindowStyle
ÕÕ  
=
ÕÕ! "
WindowStyle
ÕÕ# .
.
ÕÕ. /
None
ÕÕ/ 3
;
ÕÕ3 4
mainView
ŒŒ 
.
ŒŒ 

ResizeMode
ŒŒ 
=
ŒŒ  !

ResizeMode
ŒŒ" ,
.
ŒŒ, -
NoResize
ŒŒ- 5
;
ŒŒ5 6
mainView
œœ 
.
œœ 
Show
œœ 
(
œœ 
)
œœ 
;
œœ 
Window
——  
currentLobbyWindow
—— %
=
——& '
Application
——( 3
.
——3 4
Current
——4 ;
.
——; <
Windows
——< C
.
——C D
OfType
——D J
<
——J K
	LobbyView
——K T
>
——T U
(
——U V
)
——V W
.
——W X
FirstOrDefault
——X f
(
——f g
)
——g h
;
——h i
if
”” 
(
””  
currentLobbyWindow
”” "
!=
””# %
null
””& *
)
””* +
{
‘‘  
currentLobbyWindow
’’ "
.
’’" #
Close
’’# (
(
’’( )
)
’’) *
;
’’* +
}
÷÷ 
}
◊◊ 	
}
ÿÿ 
}ŸŸ ¥õ
õC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\HomePages\SignUpViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
	HomePages& /
{ 
public 

class 
SignUpViewModel  
:! "
ViewModelBase# 0
{ 
private 
string 
	_username  
;  !
public 
string 
Username 
{ 	
get 
=> 
	_username 
; 
set 
{ 
if 
( 
	_username 
!=  
value! &
)& '
{ 
	_username   
=   
value    %
;  % &
OnPropertyChanged!! %
(!!% &
)!!& '
;!!' (
}"" 
}## 
}$$ 	
private&& 
string&& 

_firstName&& !
;&&! "
public'' 
string'' 
	FirstName'' 
{(( 	
get)) 
=>)) 

_firstName)) 
;)) 
set** 
{++ 
if,, 
(,, 

_firstName,, 
!=,, !
value,," '
),,' (
{-- 

_firstName.. 
=..  
value..! &
;..& '
OnPropertyChanged// %
(//% &
)//& '
;//' (
}00 
}11 
}22 	
private44 
string44 
	_lastName44  
;44  !
public55 
string55 
LastName55 
{66 	
get77 
=>77 
	_lastName77 
;77 
set88 
{99 
if:: 
(:: 
	_lastName:: 
!=::  
value::! &
)::& '
{;; 
	_lastName<< 
=<< 
value<<  %
;<<% &
OnPropertyChanged== %
(==% &
)==& '
;==' (
}>> 
}?? 
}@@ 	
privateBB 
stringBB 
_emailBB 
;BB 
publicCC 
stringCC 
EmailCC 
{DD 	
getEE 
=>EE 
_emailEE 
;EE 
setFF 
{GG 
ifHH 
(HH 
_emailHH 
!=HH 
valueHH #
)HH# $
{II 
_emailJJ 
=JJ 
valueJJ "
;JJ" #
OnPropertyChangedKK %
(KK% &
)KK& '
;KK' (
}LL 
}MM 
}NN 	
privatePP 
stringPP 
	_passwordPP  
;PP  !
publicQQ 
stringQQ 
PasswordQQ 
{RR 	
getSS 
=>SS 
	_passwordSS 
;SS 
setTT 
{UU 
ifVV 
(VV 
	_passwordVV 
!=VV  
valueVV! &
)VV& '
{WW 
	_passwordXX 
=XX 
valueXX  %
;XX% &
OnPropertyChangedYY %
(YY% &
)YY& '
;YY' (
}ZZ 
}[[ 
}\\ 	
private^^ 
bool^^ 
_isMale^^ 
=^^ 
true^^ #
;^^# $
public__ 
bool__ 
IsMale__ 
{`` 	
getaa 
=>aa 
_isMaleaa 
;aa 
setbb 
{cc 
ifdd 
(dd 
valuedd 
&&dd 
_isMaledd $
!=dd% '
valuedd( -
)dd- .
{ee 
_isMaleff 
=ff 
valueff #
;ff# $
OnPropertyChangedgg %
(gg% &
)gg& '
;gg' (
ResetGenderhh 
(hh  
$numhh  !
)hh! "
;hh" #
}ii 
}jj 
}kk 	
privatemm 
boolmm 
	_isFemalemm 
;mm 
publicnn 
boolnn 
IsFemalenn 
{oo 	
getpp 
=>pp 
	_isFemalepp 
;pp 
setqq 
{rr 
ifss 
(ss 
valuess 
&&ss 
	_isFemaless &
!=ss' )
valuess* /
)ss/ 0
{tt 
	_isFemaleuu 
=uu 
valueuu  %
;uu% &
OnPropertyChangedvv %
(vv% &
)vv& '
;vv' (
ResetGenderww 
(ww  
$numww  !
)ww! "
;ww" #
}xx 
}yy 
}zz 	
private|| 
bool|| 
_isNonBinary|| !
;||! "
public}} 
bool}} 
IsNonBinary}} 
{~~ 	
get 
=> 
_isNonBinary 
;  
set
ÄÄ 
{
ÅÅ 
if
ÇÇ 
(
ÇÇ 
value
ÇÇ 
&&
ÇÇ 
_isNonBinary
ÇÇ )
!=
ÇÇ* ,
value
ÇÇ- 2
)
ÇÇ2 3
{
ÉÉ 
_isNonBinary
ÑÑ  
=
ÑÑ! "
value
ÑÑ# (
;
ÑÑ( )
OnPropertyChanged
ÖÖ %
(
ÖÖ% &
)
ÖÖ& '
;
ÖÖ' (
ResetGender
ÜÜ 
(
ÜÜ  
$num
ÜÜ  !
)
ÜÜ! "
;
ÜÜ" #
}
áá 
}
àà 
}
ââ 	
private
ãã 
int
ãã 
_selectedAvatarId
ãã %
=
ãã& '
$num
ãã( )
;
ãã) *
public
åå 
int
åå 
SelectedAvatarId
åå #
{
çç 	
get
éé 
=>
éé 
_selectedAvatarId
éé $
;
éé$ %
set
èè 
{
êê 
if
ëë 
(
ëë 
_selectedAvatarId
ëë %
!=
ëë& (
value
ëë) .
)
ëë. /
{
íí 
_selectedAvatarId
ìì %
=
ìì& '
value
ìì( -
;
ìì- .
OnPropertyChanged
îî %
(
îî% &
)
îî& '
;
îî' (
}
ïï 
}
ññ 
}
óó 	
private
ôô 
BitmapImage
ôô "
_selectedAvatarImage
ôô 0
;
ôô0 1
public
öö 
BitmapImage
öö !
SelectedAvatarImage
öö .
{
õõ 	
get
úú 
=>
úú "
_selectedAvatarImage
úú '
;
úú' (
set
ùù 
{
ûû 
if
üü 
(
üü "
_selectedAvatarImage
üü (
!=
üü) +
value
üü, 1
)
üü1 2
{
†† "
_selectedAvatarImage
°° (
=
°°) *
value
°°+ 0
;
°°0 1
OnPropertyChanged
¢¢ %
(
¢¢% &
)
¢¢& '
;
¢¢' (
}
££ 
}
§§ 
}
•• 	
public
ßß 
ICommand
ßß 
SignUpCommand
ßß %
{
ßß& '
get
ßß( +
;
ßß+ ,
}
ßß- .
public
®® 
ICommand
®® !
SelectAvatarCommand
®® +
{
®®, -
get
®®. 1
;
®®1 2
}
®®3 4
public
©© 
ICommand
©©  
CloseWindowCommand
©© *
{
©©+ ,
get
©©- 0
;
©©0 1
}
©©2 3
public
™™ 
ICommand
™™ #
MaximizeWindowCommand
™™ -
{
™™. /
get
™™0 3
;
™™3 4
}
™™5 6
public
´´ 
ICommand
´´ #
MinimizeWindowCommand
´´ -
{
´´. /
get
´´0 3
;
´´3 4
}
´´5 6
public
¨¨ 
ICommand
¨¨ 
ReturnCommand
¨¨ %
{
¨¨& '
get
¨¨( +
;
¨¨+ ,
}
¨¨- .
public
ÆÆ 
SignUpViewModel
ÆÆ 
(
ÆÆ 
)
ÆÆ  
{
ØØ 	
SignUpCommand
∞∞ 
=
∞∞ 
new
∞∞ 
RelayCommand
∞∞  ,
(
∞∞, -
ExecuteSignUp
∞∞- :
,
∞∞: ;
CanExecuteSignUp
∞∞< L
)
∞∞L M
;
∞∞M N!
SelectAvatarCommand
±± 
=
±±  !
new
±±" %
RelayCommand
±±& 2
(
±±2 3$
OpenSelectAvatarDialog
±±3 I
)
±±I J
;
±±J K 
CloseWindowCommand
≤≤ 
=
≤≤  
new
≤≤! $
RelayCommand
≤≤% 1
(
≤≤1 2 
ExecuteCloseWindow
≤≤2 D
)
≤≤D E
;
≤≤E F#
MaximizeWindowCommand
≥≥ !
=
≥≥" #
new
≥≥$ '
RelayCommand
≥≥( 4
(
≥≥4 5#
ExecuteMaximizeWindow
≥≥5 J
)
≥≥J K
;
≥≥K L#
MinimizeWindowCommand
¥¥ !
=
¥¥" #
new
¥¥$ '
RelayCommand
¥¥( 4
(
¥¥4 5#
ExecuteMinimizeWindow
¥¥5 J
)
¥¥J K
;
¥¥K L
ReturnCommand
µµ 
=
µµ 
new
µµ 
RelayCommand
µµ  ,
(
µµ, -
ExecuteReturn
µµ- :
)
µµ: ;
;
µµ; <
LoadDefaultAvatar
∂∂ 
(
∂∂ 
)
∂∂ 
;
∂∂  
}
∑∑ 	
private
ππ 
void
ππ 
ResetGender
ππ  
(
ππ  !
int
ππ! $
selectedGenderId
ππ% 5
)
ππ5 6
{
∫∫ 	
bool
ªª 
oldMale
ªª 
=
ªª 
_isMale
ªª "
;
ªª" #
bool
ºº 
	oldFemale
ºº 
=
ºº 
	_isFemale
ºº &
;
ºº& '
bool
ΩΩ 
oldNonBinary
ΩΩ 
=
ΩΩ 
_isNonBinary
ΩΩ  ,
;
ΩΩ, -
_isMale
øø 
=
øø 
(
øø 
selectedGenderId
øø '
==
øø( *
$num
øø+ ,
)
øø, -
;
øø- .
	_isFemale
¿¿ 
=
¿¿ 
(
¿¿ 
selectedGenderId
¿¿ )
==
¿¿* ,
$num
¿¿- .
)
¿¿. /
;
¿¿/ 0
_isNonBinary
¡¡ 
=
¡¡ 
(
¡¡ 
selectedGenderId
¡¡ ,
==
¡¡- /
$num
¡¡0 1
)
¡¡1 2
;
¡¡2 3
if
√√ 
(
√√ 
oldMale
√√ 
!=
√√ 
_isMale
√√ "
)
√√" #
OnPropertyChanged
ƒƒ !
(
ƒƒ! "
nameof
ƒƒ" (
(
ƒƒ( )
IsMale
ƒƒ) /
)
ƒƒ/ 0
)
ƒƒ0 1
;
ƒƒ1 2
if
≈≈ 
(
≈≈ 
	oldFemale
≈≈ 
!=
≈≈ 
	_isFemale
≈≈ &
)
≈≈& '
OnPropertyChanged
∆∆ !
(
∆∆! "
nameof
∆∆" (
(
∆∆( )
IsFemale
∆∆) 1
)
∆∆1 2
)
∆∆2 3
;
∆∆3 4
if
«« 
(
«« 
oldNonBinary
«« 
!=
«« 
_isNonBinary
««  ,
)
««, -
OnPropertyChanged
»» !
(
»»! "
nameof
»»" (
(
»»( )
IsNonBinary
»») 4
)
»»4 5
)
»»5 6
;
»»6 7
}
…… 	
private
ÀÀ 
async
ÀÀ 
Task
ÀÀ 
LoadDefaultAvatar
ÀÀ ,
(
ÀÀ, -
)
ÀÀ- .
{
ÃÃ 	
var
ÕÕ 
client
ÕÕ 
=
ÕÕ 
new
ÕÕ &
UserProfileServiceClient
ÕÕ 5
(
ÕÕ5 6
)
ÕÕ6 7
;
ÕÕ7 8
bool
ŒŒ 
success
ŒŒ 
=
ŒŒ 
false
ŒŒ  
;
ŒŒ  !
try
œœ 
{
–– 
var
—— 
avatars
—— 
=
—— 
await
—— #
client
——$ *
.
——* +&
GetAvailableAvatarsAsync
——+ C
(
——C D
)
——D E
;
——E F
if
““ 
(
““ 
avatars
““ 
!=
““ 
null
““ #
&&
““$ &
avatars
““' .
.
““. /
Any
““/ 2
(
““2 3
)
““3 4
)
““4 5
{
”” 
var
‘‘ 
defaultAvatar
‘‘ %
=
‘‘& '
avatars
‘‘( /
.
‘‘/ 0
FirstOrDefault
‘‘0 >
(
‘‘> ?
a
‘‘? @
=>
‘‘A C
a
‘‘D E
.
‘‘E F
IdAvatar
‘‘F N
==
‘‘O Q
$num
‘‘R S
)
‘‘S T
??
‘‘U W
avatars
‘‘X _
[
‘‘_ `
$num
‘‘` a
]
‘‘a b
;
‘‘b c
SelectedAvatarId
’’ $
=
’’% &
defaultAvatar
’’' 4
.
’’4 5
IdAvatar
’’5 =
;
’’= >!
SelectedAvatarImage
÷÷ '
=
÷÷( ) 
ConvertByteToImage
÷÷* <
(
÷÷< =
defaultAvatar
÷÷= J
.
÷÷J K

AvatarData
÷÷K U
)
÷÷U V
;
÷÷V W
}
◊◊ 
client
ÿÿ 
.
ÿÿ 
Close
ÿÿ 
(
ÿÿ 
)
ÿÿ 
;
ÿÿ 
success
ŸŸ 
=
ŸŸ 
true
ŸŸ 
;
ŸŸ 
}
⁄⁄ 
catch
€€ 
(
€€ 
FaultException
€€ !
)
€€! "
{
‹‹ 

MessageBox
›› 
.
›› 
Show
›› 
(
››  
Lang
››  $
.
››$ %%
alertServerErrorMessage
››% <
,
››< =
Lang
››> B
.
››B C
alertErrorTitle
››C R
,
››R S
MessageBoxButton
››T d
.
››d e
OK
››e g
,
››g h
MessageBoxImage
››i x
.
››x y
Error
››y ~
)
››~ 
;›› Ä
}
ﬁﬁ 
catch
ﬂﬂ 
(
ﬂﬂ '
EndpointNotFoundException
ﬂﬂ ,
)
ﬂﬂ, -
{
‡‡ 

MessageBox
·· 
.
·· 
Show
·· 
(
··  
Lang
··  $
.
··$ %)
alertConnectionErrorMessage
··% @
,
··@ A
Lang
··B F
.
··F G'
alertConnectionErrorTitle
··G `
,
··` a
MessageBoxButton
··b r
.
··r s
OK
··s u
,
··u v
MessageBoxImage··w Ü
.··Ü á
Error··á å
)··å ç
;··ç é
}
‚‚ 
catch
„„ 
{
‰‰ 

MessageBox
ÂÂ 
.
ÂÂ 
Show
ÂÂ 
(
ÂÂ  
Lang
ÂÂ  $
.
ÂÂ$ %"
alertAvatarLoadError
ÂÂ% 9
,
ÂÂ9 :
Lang
ÂÂ; ?
.
ÂÂ? @
alertErrorTitle
ÂÂ@ O
,
ÂÂO P
MessageBoxButton
ÂÂQ a
.
ÂÂa b
OK
ÂÂb d
,
ÂÂd e
MessageBoxImage
ÂÂf u
.
ÂÂu v
Error
ÂÂv {
)
ÂÂ{ |
;
ÂÂ| }
}
ÊÊ 
finally
ÁÁ 
{
ËË 
if
ÈÈ 
(
ÈÈ 
!
ÈÈ 
success
ÈÈ 
&&
ÈÈ 
client
ÈÈ  &
.
ÈÈ& '
State
ÈÈ' ,
!=
ÈÈ- / 
CommunicationState
ÈÈ0 B
.
ÈÈB C
Closed
ÈÈC I
)
ÈÈI J
client
ÍÍ 
.
ÍÍ 
Abort
ÍÍ  
(
ÍÍ  !
)
ÍÍ! "
;
ÍÍ" #
}
ÎÎ 
}
ÏÏ 	
private
ÓÓ 
void
ÓÓ $
OpenSelectAvatarDialog
ÓÓ +
(
ÓÓ+ ,
object
ÓÓ, 2
	parameter
ÓÓ3 <
)
ÓÓ< =
{
ÔÔ 	
var
 
selectAvatarView
  
=
! "
new
# &
SelectAvatarView
' 7
(
7 8
)
8 9
;
9 :
var
ÒÒ #
selectAvatarViewModel
ÒÒ %
=
ÒÒ& '
new
ÒÒ( +#
SelectAvatarViewModel
ÒÒ, A
(
ÒÒA B
SelectedAvatarId
ÒÒB R
)
ÒÒR S
;
ÒÒS T#
selectAvatarViewModel
ÚÚ !
.
ÚÚ! "
AvatarSelected
ÚÚ" 0
+=
ÚÚ1 3
OnAvatarSelected
ÚÚ4 D
;
ÚÚD E
selectAvatarView
ÛÛ 
.
ÛÛ 
DataContext
ÛÛ (
=
ÛÛ) *#
selectAvatarViewModel
ÛÛ+ @
;
ÛÛ@ A
selectAvatarView
ÙÙ 
.
ÙÙ 

ShowDialog
ÙÙ '
(
ÙÙ' (
)
ÙÙ( )
;
ÙÙ) *#
selectAvatarViewModel
ıı !
.
ıı! "
AvatarSelected
ıı" 0
-=
ıı1 3
OnAvatarSelected
ıı4 D
;
ııD E
}
ˆˆ 	
private
¯¯ 
void
¯¯ 
OnAvatarSelected
¯¯ %
(
¯¯% &
AvatarModel
¯¯& 1
avatar
¯¯2 8
)
¯¯8 9
{
˘˘ 	
if
˙˙ 
(
˙˙ 
avatar
˙˙ 
!=
˙˙ 
null
˙˙ 
)
˙˙ 
{
˚˚ 
SelectedAvatarId
¸¸  
=
¸¸! "
avatar
¸¸# )
.
¸¸) *
Id
¸¸* ,
;
¸¸, -!
SelectedAvatarImage
˝˝ #
=
˝˝$ %
avatar
˝˝& ,
.
˝˝, -
ImageSource
˝˝- 8
;
˝˝8 9
}
˛˛ 
}
ˇˇ 	
private
ÅÅ 
static
ÅÅ 
bool
ÅÅ 
IsValidEmail
ÅÅ (
(
ÅÅ( )
string
ÅÅ) /
email
ÅÅ0 5
)
ÅÅ5 6
{
ÇÇ 	
if
ÉÉ 
(
ÉÉ 
string
ÉÉ 
.
ÉÉ  
IsNullOrWhiteSpace
ÉÉ )
(
ÉÉ) *
email
ÉÉ* /
)
ÉÉ/ 0
)
ÉÉ0 1
return
ÑÑ 
false
ÑÑ 
;
ÑÑ 
try
ÜÜ 
{
áá 
var
àà 
regex
àà 
=
àà 
new
àà 
Regex
àà  %
(
àà% &
$str
àà& H
,
ààH I
RegexOptions
ààJ V
.
ààV W

IgnoreCase
ààW a
,
ààa b
TimeSpan
ààc k
.
ààk l
FromMilliseconds
ààl |
(
àà| }
$numàà} Ä
)ààÄ Å
)ààÅ Ç
;ààÇ É
return
ââ 
regex
ââ 
.
ââ 
IsMatch
ââ $
(
ââ$ %
email
ââ% *
)
ââ* +
;
ââ+ ,
}
ää 
catch
ãã 
(
ãã (
RegexMatchTimeoutException
ãã -
)
ãã- .
{
åå 
return
çç 
false
çç 
;
çç 
}
éé 
}
èè 	
private
ëë 
static
ëë 
bool
ëë 
IsPasswordSecure
ëë ,
(
ëë, -
string
ëë- 3
password
ëë4 <
,
ëë< =
out
ëë> A
string
ëëB H
errorLangKey
ëëI U
)
ëëU V
{
íí 	
if
ìì 
(
ìì 
string
ìì 
.
ìì  
IsNullOrWhiteSpace
ìì )
(
ìì) *
password
ìì* 2
)
ìì2 3
)
ìì3 4
{
îî 
errorLangKey
ïï 
=
ïï 
$str
ïï 3
;
ïï3 4
return
ññ 
false
ññ 
;
ññ 
}
óó 
if
òò 
(
òò 
password
òò 
.
òò 
Length
òò 
<
òò  !
$num
òò" #
)
òò# $
{
ôô 
errorLangKey
öö 
=
öö 
$str
öö 6
;
öö6 7
return
õõ 
false
õõ 
;
õõ 
}
úú 
if
ùù 
(
ùù 
!
ùù 
password
ùù 
.
ùù 
Any
ùù 
(
ùù 
char
ùù "
.
ùù" #
IsUpper
ùù# *
)
ùù* +
)
ùù+ ,
{
ûû 
errorLangKey
üü 
=
üü 
$str
üü 8
;
üü8 9
return
†† 
false
†† 
;
†† 
}
°° 
if
¢¢ 
(
¢¢ 
!
¢¢ 
password
¢¢ 
.
¢¢ 
Any
¢¢ 
(
¢¢ 
char
¢¢ "
.
¢¢" #
IsLower
¢¢# *
)
¢¢* +
)
¢¢+ ,
{
££ 
errorLangKey
§§ 
=
§§ 
$str
§§ 8
;
§§8 9
return
•• 
false
•• 
;
•• 
}
¶¶ 
if
ßß 
(
ßß 
!
ßß 
password
ßß 
.
ßß 
Any
ßß 
(
ßß 
char
ßß "
.
ßß" #
IsDigit
ßß# *
)
ßß* +
)
ßß+ ,
{
®® 
errorLangKey
©© 
=
©© 
$str
©© 8
;
©©8 9
return
™™ 
false
™™ 
;
™™ 
}
´´ 
if
¨¨ 
(
¨¨ 
password
¨¨ 
.
¨¨ 
All
¨¨ 
(
¨¨ 
char
¨¨ !
.
¨¨! "
IsLetterOrDigit
¨¨" 1
)
¨¨1 2
)
¨¨2 3
{
≠≠ 
errorLangKey
ÆÆ 
=
ÆÆ 
$str
ÆÆ :
;
ÆÆ: ;
return
ØØ 
false
ØØ 
;
ØØ 
}
∞∞ 
errorLangKey
≤≤ 
=
≤≤ 
null
≤≤ 
;
≤≤  
return
≥≥ 
true
≥≥ 
;
≥≥ 
}
¥¥ 	
private
∂∂ 
bool
∂∂ 
CanExecuteSignUp
∂∂ %
(
∂∂% &
object
∂∂& ,
	parameter
∂∂- 6
)
∂∂6 7
{
∑∑ 	
return
∏∏ 
!
∏∏ 
string
∏∏ 
.
∏∏  
IsNullOrWhiteSpace
∏∏ -
(
∏∏- .
Username
∏∏. 6
)
∏∏6 7
&&
∏∏8 :
!
ππ 
string
ππ 
.
ππ  
IsNullOrWhiteSpace
ππ -
(
ππ- .
	FirstName
ππ. 7
)
ππ7 8
&&
ππ9 ;
!
∫∫ 
string
∫∫ 
.
∫∫  
IsNullOrWhiteSpace
∫∫ -
(
∫∫- .
LastName
∫∫. 6
)
∫∫6 7
&&
∫∫8 :
!
ªª 
string
ªª 
.
ªª  
IsNullOrWhiteSpace
ªª -
(
ªª- .
Email
ªª. 3
)
ªª3 4
&&
ªª5 7
!
ºº 
string
ºº 
.
ºº  
IsNullOrWhiteSpace
ºº -
(
ºº- .
Password
ºº. 6
)
ºº6 7
&&
ºº8 :
(
ΩΩ 
IsMale
ΩΩ 
||
ΩΩ 
IsFemale
ΩΩ &
||
ΩΩ' )
IsNonBinary
ΩΩ* 5
)
ΩΩ5 6
;
ΩΩ6 7
}
ææ 	
private
¿¿ 
async
¿¿ 
void
¿¿ 
ExecuteSignUp
¿¿ (
(
¿¿( )
object
¿¿) /
	parameter
¿¿0 9
)
¿¿9 :
{
¡¡ 	
if
¬¬ 
(
¬¬ 
!
¬¬ 
CanExecuteSignUp
¬¬ !
(
¬¬! "
	parameter
¬¬" +
)
¬¬+ ,
)
¬¬, -
{
√√ 

MessageBox
ƒƒ 
.
ƒƒ 
Show
ƒƒ 
(
ƒƒ  
Lang
ƒƒ  $
.
ƒƒ$ %$
alertAllFieldsRequired
ƒƒ% ;
,
ƒƒ; <
Lang
ƒƒ= A
.
ƒƒA B"
alertInputErrorTitle
ƒƒB V
,
ƒƒV W
MessageBoxButton
ƒƒX h
.
ƒƒh i
OK
ƒƒi k
,
ƒƒk l
MessageBoxImage
ƒƒm |
.
ƒƒ| }
Warningƒƒ} Ñ
)ƒƒÑ Ö
;ƒƒÖ Ü
return
≈≈ 
;
≈≈ 
}
∆∆ 
if
»» 
(
»» 
!
»» 
IsValidEmail
»» 
(
»» 
Email
»» #
)
»»# $
)
»»$ %
{
…… 

MessageBox
   
.
   
Show
   
(
    
Lang
    $
.
  $ %%
alertInvalidEmailFormat
  % <
,
  < =
Lang
  > B
.
  B C$
alertInvalidEmailTitle
  C Y
,
  Y Z
MessageBoxButton
  [ k
.
  k l
OK
  l n
,
  n o
MessageBoxImage
  p 
.   Ä
Warning  Ä á
)  á à
;  à â
return
ÀÀ 
;
ÀÀ 
}
ÃÃ 
if
ŒŒ 
(
ŒŒ 
!
ŒŒ 
IsPasswordSecure
ŒŒ !
(
ŒŒ! "
Password
ŒŒ" *
,
ŒŒ* +
out
ŒŒ, /
string
ŒŒ0 6
passwordErrorKey
ŒŒ7 G
)
ŒŒG H
)
ŒŒH I
{
œœ 
string
–– "
passwordErrorMessage
–– +
=
––, -
Lang
––. 2
.
––2 3
ResourceManager
––3 B
.
––B C
	GetString
––C L
(
––L M
passwordErrorKey
––M ]
)
––] ^
??
––_ a
Lang
––b f
.
––f g(
alertPasswordGenericError––g Ä
;––Ä Å

MessageBox
—— 
.
—— 
Show
—— 
(
——  "
passwordErrorMessage
——  4
,
——4 5
Lang
——6 :
.
——: ;)
alertPasswordNotSecureTitle
——; V
,
——V W
MessageBoxButton
——X h
.
——h i
OK
——i k
,
——k l
MessageBoxImage
——m |
.
——| }
Warning——} Ñ
)——Ñ Ö
;——Ö Ü
return
““ 
;
““ 
}
”” 
int
’’ 
genderId
’’ 
;
’’ 
if
÷÷ 
(
÷÷ 
IsMale
÷÷ 
)
÷÷ 
{
◊◊ 
genderId
ÿÿ 
=
ÿÿ 
$num
ÿÿ 
;
ÿÿ 
}
ŸŸ 
else
⁄⁄ 
if
⁄⁄ 
(
⁄⁄ 
IsFemale
⁄⁄ 
)
⁄⁄ 
{
€€ 
genderId
‹‹ 
=
‹‹ 
$num
‹‹ 
;
‹‹ 
}
›› 
else
ﬁﬁ 
{
ﬂﬂ 
genderId
‡‡ 
=
‡‡ 
$num
‡‡ 
;
‡‡ 
}
·· 
var
‚‚ 
newUserProfile
‚‚ 
=
‚‚  
new
‚‚! $
AuthService
‚‚% 0
.
‚‚0 1
UserProfileDto
‚‚1 ?
{
„„ 
Username
‰‰ 
=
‰‰ 
Username
‰‰ #
,
‰‰# $
	FirstName
ÂÂ 
=
ÂÂ 
	FirstName
ÂÂ %
,
ÂÂ% &
LastName
ÊÊ 
=
ÊÊ 
LastName
ÊÊ #
,
ÊÊ# $
Email
ÁÁ 
=
ÁÁ 
Email
ÁÁ 
,
ÁÁ 
GenderId
ËË 
=
ËË 
genderId
ËË #
,
ËË# $
AvatarId
ÈÈ 
=
ÈÈ 
SelectedAvatarId
ÈÈ +
}
ÍÍ 
;
ÍÍ 
var
ÏÏ 
client
ÏÏ 
=
ÏÏ 
new
ÏÏ )
AuthenticationServiceClient
ÏÏ 8
(
ÏÏ8 9
)
ÏÏ9 :
;
ÏÏ: ;
bool
ÌÌ 
success
ÌÌ 
=
ÌÌ 
false
ÌÌ  
;
ÌÌ  !
try
ÓÓ 
{
ÔÔ 
var
 
result
 
=
 
await
 "
client
# )
.
) *
RegisterAsync
* 7
(
7 8
newUserProfile
8 F
,
F G
Password
H P
)
P Q
;
Q R
if
ÚÚ 
(
ÚÚ 
result
ÚÚ 
.
ÚÚ 
Success
ÚÚ "
)
ÚÚ" #
{
ÛÛ 

MessageBox
ÙÙ 
.
ÙÙ 
Show
ÙÙ #
(
ÙÙ# $
Lang
ÙÙ$ (
.
ÙÙ( )&
alertRegistrationSuccess
ÙÙ) A
+
ÙÙB C
$str
ÙÙD G
+
ÙÙH I
result
ÙÙJ P
.
ÙÙP Q
Message
ÙÙQ X
,
ÙÙX Y
Lang
ÙÙZ ^
.
ÙÙ^ _
alertSuccessTitle
ÙÙ_ p
,
ÙÙp q
MessageBoxButtonÙÙr Ç
.ÙÙÇ É
OKÙÙÉ Ö
,ÙÙÖ Ü
MessageBoxImageÙÙá ñ
.ÙÙñ ó
InformationÙÙó ¢
)ÙÙ¢ £
;ÙÙ£ §$
OpenVerificationDialog
ıı *
(
ıı* +
	parameter
ıı+ 4
)
ıı4 5
;
ıı5 6
client
ˆˆ 
.
ˆˆ 
Close
ˆˆ  
(
ˆˆ  !
)
ˆˆ! "
;
ˆˆ" #
success
˜˜ 
=
˜˜ 
true
˜˜ "
;
˜˜" #
}
¯¯ 
else
˘˘ 
{
˙˙ 

MessageBox
˚˚ 
.
˚˚ 
Show
˚˚ #
(
˚˚# $
result
˚˚$ *
.
˚˚* +
Message
˚˚+ 2
,
˚˚2 3
Lang
˚˚4 8
.
˚˚8 9)
alertRegistrationErrorTitle
˚˚9 T
,
˚˚T U
MessageBoxButton
˚˚V f
.
˚˚f g
OK
˚˚g i
,
˚˚i j
MessageBoxImage
˚˚k z
.
˚˚z {
Error˚˚{ Ä
)˚˚Ä Å
;˚˚Å Ç
}
¸¸ 
}
˝˝ 
catch
˛˛ 
(
˛˛ 
FaultException
˛˛ !
<
˛˛! "
string
˛˛" (
>
˛˛( )
fex
˛˛* -
)
˛˛- .
{
ˇˇ 

MessageBox
ÄÄ 
.
ÄÄ 
Show
ÄÄ 
(
ÄÄ  
fex
ÄÄ  #
.
ÄÄ# $
Detail
ÄÄ$ *
,
ÄÄ* +
Lang
ÄÄ, 0
.
ÄÄ0 1)
alertRegistrationErrorTitle
ÄÄ1 L
,
ÄÄL M
MessageBoxButton
ÄÄN ^
.
ÄÄ^ _
OK
ÄÄ_ a
,
ÄÄa b
MessageBoxImage
ÄÄc r
.
ÄÄr s
Error
ÄÄs x
)
ÄÄx y
;
ÄÄy z
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ 
FaultException
ÇÇ !
)
ÇÇ! "
{
ÉÉ 

MessageBox
ÑÑ 
.
ÑÑ 
Show
ÑÑ 
(
ÑÑ  
Lang
ÑÑ  $
.
ÑÑ$ %%
alertServerErrorMessage
ÑÑ% <
,
ÑÑ< =
Lang
ÑÑ> B
.
ÑÑB C
alertErrorTitle
ÑÑC R
,
ÑÑR S
MessageBoxButton
ÑÑT d
.
ÑÑd e
OK
ÑÑe g
,
ÑÑg h
MessageBoxImage
ÑÑi x
.
ÑÑx y
Error
ÑÑy ~
)
ÑÑ~ 
;ÑÑ Ä
}
ÖÖ 
catch
ÜÜ 
(
ÜÜ '
EndpointNotFoundException
ÜÜ ,
)
ÜÜ, -
{
áá 

MessageBox
àà 
.
àà 
Show
àà 
(
àà  
Lang
àà  $
.
àà$ %)
alertConnectionErrorMessage
àà% @
,
àà@ A
Lang
ààB F
.
ààF G'
alertConnectionErrorTitle
ààG `
,
àà` a
MessageBoxButton
ààb r
.
ààr s
OK
ààs u
,
ààu v
MessageBoxImageààw Ü
.ààÜ á
Errorààá å
)ààå ç
;ààç é
}
ââ 
catch
ää 
{
ãã 

MessageBox
åå 
.
åå 
Show
åå 
(
åå  
Lang
åå  $
.
åå$ %&
alertUnknownErrorMessage
åå% =
,
åå= >
Lang
åå? C
.
ååC D
alertErrorTitle
ååD S
,
ååS T
MessageBoxButton
ååU e
.
ååe f
OK
ååf h
,
ååh i
MessageBoxImage
ååj y
.
ååy z
Error
ååz 
)åå Ä
;ååÄ Å
}
çç 
finally
éé 
{
èè 
if
êê 
(
êê 
!
êê 
success
êê 
&&
êê 
client
êê  &
.
êê& '
State
êê' ,
!=
êê- / 
CommunicationState
êê0 B
.
êêB C
Closed
êêC I
)
êêI J
client
ëë 
.
ëë 
Abort
ëë  
(
ëë  !
)
ëë! "
;
ëë" #
}
íí 
}
ìì 	
private
ïï 
void
ïï $
OpenVerificationDialog
ïï +
(
ïï+ ,
object
ïï, 2
	parameter
ïï3 <
)
ïï< =
{
ññ 	
var
óó 

verifyView
óó 
=
óó 
new
óó  
VerifyByCodeView
óó! 1
(
óó1 2
)
óó2 3
;
óó3 4

verifyView
òò 
.
òò 
DataContext
òò "
=
òò# $
new
òò% (#
VerifyByCodeViewModel
òò) >
(
òò> ?
Email
òò? D
)
òòD E
;
òòE F

verifyView
ôô 
.
ôô 
Show
ôô 
(
ôô 
)
ôô 
;
ôô 
if
õõ 
(
õõ 
	parameter
õõ 
is
õõ 
Window
õõ #
signUpWindow
õõ$ 0
)
õõ0 1
signUpWindow
úú 
.
úú 
Close
úú "
(
úú" #
)
úú# $
;
úú$ %
}
ùù 	
private
üü 
static
üü 
void
üü  
ExecuteCloseWindow
üü .
(
üü. /
object
üü/ 5
	parameter
üü6 ?
)
üü? @
{
†† 	
if
°° 
(
°° 
	parameter
°° 
is
°° 
Window
°° #
)
°°# $
Application
¢¢ 
.
¢¢ 
Current
¢¢ #
.
¢¢# $
Shutdown
¢¢$ ,
(
¢¢, -
)
¢¢- .
;
¢¢. /
}
££ 	
private
•• 
static
•• 
void
•• #
ExecuteMaximizeWindow
•• 1
(
••1 2
object
••2 8
	parameter
••9 B
)
••B C
{
¶¶ 	
if
ßß 
(
ßß 
	parameter
ßß 
is
ßß 
Window
ßß #
window
ßß$ *
)
ßß* +
window
®® 
.
®® 
WindowState
®® "
=
®®# $
window
®®% +
.
®®+ ,
WindowState
®®, 7
==
®®8 :
WindowState
®®; F
.
®®F G
	Maximized
®®G P
?
®®Q R
WindowState
®®S ^
.
®®^ _
Normal
®®_ e
:
®®f g
WindowState
®®h s
.
®®s t
	Maximized
®®t }
;
®®} ~
}
©© 	
private
´´ 
static
´´ 
void
´´ #
ExecuteMinimizeWindow
´´ 1
(
´´1 2
object
´´2 8
	parameter
´´9 B
)
´´B C
{
¨¨ 	
if
≠≠ 
(
≠≠ 
	parameter
≠≠ 
is
≠≠ 
Window
≠≠ #
window
≠≠$ *
)
≠≠* +
window
ÆÆ 
.
ÆÆ 
WindowState
ÆÆ "
=
ÆÆ# $
WindowState
ÆÆ% 0
.
ÆÆ0 1
	Minimized
ÆÆ1 :
;
ÆÆ: ;
}
ØØ 	
private
±± 
static
±± 
void
±± 
ExecuteReturn
±± )
(
±±) *
object
±±* 0
	parameter
±±1 :
)
±±: ;
{
≤≤ 	
if
≥≥ 
(
≥≥ 
	parameter
≥≥ 
is
≥≥ 
Window
≥≥ #
currentWindow
≥≥$ 1
)
≥≥1 2
{
¥¥ 
var
µµ 
welcomeView
µµ 
=
µµ  !
new
µµ" %
WelcomeView
µµ& 1
(
µµ1 2
)
µµ2 3
;
µµ3 4
welcomeView
∂∂ 
.
∂∂ 
Show
∂∂  
(
∂∂  !
)
∂∂! "
;
∂∂" #
currentWindow
∑∑ 
.
∑∑ 
Close
∑∑ #
(
∑∑# $
)
∑∑$ %
;
∑∑% &
}
∏∏ 
}
ππ 	
public
ªª 
static
ªª 
BitmapImage
ªª ! 
ConvertByteToImage
ªª" 4
(
ªª4 5
byte
ªª5 9
[
ªª9 :
]
ªª: ;

imageBytes
ªª< F
)
ªªF G
{
ºº 	
if
ΩΩ 
(
ΩΩ 

imageBytes
ΩΩ 
==
ΩΩ 
null
ΩΩ "
||
ΩΩ# %

imageBytes
ΩΩ& 0
.
ΩΩ0 1
Length
ΩΩ1 7
==
ΩΩ8 :
$num
ΩΩ; <
)
ΩΩ< =
return
ææ 
null
ææ 
;
ææ 
var
¿¿ 
image
¿¿ 
=
¿¿ 
new
¿¿ 
BitmapImage
¿¿ '
(
¿¿' (
)
¿¿( )
;
¿¿) *
using
¡¡ 
(
¡¡ 
var
¡¡ 
mem
¡¡ 
=
¡¡ 
new
¡¡  
MemoryStream
¡¡! -
(
¡¡- .

imageBytes
¡¡. 8
)
¡¡8 9
)
¡¡9 :
{
¬¬ 
mem
√√ 
.
√√ 
Position
√√ 
=
√√ 
$num
√√  
;
√√  !
image
ƒƒ 
.
ƒƒ 
	BeginInit
ƒƒ 
(
ƒƒ  
)
ƒƒ  !
;
ƒƒ! "
image
≈≈ 
.
≈≈ 
CreateOptions
≈≈ #
=
≈≈$ %!
BitmapCreateOptions
≈≈& 9
.
≈≈9 :!
PreservePixelFormat
≈≈: M
;
≈≈M N
image
∆∆ 
.
∆∆ 
CacheOption
∆∆ !
=
∆∆" #
BitmapCacheOption
∆∆$ 5
.
∆∆5 6
OnLoad
∆∆6 <
;
∆∆< =
image
«« 
.
«« 
	UriSource
«« 
=
««  !
null
««" &
;
««& '
image
»» 
.
»» 
StreamSource
»» "
=
»»# $
mem
»»% (
;
»»( )
image
…… 
.
…… 
EndInit
…… 
(
…… 
)
…… 
;
……  
}
   
image
ÀÀ 
.
ÀÀ 
Freeze
ÀÀ 
(
ÀÀ 
)
ÀÀ 
;
ÀÀ 
return
ÃÃ 
image
ÃÃ 
;
ÃÃ 
}
ÕÕ 	
}
ŒŒ 
}œœ €k
öC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\HomePages\LoginViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
	HomePages& /
{ 
public 

class 
LoginViewModel 
:  !
ViewModelBase" /
{ 
private 
string 
_usernameOrEmail '
;' (
public 
string 
UsernameOrEmail %
{ 	
get 
=> 
_usernameOrEmail #
;# $
set 
{ 
_usernameOrEmail  
=! "
value# (
;( )
OnPropertyChanged !
(! "
)" #
;# $
} 
} 	
private 
string 
	_password  
;  !
public 
string 
Password 
{   	
get!! 
=>!! 
	_password!! 
;!! 
set"" 
{## 
	_password$$ 
=$$ 
value$$ !
;$$! "
OnPropertyChanged%% !
(%%! "
)%%" #
;%%# $
CommandManager&& 
.&& &
InvalidateRequerySuggested&& 9
(&&9 :
)&&: ;
;&&; <
}'' 
}(( 	
public** 
ICommand** 
LoginCommand** $
{**% &
get**' *
;*** +
}**, -
public++ 
ICommand++ 
CloseWindowCommand++ *
{+++ ,
get++- 0
;++0 1
}++2 3
public,, 
ICommand,, !
MaximizeWindowCommand,, -
{,,. /
get,,0 3
;,,3 4
},,5 6
public-- 
ICommand-- !
MinimizeWindowCommand-- -
{--. /
get--0 3
;--3 4
}--5 6
public.. 
ICommand.. 
ReturnCommand.. %
{..& '
get..( +
;..+ ,
}..- .
public00 
LoginViewModel00 
(00 
)00 
{11 	
LoginCommand22 
=22 
new22 
RelayCommand22 +
(22+ ,
ExecuteLogin22, 8
,228 9
CanExecuteLogin22: I
)22I J
;22J K
CloseWindowCommand33 
=33  
new33! $
RelayCommand33% 1
(331 2
ExecuteCloseWindow332 D
)33D E
;33E F!
MaximizeWindowCommand44 !
=44" #
new44$ '
RelayCommand44( 4
(444 5!
ExecuteMaximizeWindow445 J
)44J K
;44K L!
MinimizeWindowCommand55 !
=55" #
new55$ '
RelayCommand55( 4
(554 5!
ExecuteMinimizeWindow555 J
)55J K
;55K L
ReturnCommand66 
=66 
new66 
RelayCommand66  ,
(66, -
ExecuteReturn66- :
)66: ;
;66; <
}77 	
private99 
bool99 
CanExecuteLogin99 $
(99$ %
object99% +
	parameter99, 5
)995 6
{:: 	
return;; 
!;; 
string;; 
.;; 
IsNullOrWhiteSpace;; -
(;;- .
UsernameOrEmail;;. =
);;= >
&&;;? A
!<< 
string<< 
.<< 
IsNullOrWhiteSpace<< -
(<<- .
Password<<. 6
)<<6 7
;<<7 8
}== 	
private?? 
async?? 
void?? 
ExecuteLogin?? '
(??' (
object??( .
	parameter??/ 8
)??8 9
{@@ 	
ifAA 
(AA 
!AA 
CanExecuteLoginAA  
(AA  !
	parameterAA! *
)AA* +
)AA+ ,
{BB 

MessageBoxCC 
.CC 
ShowCC 
(CC  
LangDD 
.DD 
alertRequiredFieldsDD ,
,DD, -
LangEE 
.EE  
alertInputErrorTitleEE -
,EE- .
MessageBoxButtonFF $
.FF$ %
OKFF% '
,FF' (
MessageBoxImageGG #
.GG# $
WarningGG$ +
)GG+ ,
;GG, -
returnHH 
;HH 
}II 
varKK 
clientKK 
=KK 
newKK '
AuthenticationServiceClientKK 8
(KK8 9
)KK9 :
;KK: ;
boolLL 
successLL 
=LL 
falseLL  
;LL  !
tryNN 
{OO 
OperationResultDtoPP "
resultPP# )
=PP* +
awaitPP, 1
clientPP2 8
.PP8 9

LoginAsyncPP9 C
(PPC D
UsernameOrEmailPPD S
,PPS T
PasswordPPU ]
)PP] ^
;PP^ _
ifRR 
(RR 
resultRR 
.RR 
SuccessRR "
)RR" #
{SS 
SessionManagerTT "
.TT" #
InstanceTT# +
.TT+ ,
StartSessionTT, 8
(TT8 9
resultTT9 ?
.TT? @
MessageTT@ G
)TTG H
;TTH I$
MatchmakingClientManagerUU ,
.UU, -

InitializeUU- 7
(UU7 8
)UU8 9
;UU9 :$
MatchmakingClientManagerVV ,
.VV, -
InstanceVV- 5
.VV5 6
ConnectVV6 =
(VV= >
SessionManagerVV> L
.VVL M
InstanceVVM U
.VVU V
CurrentUsernameVVV e
)VVe f
;VVf g
	OpenLobbyWW 
(WW 
	parameterWW '
)WW' (
;WW( )
clientXX 
.XX 
CloseXX  
(XX  !
)XX! "
;XX" #
successYY 
=YY 
trueYY "
;YY" #
}ZZ 
else[[ 
{\\ 

MessageBox]] 
.]] 
Show]] #
(]]# $
result^^ 
.^^ 
Message^^ &
,^^& '
Lang__ 
.__  
alertLoginErrorTitle__ 1
,__1 2
MessageBoxButton`` (
.``( )
OK``) +
,``+ ,
MessageBoxImageaa '
.aa' (
Erroraa( -
)aa- .
;aa. /
}bb 
}cc 
catchdd 
(dd 
FaultExceptiondd !
<dd! "
stringdd" (
>dd( )
fexdd* -
)dd- .
{ee 

MessageBoxff 
.ff 
Showff 
(ff  
fexgg 
.gg 
Detailgg 
,gg 
Langhh 
.hh  
alertLoginErrorTitlehh -
,hh- .
MessageBoxButtonii $
.ii$ %
OKii% '
,ii' (
MessageBoxImagejj #
.jj# $
Errorjj$ )
)jj) *
;jj* +
}kk 
catchll 
(ll 
FaultExceptionll !

fexGeneralll" ,
)ll, -
{mm 

MessageBoxnn 
.nn 
Shownn 
(nn  
Langoo 
.oo #
alertServerErrorMessageoo 0
,oo0 1
Langpp 
.pp 
alertErrorTitlepp (
,pp( )
MessageBoxButtonqq $
.qq$ %
OKqq% '
,qq' (
MessageBoxImagerr #
.rr# $
Errorrr$ )
)rr) *
;rr* +
Consoless 
.ss 
	WriteLiness !
(ss! "
$"ss" $
$strss$ /
{ss/ 0

fexGeneralss0 :
.ss: ;
Messagess; B
}ssB C
"ssC D
)ssD E
;ssE F
}tt 
catchuu 
(uu %
EndpointNotFoundExceptionuu ,
exuu- /
)uu/ 0
{vv 

MessageBoxww 
.ww 
Showww 
(ww  
Langxx 
.xx '
alertConnectionErrorMessagexx 4
,xx4 5
Langyy 
.yy %
alertConnectionErrorTitleyy 2
,yy2 3
MessageBoxButtonzz $
.zz$ %
OKzz% '
,zz' (
MessageBoxImage{{ #
.{{# $
Error{{$ )
){{) *
;{{* +
Console|| 
.|| 
	WriteLine|| !
(||! "
$"||" $
$str||$ 6
{||6 7
ex||7 9
.||9 :
Message||: A
}||A B
"||B C
)||C D
;||D E
}}} 
catch~~ 
(~~ 
	Exception~~ 
ex~~ 
)~~  
{ 

MessageBox
ÄÄ 
.
ÄÄ 
Show
ÄÄ 
(
ÄÄ  
Lang
ÅÅ 
.
ÅÅ &
alertUnknownErrorMessage
ÅÅ 1
,
ÅÅ1 2
Lang
ÇÇ 
.
ÇÇ 
alertErrorTitle
ÇÇ (
,
ÇÇ( )
MessageBoxButton
ÉÉ $
.
ÉÉ$ %
OK
ÉÉ% '
,
ÉÉ' (
MessageBoxImage
ÑÑ #
.
ÑÑ# $
Error
ÑÑ$ )
)
ÑÑ) *
;
ÑÑ* +
Console
ÖÖ 
.
ÖÖ 
	WriteLine
ÖÖ !
(
ÖÖ! "
$"
ÖÖ" $
$str
ÖÖ$ 3
{
ÖÖ3 4
ex
ÖÖ4 6
.
ÖÖ6 7
Message
ÖÖ7 >
}
ÖÖ> ?
"
ÖÖ? @
)
ÖÖ@ A
;
ÖÖA B
}
ÜÜ 
finally
áá 
{
àà 
if
ââ 
(
ââ 
!
ââ 
success
ââ 
&&
ââ 
client
ââ  &
.
ââ& '
State
ââ' ,
!=
ââ- / 
CommunicationState
ââ0 B
.
ââB C
Closed
ââC I
)
ââI J
{
ää 
client
ãã 
.
ãã 
Abort
ãã  
(
ãã  !
)
ãã! "
;
ãã" #
}
åå 
}
çç 
}
éé 	
private
êê 
static
êê 
void
êê 
	OpenLobby
êê %
(
êê% &
object
êê& ,
	parameter
êê- 6
)
êê6 7
{
ëë 	
if
íí 
(
íí 
	parameter
íí 
is
íí 
Window
íí #
loginWindow
íí$ /
)
íí/ 0
{
ìì 
loginWindow
îî 
.
îî 
Close
îî !
(
îî! "
)
îî" #
;
îî# $
}
ïï 
var
óó 
	lobbyView
óó 
=
óó 
new
óó 
	LobbyView
óó  )
(
óó) *
)
óó* +
;
óó+ ,
	lobbyView
òò 
.
òò 
Show
òò 
(
òò 
)
òò 
;
òò 
}
ôô 	
private
õõ 
static
õõ 
void
õõ  
ExecuteCloseWindow
õõ .
(
õõ. /
object
õõ/ 5
	parameter
õõ6 ?
)
õõ? @
{
úú 	
if
ùù 
(
ùù 
	parameter
ùù 
is
ùù 
Window
ùù #
)
ùù# $
{
ûû 
Application
üü 
.
üü 
Current
üü #
.
üü# $
Shutdown
üü$ ,
(
üü, -
)
üü- .
;
üü. /
}
†† 
}
°° 	
private
££ 
static
££ 
void
££ #
ExecuteMaximizeWindow
££ 1
(
££1 2
object
££2 8
	parameter
££9 B
)
££B C
{
§§ 	
if
•• 
(
•• 
	parameter
•• 
is
•• 
Window
•• #
window
••$ *
)
••* +
{
¶¶ 
window
ßß 
.
ßß 
WindowState
ßß "
=
ßß# $
window
ßß% +
.
ßß+ ,
WindowState
ßß, 7
==
ßß8 :
WindowState
ßß; F
.
ßßF G
	Maximized
ßßG P
?
ßßQ R
WindowState
ßßS ^
.
ßß^ _
Normal
ßß_ e
:
ßßf g
WindowState
ßßh s
.
ßßs t
	Maximized
ßßt }
;
ßß} ~
}
®® 
}
©© 	
private
´´ 
static
´´ 
void
´´ #
ExecuteMinimizeWindow
´´ 1
(
´´1 2
object
´´2 8
	parameter
´´9 B
)
´´B C
{
¨¨ 	
if
≠≠ 
(
≠≠ 
	parameter
≠≠ 
is
≠≠ 
Window
≠≠ #
window
≠≠$ *
)
≠≠* +
{
ÆÆ 
window
ØØ 
.
ØØ 
WindowState
ØØ "
=
ØØ# $
WindowState
ØØ% 0
.
ØØ0 1
	Minimized
ØØ1 :
;
ØØ: ;
}
∞∞ 
}
±± 	
private
≥≥ 
static
≥≥ 
void
≥≥ 
ExecuteReturn
≥≥ )
(
≥≥) *
object
≥≥* 0
	parameter
≥≥1 :
)
≥≥: ;
{
¥¥ 	
if
µµ 
(
µµ 
	parameter
µµ 
is
µµ 
Window
µµ #
currentWindow
µµ$ 1
)
µµ1 2
{
∂∂ 
var
∑∑ 
welcomeView
∑∑ 
=
∑∑  !
new
∑∑" %
WelcomeView
∑∑& 1
(
∑∑1 2
)
∑∑2 3
;
∑∑3 4
welcomeView
∏∏ 
.
∏∏ 
WindowState
∏∏ '
=
∏∏( )
WindowState
∏∏* 5
.
∏∏5 6
	Maximized
∏∏6 ?
;
∏∏? @
welcomeView
ππ 
.
ππ 
WindowStyle
ππ '
=
ππ( )
WindowStyle
ππ* 5
.
ππ5 6
None
ππ6 :
;
ππ: ;
welcomeView
∫∫ 
.
∫∫ 

ResizeMode
∫∫ &
=
∫∫' (

ResizeMode
∫∫) 3
.
∫∫3 4
NoResize
∫∫4 <
;
∫∫< =
welcomeView
ªª 
.
ªª 
Show
ªª  
(
ªª  !
)
ªª! "
;
ªª" #
currentWindow
ºº 
.
ºº 
Close
ºº #
(
ºº# $
)
ºº$ %
;
ºº% &
}
ΩΩ 
}
ææ 	
}
øø 
}¿¿ Â9
úC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\ViewModel\HomePages\WelcomeViewModel.cs
	namespace 	
GuessMyMessClient
 
. 
	ViewModel %
.% &
	HomePages& /
{ 
public		 

class		 
WelcomeViewModel		 !
:		" #
ViewModelBase		$ 1
{

 
public 
ICommand 
SignUpCommand %
{& '
get( +
;+ ,
}- .
public 
ICommand 
LoginCommand $
{% &
get' *
;* +
}, -
public 
ICommand "
ContinueAsGuestCommand .
{/ 0
get1 4
;4 5
}6 7
public 
ICommand 
CloseWindowCommand *
{+ ,
get- 0
;0 1
}2 3
public 
ICommand !
MaximizeWindowCommand -
{. /
get0 3
;3 4
}5 6
public 
ICommand !
MinimizeWindowCommand -
{. /
get0 3
;3 4
}5 6
public 
WelcomeViewModel 
(  
)  !
{ 	
SignUpCommand 
= 
new 
RelayCommand  ,
(, -
SignUp- 3
)3 4
;4 5
LoginCommand 
= 
new 
RelayCommand +
(+ ,
Login, 1
)1 2
;2 3"
ContinueAsGuestCommand "
=# $
new% (
RelayCommand) 5
(5 6
ContinueAsGuest6 E
)E F
;F G
CloseWindowCommand 
=  
new! $
RelayCommand% 1
(1 2
ExecuteCloseWindow2 D
)D E
;E F!
MaximizeWindowCommand !
=" #
new$ '
RelayCommand( 4
(4 5!
ExecuteMaximizeWindow5 J
)J K
;K L!
MinimizeWindowCommand !
=" #
new$ '
RelayCommand( 4
(4 5!
ExecuteMinimizeWindow5 J
)J K
;K L
} 	
private 
static 
void 
SignUp "
(" #
object# )
	parameter* 3
)3 4
{ 	
if 
( 
	parameter 
is 
Window #
welcomeWindow$ 1
)1 2
{ 
var   

signUpView   
=    
new  ! $

SignUpView  % /
(  / 0
)  0 1
;  1 2

signUpView!! 
.!! 
WindowState!! &
=!!' (
welcomeWindow!!) 6
.!!6 7
WindowState!!7 B
;!!B C

signUpView"" 
."" 
WindowState"" &
=""' (
WindowState"") 4
.""4 5
	Maximized""5 >
;""> ?

signUpView## 
.## 
WindowStyle## &
=##' (
WindowStyle##) 4
.##4 5
None##5 9
;##9 :

signUpView$$ 
.$$ 

ResizeMode$$ %
=$$& '

ResizeMode$$( 2
.$$2 3
NoResize$$3 ;
;$$; <

signUpView%% 
.%% 
Show%% 
(%%  
)%%  !
;%%! "
welcomeWindow&& 
.&& 
Close&& #
(&&# $
)&&$ %
;&&% &
}'' 
}(( 	
private** 
static** 
void** 
Login** !
(**! "
object**" (
	parameter**) 2
)**2 3
{++ 	
if,, 
(,, 
	parameter,, 
is,, 
Window,, #
welcomeWindow,,$ 1
),,1 2
{-- 
var.. 
	loginView.. 
=.. 
new..  #
	LoginView..$ -
(..- .
)... /
;../ 0
	loginView// 
.// 
WindowState// %
=//& '
welcomeWindow//( 5
.//5 6
WindowState//6 A
;//A B
	loginView00 
.00 
WindowState00 %
=00& '
WindowState00( 3
.003 4
	Maximized004 =
;00= >
	loginView11 
.11 
WindowStyle11 %
=11& '
WindowStyle11( 3
.113 4
None114 8
;118 9
	loginView22 
.22 

ResizeMode22 $
=22% &

ResizeMode22' 1
.221 2
NoResize222 :
;22: ;
	loginView33 
.33 
Show33 
(33 
)33  
;33  !
welcomeWindow44 
.44 
Close44 #
(44# $
)44$ %
;44% &
}55 
}66 	
private88 
static88 
void88 
ContinueAsGuest88 +
(88+ ,
object88, 2
	parameter883 <
)88< =
{99 	
var:: 
	lobbyView:: 
=:: 
new:: 
	LobbyView::  )
(::) *
)::* +
;::+ ,
	lobbyView;; 
.;; 
Show;; 
(;; 
);; 
;;; 
if== 
(== 
	parameter== 
is== 
Window== #
welcomeWindow==$ 1
)==1 2
{>> 
welcomeWindow?? 
.?? 
Close?? #
(??# $
)??$ %
;??% &
}@@ 
}AA 	
privateCC 
staticCC 
voidCC 
ExecuteCloseWindowCC .
(CC. /
objectCC/ 5
	parameterCC6 ?
)CC? @
{DD 	
ifEE 
(EE 
	parameterEE 
isEE 
WindowEE #
)EE# $
{FF 
ApplicationGG 
.GG 
CurrentGG #
.GG# $
ShutdownGG$ ,
(GG, -
)GG- .
;GG. /
}HH 
}II 	
privateKK 
staticKK 
voidKK !
ExecuteMaximizeWindowKK 1
(KK1 2
objectKK2 8
	parameterKK9 B
)KKB C
{LL 	
ifMM 
(MM 
	parameterMM 
isMM 
WindowMM #
windowMM$ *
)MM* +
{NN 
windowOO 
.OO 
WindowStateOO "
=OO# $
windowOO% +
.OO+ ,
WindowStateOO, 7
==OO8 :
WindowStateOO; F
.OOF G
	MaximizedOOG P
?OOQ R
WindowStateOOS ^
.OO^ _
NormalOO_ e
:OOf g
WindowStateOOh s
.OOs t
	MaximizedOOt }
;OO} ~
}PP 
}QQ 	
privateSS 
staticSS 
voidSS !
ExecuteMinimizeWindowSS 1
(SS1 2
objectSS2 8
	parameterSS9 B
)SSB C
{TT 	
ifUU 
(UU 
	parameterUU 
isUU 
WindowUU #
windowUU$ *
)UU* +
{VV 
windowWW 
.WW 
WindowStateWW "
=WW# $
WindowStateWW% 0
.WW0 1
	MinimizedWW1 :
;WW: ;
}XX 
}YY 	
}ZZ 
}[[ ≈
âC:\Users\Raul\Desktop\Rodrigo\5¬∞Semestre\Tecnolog√≠asParaLaConstrucci√≥n\GuessMyMessClientProyect\GuessMyMessClient\Model\AvatarModel.cs
	namespace		 	
GuessMyMessClient		
 
.		 
Model		 !
{

 
public 

class 
AvatarModel 
: 
ViewModelBase ,
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
byte 
[ 
] 
	ImageData 
{  !
get" %
;% &
set' *
;* +
}, -
public 
BitmapImage 
ImageSource &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
private 
bool 
_isSelected  
;  !
public 
bool 

IsSelected 
{ 	
get 
=> 
_isSelected 
; 
set 
{ 
_isSelected 
= 
value  %
;% &
OnPropertyChanged' 8
(8 9
)9 :
;: ;
}< =
} 	
} 
} 